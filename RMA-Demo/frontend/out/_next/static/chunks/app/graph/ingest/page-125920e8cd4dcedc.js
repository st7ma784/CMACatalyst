(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[440],{6929:function(e,t,o){Promise.resolve().then(o.bind(o,9153))},9153:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return l}});var r=o(3827),n=o(4090),i=o(7908);function l(){let[e,t]=(0,n.useState)([]),[o,l]=(0,n.useState)("manuals"),[s,d]=(0,n.useState)(!1),[a,c]=(0,n.useState)(null),[p,x]=(0,n.useState)([]),[u,g]=(0,n.useState)(null),f=o=>{t(e.filter((e,t)=>t!==o))},h=async()=>{if(!e.length||!o.trim()){g("Please select files and provide a collection name");return}d(!0),g(null),c(null);try{let r=new FormData;e.forEach(e=>{r.append("files",e)}),r.append("collection_name",o),await i.Z.post("http://localhost:8102/ingest",r,{headers:{"Content-Type":"multipart/form-data"}});let n=[];for(let t of e)try{let e=await t.text(),o=await i.Z.post("http://localhost:8108/extract",{markdown:e,source_document:t.name.replace(/\.[^/.]+$/,""),graph_type:"MANUAL"});n.push({extraction_id:o.data.extraction_id,graph_id:o.data.graph_id,entity_count:o.data.entity_count,relationship_count:o.data.relationship_count,avg_confidence:o.data.avg_confidence,status:"COMPLETED"})}catch(e){console.error("Failed to extract graph from ".concat(t.name,":"),e)}x(n),c({success:!0,processed:e.length,failed:0,details:e.map(e=>({name:e.name,status:"success"}))}),t([])}catch(e){var r,n;g(i.Z.isAxiosError(e)?(null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.detail)||e.message:"Failed to ingest documents")}finally{d(!1)}};return(0,r.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",padding:"20px"},children:(0,r.jsxs)("div",{style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,r.jsx)("h1",{style:{fontSize:"28px",marginBottom:"8px"},children:"Document Ingestion"}),(0,r.jsx)("p",{style:{color:"#666",fontSize:"16px"},children:"Upload documents to ingest into the RAG vector store and extract Neo4j graphs"})]}),(0,r.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"30px",backgroundColor:"#fff"},children:[(0,r.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold",fontSize:"14px"},children:"Collection Name:"}),(0,r.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),placeholder:"e.g., manuals, client-docs, tax-rules",style:{width:"100%",padding:"12px",borderRadius:"4px",border:"1px solid #ccc",boxSizing:"border-box",fontSize:"14px"}}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"#999",marginTop:"4px"},children:"Documents will be grouped in this collection for easier management"})]}),(0,r.jsxs)("div",{style:{marginBottom:"25px",padding:"30px",border:"2px dashed #ccc",borderRadius:"4px",backgroundColor:"#fafafa",textAlign:"center",cursor:"pointer",transition:"all 0.3s ease"},onDragOver:e=>{e.preventDefault(),e.currentTarget.style.borderColor="#007bff",e.currentTarget.style.backgroundColor="#e7f3ff"},onDragLeave:e=>{e.currentTarget.style.borderColor="#ccc",e.currentTarget.style.backgroundColor="#fafafa"},onDrop:o=>{o.preventDefault(),o.currentTarget.style.borderColor="#ccc",o.currentTarget.style.backgroundColor="#fafafa",t([...e,...Array.from(o.dataTransfer.files)])},children:[(0,r.jsx)("input",{type:"file",multiple:!0,accept:".md,.txt,.pdf",onChange:o=>{t([...e,...Array.from(o.target.files||[])])},style:{display:"none"},id:"fileInput"}),(0,r.jsxs)("label",{htmlFor:"fileInput",style:{cursor:"pointer"},children:[(0,r.jsx)("div",{style:{fontSize:"18px",marginBottom:"8px",fontWeight:"bold"},children:"\uD83D\uDCC4 Drop files here or click to select"}),(0,r.jsx)("p",{style:{color:"#999",fontSize:"14px"},children:"Supported formats: Markdown, Text, PDF"})]})]}),e.length>0&&(0,r.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,r.jsxs)("h3",{style:{marginBottom:"12px",fontWeight:"bold"},children:["Selected Files (",e.length,"):"]}),(0,r.jsx)("div",{style:{backgroundColor:"#f9f9f9",borderRadius:"4px",padding:"12px"},children:e.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",backgroundColor:"#fff",marginBottom:"8px",borderRadius:"4px",border:"1px solid #e0e0e0"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{style:{fontWeight:"bold",fontSize:"14px"},children:e.name}),(0,r.jsxs)("span",{style:{color:"#999",fontSize:"12px",marginLeft:"10px"},children:["(",(e.size/1024).toFixed(2)," KB)"]})]}),(0,r.jsx)("button",{onClick:()=>f(t),style:{backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",padding:"6px 12px",cursor:"pointer",fontSize:"12px"},children:"Remove"})]},t))})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"25px"},children:[(0,r.jsx)("button",{onClick:h,disabled:s||!e.length||!o.trim(),style:{padding:"12px 24px",backgroundColor:!s&&e.length&&o.trim()?"#28a745":"#ccc",color:"white",border:"none",borderRadius:"4px",cursor:!s&&e.length&&o.trim()?"pointer":"not-allowed",fontSize:"14px",fontWeight:"bold"},children:s?"Ingesting...":"Ingest Documents"}),(0,r.jsx)("button",{onClick:()=>{t([]),c(null),x([]),g(null)},style:{padding:"12px 24px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Clear"})]}),u&&(0,r.jsxs)("div",{style:{padding:"15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",border:"1px solid #f5c6cb",marginBottom:"25px"},children:[(0,r.jsx)("strong",{children:"Error:"})," ",u]}),(null==a?void 0:a.success)&&(0,r.jsxs)("div",{style:{padding:"15px",backgroundColor:"#d4edda",color:"#155724",borderRadius:"4px",border:"1px solid #c3e6cb"},children:[(0,r.jsx)("strong",{children:"âœ“ Ingestion Complete!"}),(0,r.jsxs)("p",{children:[a.processed," document",1!==a.processed?"s":""," successfully ingested and graph extracted"]})]})]}),p.length>0&&(0,r.jsxs)("div",{style:{marginTop:"30px",border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:"#fff"},children:[(0,r.jsx)("h2",{style:{marginBottom:"20px",fontSize:"20px",fontWeight:"bold"},children:"Graph Extraction Results"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"15px"},children:p.map(e=>(0,r.jsxs)("div",{style:{border:"1px solid #e0e0e0",borderRadius:"4px",padding:"15px",backgroundColor:"#f9f9f9"},children:[(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsx)("span",{style:{backgroundColor:"COMPLETED"===e.status?"#28a745":"#ffc107",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold"},children:e.status})}),(0,r.jsxs)("div",{style:{fontSize:"14px",marginBottom:"8px"},children:[(0,r.jsx)("strong",{children:"Entities:"})," ",e.entity_count]}),(0,r.jsxs)("div",{style:{fontSize:"14px",marginBottom:"8px"},children:[(0,r.jsx)("strong",{children:"Relationships:"})," ",e.relationship_count]}),(0,r.jsxs)("div",{style:{fontSize:"14px",marginBottom:"8px"},children:[(0,r.jsx)("strong",{children:"Avg Confidence:"})," ",(100*e.avg_confidence).toFixed(1),"%"]}),(0,r.jsxs)("div",{style:{fontSize:"11px",color:"#999",marginTop:"10px",fontFamily:"monospace",wordBreak:"break-all"},children:["Graph ID: ",e.graph_id.substring(0,12),"..."]})]},e.extraction_id))})]})]})})}}},function(e){e.O(0,[908,971,69,744],function(){return e(e.s=6929)}),_N_E=e.O()}]);