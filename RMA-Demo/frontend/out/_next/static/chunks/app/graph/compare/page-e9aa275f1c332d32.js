(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{4365:function(e,t,r){Promise.resolve().then(r.bind(r,9571))},9571:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var i=r(3827),l=r(4090),d=r(7908),n=r(2693);function o(){let[e,t]=(0,l.useState)(""),[r,o]=(0,l.useState)(""),[a,s]=(0,l.useState)(null),[p,c]=(0,l.useState)(null),[x,h]=(0,l.useState)(null),[g,u]=(0,l.useState)(!1),[f,m]=(0,l.useState)(null),[y,b]=(0,l.useState)(null),j=async()=>{if(!e.trim()||!r.trim()){m("Please provide both graph IDs");return}u(!0),m(null);try{let[t,i]=await Promise.all([d.Z.get("http://localhost:8108/graph/".concat(e)),d.Z.get("http://localhost:8108/graph/".concat(r))]);s(t.data),c(i.data)}catch(e){var t,i;m(d.Z.isAxiosError(e)?(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.detail)||e.message:"Failed to fetch graphs")}finally{u(!1)}},v=async()=>{if(!e.trim()||!r.trim()){m("Please provide both graph IDs");return}u(!0),m(null);try{let t=await d.Z.post("http://localhost:8108/graph/compare",{manual_graph_id:e,client_graph_id:r});h(t.data)}catch(e){var t,i;m(d.Z.isAxiosError(e)?(null===(i=e.response)||void 0===i?void 0:null===(t=i.data)||void 0===t?void 0:t.detail)||e.message:"Failed to compare graphs")}finally{u(!1)}};return(0,i.jsx)("div",{style:{minHeight:"100vh",backgroundColor:"#f5f5f5",padding:"20px"},children:(0,i.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,i.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,i.jsx)("h1",{style:{fontSize:"28px",marginBottom:"8px"},children:"Graph Comparison & Rule Matching"}),(0,i.jsx)("p",{style:{color:"#666",fontSize:"16px"},children:"Compare knowledge graphs to find applicable rules and reasoning"})]}),(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:"#fff",marginBottom:"20px"},children:[(0,i.jsx)("h2",{children:"Graph Selection"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"15px"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Manual Graph ID:"}),(0,i.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Paste graph ID...",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",boxSizing:"border-box"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Client Graph ID:"}),(0,i.jsx)("input",{type:"text",value:r,onChange:e=>o(e.target.value),placeholder:"Paste graph ID...",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc",boxSizing:"border-box"}})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,i.jsx)("button",{onClick:j,disabled:g||!e.trim()||!r.trim(),style:{padding:"10px 20px",backgroundColor:g?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:g?"not-allowed":"pointer",fontSize:"14px"},children:g?"Loading...":"Load Graphs"}),(0,i.jsx)("button",{onClick:v,disabled:g||!e.trim()||!r.trim(),style:{padding:"10px 20px",backgroundColor:g?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:g?"not-allowed":"pointer",fontSize:"14px"},children:g?"Comparing...":"Compare & Find Rules"})]}),f&&(0,i.jsxs)("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",border:"1px solid #f5c6cb"},children:[(0,i.jsx)("strong",{children:"Error:"})," ",f]})]}),(a||p)&&(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[a&&(0,i.jsx)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:"#fff"},children:(0,i.jsx)(n.Z,{graphData:a,title:"Manual Knowledge Graph (".concat(a.entities.length," entities)")})}),p&&(0,i.jsx)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:"#fff"},children:(0,i.jsx)(n.Z,{graphData:p,title:"Client Situation Graph (".concat(p.entities.length," entities)")})})]}),x&&(0,i.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",backgroundColor:"#fff"},children:[(0,i.jsx)("h2",{style:{marginBottom:"15px"},children:"Applicable Rules"}),(0,i.jsx)("div",{style:{padding:"15px",backgroundColor:"#f0f8ff",borderRadius:"4px",marginBottom:"20px",border:"1px solid #b0d4e3"},children:(0,i.jsx)("p",{style:{margin:0},children:x.explanation})}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"20px"},children:[(0,i.jsxs)("div",{style:{borderRight:"1px solid #eee",paddingRight:"20px"},children:[(0,i.jsxs)("h3",{style:{marginBottom:"15px"},children:["Found ",x.applicable_rules.length," Rules"]}),(0,i.jsx)("div",{style:{maxHeight:"500px",overflowY:"auto"},children:x.applicable_rules.map((e,t)=>(0,i.jsxs)("div",{onClick:()=>b(e),style:{padding:"12px",marginBottom:"10px",backgroundColor:(null==y?void 0:y.rule_id)===e.rule_id?"#e7f3ff":"#f9f9f9",border:(null==y?void 0:y.rule_id)===e.rule_id?"2px solid #007bff":"1px solid #ddd",borderRadius:"4px",cursor:"pointer"},children:[(0,i.jsx)("div",{style:{fontSize:"13px",marginBottom:"5px"},children:(0,i.jsxs)("strong",{children:["Rule ",t+1]})}),(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#666",lineHeight:"1.4"},children:[e.rule_text.substring(0,100),"..."]}),(0,i.jsxs)("div",{style:{fontSize:"11px",color:"#999",marginTop:"5px"},children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]},e.rule_id))})]}),(0,i.jsx)("div",{children:y?(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{marginBottom:"15px"},children:"Rule Details"}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsx)("h4",{style:{marginBottom:"8px",color:"#333"},children:"Rule Text:"}),(0,i.jsx)("p",{style:{backgroundColor:"#f9f9f9",padding:"12px",borderRadius:"4px",lineHeight:"1.6"},children:y.rule_text})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsx)("h4",{style:{marginBottom:"8px",color:"#333"},children:"Confidence: "}),(0,i.jsx)("div",{style:{width:"100%",backgroundColor:"#e9ecef",borderRadius:"4px",overflow:"hidden",height:"24px"},children:(0,i.jsxs)("div",{style:{width:"".concat(100*y.confidence,"%"),backgroundColor:"#28a745",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold"},children:[(100*y.confidence).toFixed(0),"%"]})})]}),(0,i.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,i.jsx)("h4",{style:{marginBottom:"8px",color:"#333"},children:"Reasoning:"}),(0,i.jsx)("p",{style:{backgroundColor:"#f9f9f9",padding:"12px",borderRadius:"4px",lineHeight:"1.6",color:"#555"},children:y.reasoning})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h4",{style:{marginBottom:"8px",color:"#333"},children:["Matched Entities (",y.matched_entities.length,"):"]}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:y.matched_entities.map(e=>(0,i.jsx)("span",{style:{backgroundColor:"#e7f3ff",color:"#007bff",padding:"6px 12px",borderRadius:"16px",fontSize:"12px"},children:e.text},e.id))})]})]}):(0,i.jsx)("div",{style:{padding:"40px 20px",textAlign:"center",color:"#999"},children:"Select a rule to view details"})})]})]})]})})}},2693:function(e,t,r){"use strict";var i=r(6846),l=r(4375),d=r(3827),n=r(4090),o=r(5999);let a={DEBT_TYPE:"#FF6B6B",OBLIGATION:"#4ECDC4",RULE:"#45B7D1",GATE:"#FFA07A",MONEY_THRESHOLD:"#98D8C8",CREDITOR:"#F7DC6F",REPAYMENT_TERM:"#BB8FCE",LEGAL_STATUS:"#85C1E2",CLIENT_ATTRIBUTE:"#F8B88B",PERSON:"#82E0AA",ORGANIZATION:"#F5B7B1",DATE:"#D7BDE2",MONEY:"#AED6F1",PERCENT:"#F9E79F",LOCATION:"#D5F4E6",DURATION:"#FADBD8"};t.Z=e=>{let{graphData:t,title:r,onEntityClick:s}=e,p=(0,n.useRef)(null),[c,x]=(0,n.useState)(null),h=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!p.current||!t.entities.length)return;let e=o.Ys(p.current);e.selectAll("*").remove();let r=p.current.clientWidth,d=p.current.clientHeight,n=t.entities.map(e=>(0,i._)({},e)),c=t.relationships.map(e=>(0,l._)((0,i._)({},e),{source:e.entity1_id,target:e.entity2_id})),g=o.A4v(n).force("link",o.Fsl(c).id(e=>e.id).distance(80)).force("charge",o.q5i().strength(-400)).force("center",o.wqt(r/2,d/2)).force("collision",o.Hh().radius(30));h.current=g;let u=e.append("g");e.append("defs").selectAll("marker").data(["arrowhead"]).enter().append("marker").attr("id",e=>e).attr("markerWidth",10).attr("markerHeight",10).attr("refX",28).attr("refY",3).attr("orient","auto").append("polygon").attr("points","0 0, 10 3, 0 6").attr("fill","#999");let f=u.selectAll(".link").data(c).enter().append("line").attr("class","link").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>2+3*e.confidence).attr("marker-end","url(#arrowhead)"),m=u.selectAll(".link-label").data(c).enter().append("text").attr("class","link-label").attr("font-size","11px").attr("fill","#666").attr("text-anchor","middle").text(e=>e.relation_type),y=u.selectAll(".node").data(n).enter().append("circle").attr("class","node").attr("r",25).attr("fill",e=>a[e.entity_type]||"#999").attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").on("click",(e,t)=>{x(t),null==s||s(t)}),b=u.selectAll(".node-label").data(n).enter().append("text").attr("class","node-label").attr("text-anchor","middle").attr("dy",".3em").attr("font-size","12px").attr("fill","#fff").attr("font-weight","bold").attr("pointer-events","none").text(e=>e.text.substring(0,8));y.append("title").text(e=>"".concat(e.text,"\n").concat(e.entity_type,"\nConfidence: ").concat((100*e.confidence).toFixed(0),"%"));let j=o.sPX().on("zoom",e=>{u.attr("transform",e.transform)});return e.call(j),g.on("tick",()=>{f.attr("x1",e=>e.source.x||0).attr("y1",e=>e.source.y||0).attr("x2",e=>e.target.x||0).attr("y2",e=>e.target.y||0),m.attr("x",e=>((e.source.x||0)+(e.target.x||0))/2).attr("y",e=>((e.source.y||0)+(e.target.y||0))/2),y.attr("cx",e=>e.x||0).attr("cy",e=>e.y||0),b.attr("x",e=>e.x||0).attr("y",e=>e.y||0)}),()=>{g.stop()}},[t,s]),(0,d.jsxs)("div",{style:{width:"100%",height:"100%"},children:[r&&(0,d.jsx)("h3",{style:{margin:"10px 0"},children:r}),(0,d.jsx)("svg",{ref:p,style:{width:"100%",height:"500px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#fafafa"}}),c&&(0,d.jsxs)("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"#f0f0f0",borderRadius:"4px",border:"1px solid #999"},children:[(0,d.jsxs)("h4",{children:["Selected: ",c.text]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Type:"})," ",c.entity_type]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Confidence:"})," ",(100*c.confidence).toFixed(1),"%"]})]})]})}}},function(e){e.O(0,[908,999,971,69,744],function(){return e(e.s=4365)}),_N_E=e.O()}]);