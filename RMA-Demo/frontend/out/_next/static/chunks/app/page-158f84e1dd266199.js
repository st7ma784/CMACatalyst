(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3230:function(e,s,t){Promise.resolve().then(t.bind(t,9773))},9773:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return e4}});var r=t(3827),l=t(4090),a=t(7907),n=t(8792),i=t(6846),c=t(5562),d=t(2481),o=t(2169);let x=d.fC,m=l.forwardRef((e,s)=>{var{className:t}=e,l=(0,c._)(e,["className"]);return(0,r.jsx)(d.aV,(0,i._)({ref:s,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},l))});m.displayName=d.aV.displayName;let h=l.forwardRef((e,s)=>{var{className:t}=e,l=(0,c._)(e,["className"]);return(0,r.jsx)(d.xz,(0,i._)({ref:s,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},l))});h.displayName=d.xz.displayName;let u=l.forwardRef((e,s)=>{var{className:t}=e,l=(0,c._)(e,["className"]);return(0,r.jsx)(d.VY,(0,i._)({ref:s,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},l))});u.displayName=d.VY.displayName;var g=t(575),b=t(3779),p=t(7908);function j(){let[e,s]=(0,l.useState)(""),[t,a]=(0,l.useState)(""),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),o=async()=>{if(!e||!t){alert("Please provide both notes and client name");return}i(!0);try{let s=await p.Z.post("".concat("https://api.rmatool.org.uk/service/notes","/convert"),{notes:e,client_name:t});d(s.data)}catch(e){var s,r;alert("Error: ".concat((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.detail)||e.message))}finally{i(!1)}},x=e=>{navigator.clipboard.writeText(e),alert("Copied to clipboard!")};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Notes to Client Letter"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Convert your advisor notes into simple, client-friendly language"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name"}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter client name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Advisor Notes"}),(0,r.jsx)("textarea",{value:e,onChange:e=>s(e.target.value),rows:8,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Paste your advisor notes here..."})]}),(0,r.jsx)("button",{onClick:o,disabled:n,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:n?"Converting...":"Convert to Client Letter"})]}),c&&(0,r.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Conversion Successful!"}),(0,r.jsx)("p",{className:"text-green-700 text-sm",children:"Your notes have been converted to client-friendly language"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Matters Discussed"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:c.matters_discussed})]}),(0,r.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-purple-900 mb-2",children:"Our Actions"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:c.our_actions})]}),(0,r.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-orange-900 mb-2",children:"Your Actions"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:c.your_actions})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Full Letter"}),(0,r.jsx)("button",{onClick:()=>x(c.full_text),className:"text-sm bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded",children:"Copy"})]}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:c.full_text})]})]})]})]})}var y=t(2209);function N(){let[e,s]=(0,l.useState)(""),[t,a]=(0,l.useState)(""),[n,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1),o=async()=>{if(!e||!t){alert("Please provide both client ID and name");return}d(!0);try{let s=localStorage.getItem("advisor_token");if(!s){alert("You must be logged in to generate QR codes"),d(!1);return}let r=await p.Z.post("".concat("https://api.rmatool.org.uk/service/upload","/generate-qr"),{client_id:e,client_name:t},{headers:{Authorization:"Bearer ".concat(s)}});i(r.data);let l=JSON.parse(localStorage.getItem("known_clients")||"[]");l.includes(e)||(l.push(e),localStorage.setItem("known_clients",JSON.stringify(l)))}catch(e){var s,r;alert("Error: ".concat((null===(r=e.response)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.detail)||e.message))}finally{d(!1)}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Generate Client QR Code"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Create a QR code for clients to access their document upload portal"}),(0,r.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client ID"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., CLIENT001"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name"}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., John Smith"})]}),(0,r.jsx)("button",{onClick:o,disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:c?"Generating...":"Generate QR Code"})]}),n&&(0,r.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"QR Code Generated!"}),(0,r.jsx)("p",{className:"text-green-700 text-sm",children:"Client can scan this code to access their upload portal"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg border-2 border-gray-200",children:(0,r.jsx)(y.tv,{id:"qr-code-svg",value:n.upload_url,size:256,level:"H",includeMargin:!0})}),(0,r.jsx)("div",{className:"text-center space-y-2",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Upload URL: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:n.upload_url})]})}),(0,r.jsx)("button",{onClick:()=>{if(!n)return;let s=document.getElementById("qr-code-svg");if(!s)return;let t=new XMLSerializer().serializeToString(s),r=document.createElement("canvas"),l=r.getContext("2d"),a=new Image;r.width=512,r.height=512,a.onload=()=>{null==l||l.drawImage(a,0,0);let s=r.toDataURL("image/png"),t=document.createElement("a");t.download="qr_".concat(e,".png"),t.href=s,t.click()},a.src="data:image/svg+xml;base64,"+btoa(t)},className:"bg-indigo-600 text-white py-2 px-6 rounded-md hover:bg-indigo-700 transition-colors",children:"Download QR Code"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Instructions for Client:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-blue-800 space-y-1 text-sm",children:[(0,r.jsx)("li",{children:"Scan the QR code with your phone camera"}),(0,r.jsx)("li",{children:"You'll be taken to your personal upload page"}),(0,r.jsx)("li",{children:"Upload any documents you need to share"}),(0,r.jsx)("li",{children:"Documents will be automatically processed and organized"})]})]})]})]})}var f=t(3482);let v=()=>f.Y.rag();function w(){let[e,s]=(0,l.useState)(""),[t,a]=(0,l.useState)([]),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!0),[o,x]=(0,l.useState)(!0),m=e=>{let s=e.toLowerCase();return e.split(" ").length>15||s.includes(" and ")||s.includes(" or ")||s.includes(" vs ")||s.includes("compare")||s.includes("difference")||s.includes("steps to")||s.includes("how do i")||s.includes("what if")||s.includes("when should")||s.includes("which is better")},h=async()=>{if(!e.trim())return;let t={role:"user",content:e};a(e=>[...e,t]),s(""),i(!0);try{let s;let t={"Content-Type":"application/json"},r=localStorage.getItem("advisor_token");r&&(t.Authorization="Bearer ".concat(r));let l=c&&m(e),n=l?"/agentic-query":"/query";s=l?await p.Z.post("".concat(v()).concat(n),{question:e,model:"llama3.2",max_iterations:3,top_k:4,show_reasoning:o},{headers:t}):await p.Z.post("".concat(v()).concat(n),{question:e},{headers:t});let i={role:"assistant",content:s.data.answer,sources:s.data.sources,retrieved_chunks:s.data.retrieved_chunks,is_agentic:l,reasoning_steps:s.data.reasoning_steps,iterations_used:s.data.iterations_used,confidence:s.data.confidence};a(e=>[...e,i])}catch(s){var r,l;let e={role:"assistant",content:"Error: ".concat((null===(l=s.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.detail)||s.message)};a(s=>[...s,e])}finally{i(!1)}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 h-[calc(100vh-16rem)] flex flex-col",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Ask the Manuals"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:"\uD83E\uDD16 Agent Mode"})]}),c&&(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)("input",{type:"checkbox",checked:o,onChange:e=>x(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-gray-700",children:"\uD83E\uDDE0 Show Reasoning"})]})]})]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["Query training manuals and documentation",c&&(0,r.jsx)("span",{className:"ml-2 text-sm text-blue-600",children:"• Agent will analyze complex questions and plan optimal search strategy"})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4 space-y-4 bg-gray-50 rounded-lg p-4",children:[0===t.length?(0,r.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,r.jsx)("p",{className:"mb-2",children:"No messages yet"}),(0,r.jsx)("p",{className:"text-sm",children:"Ask a question about the training manuals"}),c&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg max-w-md mx-auto",children:[(0,r.jsx)("p",{className:"text-sm text-blue-800 font-semibold mb-2",children:"\uD83E\uDD16 Agent Mode Active"}),(0,r.jsx)("p",{className:"text-xs text-blue-700",children:"Complex questions will be analyzed and answered using multi-step reasoning"})]})]}):t.map((e,s)=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:"max-w-[80%] rounded-lg p-4 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-900"),children:[e.is_agentic&&(0,r.jsxs)("div",{className:"mb-2 flex items-center gap-2 text-xs",children:[(0,r.jsx)("span",{className:"bg-purple-100 text-purple-700 px-2 py-1 rounded-full font-semibold",children:"\uD83E\uDD16 Agent Response"}),e.iterations_used&&(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:[e.iterations_used," iteration",e.iterations_used>1?"s":""]})]}),(0,r.jsx)("p",{className:"whitespace-pre-wrap",children:e.content}),e.confidence&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-600",children:"Confidence:"}),(0,r.jsx)("span",{className:"text-xs font-medium ".concat(e.confidence.startsWith("HIGH")?"text-green-600":e.confidence.startsWith("MEDIUM")?"text-yellow-600":"text-red-600"),children:e.confidence})]})}),e.reasoning_steps&&e.reasoning_steps.length>0&&(0,r.jsxs)("details",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsxs)("summary",{className:"text-xs font-semibold text-purple-600 cursor-pointer hover:text-purple-700 flex items-center gap-1",children:["\uD83E\uDDE0 Agent Reasoning (",e.reasoning_steps.length," steps)"]}),(0,r.jsx)("div",{className:"mt-2 space-y-2",children:e.reasoning_steps.map((e,s)=>(0,r.jsxs)("div",{className:"text-xs bg-purple-50 p-3 rounded border border-purple-200",children:[(0,r.jsxs)("div",{className:"font-semibold text-purple-900 mb-1 flex items-center gap-1",children:[(0,r.jsx)("span",{className:"bg-purple-200 text-purple-800 px-2 py-0.5 rounded-full text-xs",children:s+1}),e.step.toUpperCase(),": ",e.description]}),(0,r.jsx)("div",{className:"text-gray-700 ml-6",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap text-xs bg-white p-2 rounded border border-purple-100 overflow-x-auto",children:JSON.stringify(e.result,null,2)})})]},s))})]}),e.sources&&e.sources.length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsxs)("p",{className:"text-xs font-semibold text-gray-600 mb-1",children:["\uD83D\uDCDA Sources (",e.sources.length,"):"]}),(0,r.jsx)("ul",{className:"text-xs text-gray-600 space-y-1",children:e.sources.map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)("span",{className:"mr-1",children:"•"}),(0,r.jsx)("span",{children:e})]},s))})]}),e.retrieved_chunks&&e.retrieved_chunks.length>0&&(0,r.jsxs)("details",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,r.jsxs)("summary",{className:"text-xs font-semibold text-blue-600 cursor-pointer hover:text-blue-700",children:["\uD83D\uDD0D View Retrieved Chunks (",e.retrieved_chunks.length,")"]}),(0,r.jsx)("div",{className:"mt-2 space-y-2 max-h-60 overflow-y-auto",children:e.retrieved_chunks.map((e,s)=>(0,r.jsxs)("div",{className:"text-xs bg-gray-50 p-2 rounded border border-gray-200",children:[(0,r.jsxs)("div",{className:"font-semibold text-gray-700 mb-1",children:[e.source," (Chunk ",e.chunk_id,")"]}),(0,r.jsx)("div",{className:"text-gray-600 whitespace-pre-wrap text-xs",children:e.text})]},s))})]})]})},s)),n&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}),c&&(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"Agent is thinking..."})]})})})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("textarea",{value:e,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},rows:3,placeholder:"Ask a question about the manuals...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),(0,r.jsx)("button",{onClick:h,disabled:n||!e.trim(),className:"px-6 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Send"})]})]})}var k=t(5671),C=t(2782),D=t(2647),A=t(9069),S=t(6578),_=t(8994),R=t(8670),E=t(9475);function P(){let[e,s]=(0,l.useState)(""),[t,a]=(0,l.useState)(""),[n,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(null),[o,x]=(0,l.useState)([]),[m,h]=(0,l.useState)(!1),[u,b]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[y,N]=(0,l.useState)(""),f="https://api.rmatool.org.uk/service/upload";(0,l.useEffect)(()=>{v()},[]),(0,l.useEffect)(()=>{e?w():d(null)},[e]);let v=async()=>{j(!0);try{let e=localStorage.getItem("advisor_token");if(!e)return;let s=await fetch("".concat(f,"/clients"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();x(e.clients||[])}}catch(e){console.error("Error loading clients:",e)}finally{j(!1)}},w=async()=>{b(!0),N("");try{let s=localStorage.getItem("advisor_token");if(!s){N("Please login first");return}let t=await fetch("".concat(f,"/client-stats/").concat(e),{headers:{Authorization:"Bearer ".concat(s)}});if(t.ok){let e=await t.json();d(e)}else 404===t.status?d({client_id:e,total_chunks:0,total_documents:0,documents:[],status:"not_initialized"}):N("Failed to load client statistics")}catch(e){console.error("Error loading stats:",e)}finally{b(!1)}},P=async()=>{if(!e.trim()||!t.trim()){N("Please enter both client ID and question");return}h(!0),N(""),i(null);try{let s=localStorage.getItem("advisor_token");if(!s){N("Please login first"),h(!1);return}let r=await fetch("".concat(f,"/query-client-documents"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({client_id:e,question:t,model:"llama3.2"})});if(!r.ok){let e=await r.json();throw Error(e.detail||"Failed to query documents")}let l=await r.json();i(l)}catch(e){N(e.message||"An error occurred while searching")}finally{h(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(k.Zb,{children:[(0,r.jsxs)(k.Ol,{children:[(0,r.jsx)(k.ll,{children:"Search Client Documents"}),(0,r.jsx)(k.SZ,{children:"Use AI to search and query a client's uploaded documents"})]}),(0,r.jsxs)(k.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D._,{htmlFor:"clientId",children:"Client ID"}),(0,r.jsxs)("select",{id:"clientId",value:e,onChange:e=>s(e.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",children:[(0,r.jsx)("option",{value:"",children:"Select a client..."}),p?(0,r.jsx)("option",{value:"",disabled:!0,children:"Loading clients..."}):0===o.length?(0,r.jsx)("option",{value:"",disabled:!0,children:"No clients found"}):o.map(e=>(0,r.jsxs)("option",{value:e.client_id,children:[e.client_name," (",e.client_id,") - ",e.document_count," doc(s)"]},e.client_id))]})]}),c&&"ready"===c.status&&(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(S.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)("span",{className:"font-semibold text-green-900",children:"Documents Available"})]}),(0,r.jsxs)("div",{className:"text-sm text-green-800 space-y-1",children:[(0,r.jsxs)("p",{children:[c.total_documents," document(s) indexed"]}),(0,r.jsxs)("p",{children:[c.total_chunks," searchable chunks"]}),c.documents.length>0&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("p",{className:"font-medium",children:"Documents:"}),(0,r.jsx)("ul",{className:"list-disc list-inside",children:c.documents.map((e,s)=>(0,r.jsx)("li",{className:"text-xs",children:e},s))})]})]})]}),c&&"not_initialized"===c.status&&(0,r.jsx)(A.bZ,{children:(0,r.jsx)(A.X,{children:"No documents have been uploaded for this client yet. Upload documents first to enable search."})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(D._,{htmlFor:"question",children:"Question"}),(0,r.jsx)(C.I,{id:"question",placeholder:"e.g., What debts does this client have?",value:t,onChange:e=>a(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),P())}})]}),(0,r.jsx)(g.z,{onClick:P,disabled:m||!e.trim()||!t.trim(),className:"w-full",children:m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Searching..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.Z,{className:"mr-2 h-4 w-4"}),"Search Documents"]})}),y&&(0,r.jsx)(A.bZ,{variant:"destructive",children:(0,r.jsx)(A.X,{children:y})})]})]}),n&&(0,r.jsxs)(k.Zb,{children:[(0,r.jsxs)(k.Ol,{children:[(0,r.jsx)(k.ll,{children:"Search Results"}),(0,r.jsxs)(k.SZ,{children:["Based on ",n.sources.length," relevant section(s) from client documents"]})]}),(0,r.jsxs)(k.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Answer"}),(0,r.jsx)("p",{className:"text-sm text-blue-800 whitespace-pre-wrap",children:n.answer})]}),n.sources.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"font-semibold text-sm",children:"Sources"}),(0,r.jsx)("div",{className:"space-y-2",children:n.sources.map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2 mb-2",children:[(0,r.jsx)(E.Z,{className:"h-4 w-4 text-gray-600 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.filename}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:["Section ",e.chunk+1]})]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-700 italic",children:['"',e.text_preview,'"']})]},s))})]})]})]}),(0,r.jsxs)(k.Zb,{className:"bg-gray-50",children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)(k.ll,{className:"text-sm",children:"How to Use"})}),(0,r.jsxs)(k.aY,{className:"text-xs space-y-2",children:[(0,r.jsx)("p",{children:"1. Enter the client ID (same ID used for document uploads)"}),(0,r.jsx)("p",{children:"2. Ask questions about the client's documents in natural language"}),(0,r.jsx)("p",{children:"3. The AI will search through all uploaded documents and provide answers with sources"}),(0,r.jsx)("p",{className:"font-semibold mt-4",children:"Example Questions:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-700",children:[(0,r.jsx)("li",{children:"What debts does this client have?"}),(0,r.jsx)("li",{children:"What is the total amount owed?"}),(0,r.jsx)("li",{children:"When is the payment deadline?"}),(0,r.jsx)("li",{children:"Who is the creditor for the largest debt?"}),(0,r.jsx)("li",{children:"What income sources are documented?"})]})]})]})]})}var T=t(7404),I=t(933),O=t(3276),U=t(4562),L=t(3459),W=t(695),G=t(7451),M=t(403),Z=t(6034),F=t(7913),B=t(834),V=t(8998),q=t(9392);let z="https://api.rmatool.org.uk/service/rag",Y=()=>{try{let e=new URL(z);if("localhost"===e.hostname||"127.0.0.1"===e.hostname){let s=window.location.hostname;if(s&&"localhost"!==s&&"127.0.0.1"!==s)return"".concat(window.location.protocol,"//").concat(s,":").concat(e.port)}return z}catch(e){return z}};function H(){let[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(null),[n,i]=(0,l.useState)(!0),[c,d]=(0,l.useState)("");(0,l.useEffect)(()=>{o()},[]);let o=async()=>{i(!0),d("");try{let t=await fetch("".concat(Y(),"/stats"));if(!t.ok)throw Error("Failed to fetch stats");let r=await t.json();a(r);let l=await fetch("".concat(Y(),"/debug/sources"));if(!l.ok)throw Error("Failed to fetch sources");let n=await l.json(),i=[];for(let s of n.sources||[])try{let t=await fetch("".concat(Y(),"/debug/documents?source=").concat(encodeURIComponent(s),"&limit=1000"));if(t.ok){var e;let r=(await t.json()).documents||[],l=r.reduce((e,s)=>{var t;return e+((null===(t=s.text)||void 0===t?void 0:t.length)||0)},0),a=(null===(e=r[0])||void 0===e?void 0:e.text)||"No text available";i.push({filename:s,chunk_count:r.length,total_characters:l,preview:a.substring(0,300)+(a.length>300?"...":"")})}}catch(e){console.error("Error loading details for ".concat(s,":"),e)}s(i)}catch(e){d(e instanceof Error?e.message:"Failed to load manuals")}finally{i(!1)}},x=e=>e.toLocaleString(),m=e=>Math.ceil(e/2e3);return n?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)(B.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading manual information..."})]}):c?(0,r.jsxs)(A.bZ,{variant:"destructive",children:[(0,r.jsx)(V.Z,{className:"h-4 w-4"}),(0,r.jsx)(A.X,{children:c})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(k.Zb,{children:(0,r.jsx)(k.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Manuals"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.length})]}),(0,r.jsx)(q.Z,{className:"h-8 w-8 text-blue-600"})]})})}),(0,r.jsx)(k.Zb,{children:(0,r.jsx)(k.aY,{className:"pt-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Chunks"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(null==t?void 0:t.total_chunks)?x(t.total_chunks):"0"})]}),(0,r.jsx)(O.Z,{className:"h-8 w-8 text-green-600"})]})})}),(0,r.jsx)(k.Zb,{children:(0,r.jsx)(k.aY,{className:"pt-6",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),(0,r.jsxs)("p",{className:"text-lg font-semibold text-green-600 flex items-center gap-2",children:[(0,r.jsx)(S.Z,{className:"h-5 w-5"}),(null==t?void 0:t.status)||"Unknown"]})]})})})})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k.ll,{children:"Ingested Manuals"}),(0,r.jsx)(k.SZ,{children:"Detailed information about each manual in the RAG system"})]}),(0,r.jsxs)(g.z,{onClick:o,variant:"outline",size:"sm",children:[(0,r.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,r.jsx)(k.aY,{children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(E.Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"No manuals have been ingested yet."}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Use the ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"/ingest-pdf"})," endpoint to add manuals."]})]}):(0,r.jsx)("div",{className:"space-y-4",children:e.map((e,s)=>(0,r.jsx)(k.Zb,{className:"bg-gray-50",children:(0,r.jsx)(k.aY,{className:"pt-6",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,r.jsx)(E.Z,{className:"h-6 w-6 text-blue-600 flex-shrink-0 mt-1"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 text-lg mb-2 break-words",children:e.filename}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Est. Pages"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:m(e.total_characters)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Characters"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:x(e.total_characters)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Chunks"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:e.chunk_count})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Avg Chunk Size"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:Math.round(e.total_characters/e.chunk_count)})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"TEXT PREVIEW (First 300 characters)"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 font-mono whitespace-pre-wrap",children:e.preview})]})]})]})})})})},s))})})]}),(0,r.jsx)(k.Zb,{className:"bg-blue-50 border-blue-200",children:(0,r.jsxs)(k.aY,{className:"pt-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"About These Statistics"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Est. Pages:"})," Estimated page count based on ~2000 characters per page"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Characters:"})," Total characters extracted from the PDF"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Chunks:"})," Number of text segments stored in the vector database"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Avg Chunk Size:"})," Average characters per chunk (target: 1000)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Text Preview:"})," First 300 characters of the extracted text to verify quality"]})]})]})})]})}function K(){let[e,s]=(0,l.useState)("getting-started-local");return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 h-[calc(100vh-16rem)] flex",children:[(0,r.jsxs)("div",{className:"w-64 border-r border-gray-200 pr-6 mr-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:"Documentation"}),(0,r.jsxs)("nav",{className:"space-y-2",children:[(0,r.jsxs)("button",{onClick:()=>s("getting-started-local"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("getting-started-local"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(T.Z,{className:"h-5 w-5"}),"Getting Started (Local)"]}),(0,r.jsxs)("button",{onClick:()=>s("getting-started-distributed"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("getting-started-distributed"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(I.Z,{className:"h-5 w-5"}),"Getting Started (Distributed)"]}),(0,r.jsxs)("button",{onClick:()=>s("manuals"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("manuals"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(O.Z,{className:"h-5 w-5"}),"Ingested Manuals"]}),(0,r.jsxs)("button",{onClick:()=>s("usage"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("usage"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(U.Z,{className:"h-5 w-5"}),"Using for Money Advice"]}),(0,r.jsxs)("button",{onClick:()=>s("ai-architecture"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("ai-architecture"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(L.Z,{className:"h-5 w-5"}),"AI & Privacy"]}),(0,r.jsxs)("button",{onClick:()=>s("system-architecture"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("system-architecture"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(I.Z,{className:"h-5 w-5"}),"System Architecture"]}),(0,r.jsxs)("button",{onClick:()=>s("deployment"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("deployment"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(W.Z,{className:"h-5 w-5"}),"Local Deployment"]}),(0,r.jsxs)("button",{onClick:()=>s("aws"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("aws"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(T.Z,{className:"h-5 w-5"}),"AWS Deployment"]}),(0,r.jsxs)("button",{onClick:()=>s("domain"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("domain"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(G.Z,{className:"h-5 w-5"}),"Domain Registration"]}),(0,r.jsxs)("button",{onClick:()=>s("api-reference"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("api-reference"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(M.Z,{className:"h-5 w-5"}),"API Reference"]}),(0,r.jsxs)("button",{onClick:()=>s("n8n-workflows"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("n8n-workflows"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(Z.Z,{className:"h-5 w-5"}),"N8N Workflows"]}),(0,r.jsxs)("button",{onClick:()=>s("troubleshooting"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("troubleshooting"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(F.Z,{className:"h-5 w-5"}),"Troubleshooting"]}),(0,r.jsxs)("button",{onClick:()=>s("worker-deployment"),className:"w-full flex items-center gap-3 px-4 py-2 rounded-md text-left transition-colors ".concat("worker-deployment"===e?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"),children:[(0,r.jsx)(W.Z,{className:"h-5 w-5"}),"Distributed Workers"]})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["getting-started-local"===e&&(0,r.jsx)(Q,{}),"getting-started-distributed"===e&&(0,r.jsx)(X,{}),"manuals"===e&&(0,r.jsx)(H,{}),"usage"===e&&(0,r.jsx)($,{}),"ai-architecture"===e&&(0,r.jsx)(J,{}),"system-architecture"===e&&(0,r.jsx)(ee,{}),"deployment"===e&&(0,r.jsx)(es,{}),"aws"===e&&(0,r.jsx)(et,{}),"domain"===e&&(0,r.jsx)(er,{}),"api-reference"===e&&(0,r.jsx)(el,{}),"n8n-workflows"===e&&(0,r.jsx)(ea,{}),"troubleshooting"===e&&(0,r.jsx)(en,{}),"worker-deployment"===e&&(0,r.jsx)(ei,{})]})]})}function $(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Using RMA Dashboard for Money Advice"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Purpose"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"This dashboard helps money advisors streamline client communication, document management, and access training materials efficiently."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"1. Notes to CoA (Course of Action)"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Purpose"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Convert technical advisor notes into clear, client-friendly language. The AI automatically structures your notes into three sections that clients can easily understand."}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"How to Use"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-4",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Enter Client Name:"}),' Type the client\'s full name (e.g., "John Smith")']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Paste Your Notes:"})," Copy your case notes from your system and paste them. These can include:",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"Debt amounts and creditors"}),(0,r.jsx)("li",{children:"Income and expenditure details"}),(0,r.jsx)("li",{children:"Recommended actions (DMP, IVA, bankruptcy, etc.)"}),(0,r.jsx)("li",{children:"Required documents"}),(0,r.jsx)("li",{children:"Next steps and deadlines"})]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Click Convert:"})," The AI processes your notes (takes 5-15 seconds)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Review Output:"})," Check the three sections:",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 space-y-1",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Matters Discussed:"})," What you talked about in simple terms"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Our Actions:"})," What you (the advisor) will do"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Your Actions:"})," What the client needs to do"]})]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Copy and Use:"}),' Click the "Copy" button to copy the full letter, then paste into your email or letter system']})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Example Workflow"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 mb-2",children:"Your Technical Notes:"}),(0,r.jsx)("pre",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200 overflow-x-auto",children:"Client: Sarah Johnson\nDebts: \xa323,400 across 5 creditors\n- MBNA CC: \xa38,200\n- Barclays loan: \xa37,500\n- Santander CC: \xa34,200\n- Catalogue debt: \xa32,100\n- Council tax arrears: \xa31,400\n\nIncome: \xa31,650/mo (Universal Credit + part-time work)\nExpenditure: \xa31,520/mo\nSurplus: \xa3130/mo\n\nRecommended DMP via StepChange\nClient agreed, will contact creditors\nNeed 3 months bank statements\nPriority: Council tax payment plan first"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"Generated Client Letter:"}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200",children:[(0,r.jsx)("p",{className:"mb-2",children:"Dear Sarah,"}),(0,r.jsx)("p",{className:"font-semibold mb-1",children:"MATTERS DISCUSSED:"}),(0,r.jsx)("p",{className:"mb-3",children:"We talked about your debts totaling \xa323,400 with five different companies. We looked at your income of \xa31,650 per month and your monthly expenses of \xa31,520, which leaves you with \xa3130 that you could use to pay towards your debts."}),(0,r.jsx)("p",{className:"font-semibold mb-1",children:"OUR ACTIONS:"}),(0,r.jsx)("p",{className:"mb-3",children:"We will help you set up a Debt Management Plan with StepChange, a charity that will work with your creditors on your behalf. We will also contact the council to arrange a payment plan for your council tax arrears, as this is a priority debt."}),(0,r.jsx)("p",{className:"font-semibold mb-1",children:"YOUR ACTIONS:"}),(0,r.jsx)("p",{className:"mb-3",children:"You need to gather your bank statements from the last three months and send them to us. These will help StepChange when they contact your creditors."})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Best Practices"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Include all relevant financial details in your notes"}),(0,r.jsx)("li",{children:"Mention specific creditors and amounts"}),(0,r.jsx)("li",{children:"Note any priority debts (council tax, rent, utilities)"}),(0,r.jsx)("li",{children:"List required documents clearly"}),(0,r.jsx)("li",{children:"Always review the output before sending to clients"}),(0,r.jsx)("li",{children:"Edit the generated text if needed for your specific case"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"2. Client QR Codes"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Purpose"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Create QR codes that clients can scan with their phones to access a secure document upload portal. This eliminates the need for clients to email sensitive documents."}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"How to Use"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-4",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Create Client ID:"})," Use a consistent format like CLIENT001, JS_2024_001, etc."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Enter Client Name:"})," Full name for your records"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Generate QR Code:"})," Click to create the code"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Download:"})," Save the QR code image"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Share with Client:"})," Include in letters, emails, or print it out"]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Client Instructions"}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"font-semibold text-green-900 mb-2",children:"Share these steps with your clients:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-green-800 text-sm",children:[(0,r.jsx)("li",{children:"Open your phone's camera app"}),(0,r.jsx)("li",{children:"Point the camera at the QR code"}),(0,r.jsx)("li",{children:"Tap the notification that appears"}),(0,r.jsx)("li",{children:"You'll see a secure upload page"}),(0,r.jsx)("li",{children:'Tap "Choose Files" and select your documents'}),(0,r.jsx)("li",{children:'Tap "Upload" when ready'})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Document Management"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Once clients upload documents:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Documents are automatically converted to searchable text"}),(0,r.jsx)("li",{children:"PDFs and images are processed using OCR"}),(0,r.jsx)("li",{children:"You can access all client documents through the authenticated portal"}),(0,r.jsx)("li",{children:"Documents are organized by client ID"}),(0,r.jsx)("li",{children:"Both original files and processed markdown are saved"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"3. Ask the Manuals"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Purpose"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Quickly find information from training manuals, policies, and procedures without manually searching through PDFs. The AI understands context and provides relevant answers with source citations."}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"How to Use"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-4",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Type Your Question:"})," Ask in natural language, as if asking a colleague"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Review Answer:"})," The AI provides information from the manuals"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Check Sources:"})," See which manuals the answer came from"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Follow Up:"})," Ask clarifying questions in the same conversation"]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Example Questions"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6 space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Income & Expenditure:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 ml-4",children:[(0,r.jsx)("li",{children:'"How do I calculate disposable income?"'}),(0,r.jsx)("li",{children:'"What are allowable expenses for a DMP?"'}),(0,r.jsx)("li",{children:'"How should I treat irregular income?"'})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Debt Solutions:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 ml-4",children:[(0,r.jsx)("li",{children:'"What\'s the difference between DMP and DRO?"'}),(0,r.jsx)("li",{children:'"When should I recommend bankruptcy?"'}),(0,r.jsx)("li",{children:'"What are the eligibility criteria for an IVA?"'})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Priority Debts:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 ml-4",children:[(0,r.jsx)("li",{children:'"How do I handle council tax arrears?"'}),(0,r.jsx)("li",{children:'"What\'s the process for rent arrears?"'}),(0,r.jsx)("li",{children:'"Priority order for multiple priority debts?"'})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:"Procedures:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 ml-4",children:[(0,r.jsx)("li",{children:'"What documents do I need for a full money advice session?"'}),(0,r.jsx)("li",{children:'"How do I refer to a specialist debt advisor?"'}),(0,r.jsx)("li",{children:'"What\'s the escalation process for vulnerable clients?"'})]})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Tips for Better Answers"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Be specific in your questions"}),(0,r.jsx)("li",{children:'Include context when relevant (e.g., "for a single parent with DLA")'}),(0,r.jsx)("li",{children:"Ask follow-up questions to drill down"}),(0,r.jsx)("li",{children:"Check the source documents if you need more detail"}),(0,r.jsx)("li",{children:"Verify critical information with your supervisor"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Data Protection & Security"}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-yellow-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Important Reminders"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 list-disc list-inside mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"All data is processed locally on your infrastructure"}),(0,r.jsx)("li",{children:"Client documents are stored securely with authentication"}),(0,r.jsx)("li",{children:"Never share login credentials"}),(0,r.jsx)("li",{children:"Follow your organization's data protection policies"}),(0,r.jsx)("li",{children:"Log out when leaving your workstation"}),(0,r.jsx)("li",{children:"Report any security concerns immediately"})]})]})]})})]})}function Q(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Getting Started - Local Deployment"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Perfect For"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Development, testing, and single-machine deployments"})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Prerequisites"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Docker & Docker Compose"}),(0,r.jsx)("li",{children:"8GB RAM minimum (16GB recommended)"}),(0,r.jsx)("li",{children:"20GB free disk space"}),(0,r.jsx)("li",{children:"(Optional) NVIDIA GPU with 8GB+ VRAM"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Quick Setup (5 Minutes)"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{className:"mb-2 text-gray-400",children:"# Navigate to project"}),(0,r.jsx)("div",{children:"cd RMA-Demo"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Start edge coordinator"}),(0,r.jsx)("div",{children:"docker compose -f edge-coordinator.yml up -d"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Verify it's running"}),(0,r.jsx)("div",{children:"docker ps"}),(0,r.jsx)("div",{children:"curl http://localhost:8080/health"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Access Points"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Coordinator:"})," http://localhost:8080"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Frontend:"})," https://rmatool.org.uk (or deploy locally)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"System Status:"})," Frontend → System tab"]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"What's Running"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"edge-coordinator"})," - FastAPI coordinator (port 8080)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"edge-tunnel"})," - Cloudflare tunnel (connects to api.rmatool.org.uk)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"edge-registrar"})," - Auto-registers coordinator with Cloudflare"]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Next Steps"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Add Workers"})," - Deploy CPU/GPU workers to process requests"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Monitor"})," - Check System tab for registered workers"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Use"})," - Upload documents, ask questions, analyze debts"]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Adding Workers Locally"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Once your coordinator is running, add workers on the same machine:"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"CPU Worker"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo/worker-containers/cpu-worker"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=http://localhost:8080"}),(0,r.jsx)("div",{children:"docker compose up -d"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"GPU Worker (if you have a GPU)"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo/worker-containers/gpu-worker"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=http://localhost:8080"}),(0,r.jsx)("div",{children:"docker compose up -d"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Verifying Everything Works"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{className:"mb-2 text-gray-400",children:"# Check coordinator health"}),(0,r.jsx)("div",{children:"curl http://localhost:8080/health"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# List registered workers"}),(0,r.jsx)("div",{children:"curl http://localhost:8080/api/admin/workers"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Check system stats"}),(0,r.jsx)("div",{children:"curl http://localhost:8080/api/admin/stats"})]}),(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-green-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Success!"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Your local RMA system is now running. Visit https://rmatool.org.uk and check the System tab to see your registered workers."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Troubleshooting"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Port 8080 already in use?"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-x-auto",children:[(0,r.jsx)("div",{children:"sudo lsof -i :8080"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# Kill the process or change port in docker-compose"})]})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Workers not appearing in System tab?"}),(0,r.jsx)("p",{className:"text-sm text-yellow-800 mb-2",children:"Check worker logs:"}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-x-auto",children:(0,r.jsx)("div",{children:"docker logs cpu-worker-1"})}),(0,r.jsx)("p",{className:"text-sm text-yellow-800 mt-2",children:"Verify coordinator URL:"}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-x-auto",children:(0,r.jsx)("div",{children:"echo $COORDINATOR_URL"})})]})]})]})}function X(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Getting Started - Distributed Deployment"}),(0,r.jsx)("div",{className:"bg-purple-50 border-l-4 border-purple-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-purple-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-purple-800",children:"Perfect For"}),(0,r.jsx)("p",{className:"text-sm text-purple-700",children:"Production deployments, multiple machines, and volunteer networks"})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Architecture Overview"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("pre",{className:"text-sm text-gray-700 overflow-x-auto",children:"Users → Frontend (Cloudflare Pages)\n     → Edge Router (Cloudflare Worker)\n     → Edge Coordinators (Your machines)\n     → Workers (Distributed compute)"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Prerequisites"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Coordinator Machine"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-4",children:[(0,r.jsx)("li",{children:"2GB RAM, 1 CPU core"}),(0,r.jsx)("li",{children:"Docker installed"}),(0,r.jsx)("li",{children:"Always-on internet connection"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Worker Machines (optional)"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"CPU Workers:"})," 4GB+ RAM, 4+ cores"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"GPU Workers:"})," NVIDIA GPU with 8GB+ VRAM"]}),(0,r.jsx)("li",{children:"Can be behind NAT/firewalls (Cloudflare Tunnels handle connectivity)"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Step 1: Deploy Edge Coordinator"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"On your coordinator machine:"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo"}),(0,r.jsx)("div",{className:"mt-2 mb-2 text-gray-400",children:"# Start with Cloudflare Tunnel"}),(0,r.jsx)("div",{children:"docker compose -f edge-coordinator.yml up -d"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Verify tunnel connection"}),(0,r.jsx)("div",{children:"docker logs edge-tunnel"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# Should see: ✅ Registered tunnel connection"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Verify coordinator registration"}),(0,r.jsx)("div",{children:"docker logs edge-registrar"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# Should see: ✅ Registered as edge coordinator"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Step 2: Deploy Workers"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Same Machine (Local)"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-4 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo/worker-containers/cpu-worker"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=http://localhost:8080"}),(0,r.jsx)("div",{children:"docker compose up -d"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Different Machine (Remote)"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-4 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo/worker-containers/cpu-worker"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=https://edge-1.rmatool.org.uk"}),(0,r.jsx)("div",{children:"docker compose up -d"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"With GPU"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo/worker-containers/gpu-worker"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=https://edge-1.rmatool.org.uk"}),(0,r.jsx)("div",{children:"docker compose up -d"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Step 3: Verify Deployment"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{className:"mb-2 text-gray-400",children:"# Check coordinator is registered globally"}),(0,r.jsx)("div",{children:"curl https://api.rmatool.org.uk/health"}),(0,r.jsx)("div",{className:"text-gray-400",children:'# Should show "coordinators": 1'}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Check workers registered locally"}),(0,r.jsx)("div",{children:"curl http://localhost:8080/api/admin/workers"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# Lists all registered workers"}),(0,r.jsx)("div",{className:"mt-4 mb-2 text-gray-400",children:"# Or use the frontend"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# https://rmatool.org.uk → System tab"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Configuration Options"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Environment Variables:"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-3 rounded font-mono text-xs overflow-x-auto space-y-1",children:[(0,r.jsx)("div",{className:"text-gray-400",children:"# Required"}),(0,r.jsx)("div",{children:"COORDINATOR_URL=https://edge-1.rmatool.org.uk"}),(0,r.jsx)("div",{className:"mt-2 text-gray-400",children:"# Optional"}),(0,r.jsxs)("div",{children:["WORKER_TYPE=cpu          ",(0,r.jsx)("span",{className:"text-gray-400",children:'# or "gpu" (auto-detected)'})]}),(0,r.jsxs)("div",{children:["USE_TUNNEL=true          ",(0,r.jsx)("span",{className:"text-gray-400",children:"# Create Cloudflare tunnel"})]}),(0,r.jsxs)("div",{children:["SERVICE_PORT=8103        ",(0,r.jsx)("span",{className:"text-gray-400",children:"# Service port number"})]}),(0,r.jsxs)("div",{children:["SERVICE_NAME=upload      ",(0,r.jsx)("span",{className:"text-gray-400",children:"# Service identifier"})]})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Network Restrictions"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"If your IT department blocks Cloudflare:"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg mb-6 font-mono text-sm overflow-x-auto",children:[(0,r.jsx)("div",{className:"mb-2 text-gray-400",children:"# Workers can connect via local network"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=http://COORDINATOR_IP:8080"}),(0,r.jsx)("div",{className:"mt-4 text-gray-400",children:"# Edge coordinator still works locally"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# External access won't work, but internal network will"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Scaling Your Deployment"}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Adding More Workers"}),(0,r.jsx)("p",{className:"text-sm text-blue-800 mb-2",children:"On any machine with Docker:"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-x-auto",children:[(0,r.jsx)("div",{children:"cd RMA-Demo/worker-containers/cpu-worker"}),(0,r.jsx)("div",{children:"export COORDINATOR_URL=https://edge-1.rmatool.org.uk"}),(0,r.jsx)("div",{children:"docker compose up -d"})]}),(0,r.jsx)("p",{className:"text-sm text-blue-700 mt-2",children:"Workers auto-register and are immediately available for work."})]}),(0,r.jsxs)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-green-900 mb-2",children:"Removing Workers"}),(0,r.jsxs)("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-x-auto",children:[(0,r.jsx)("div",{children:"docker compose down"}),(0,r.jsx)("div",{className:"text-gray-400",children:"# Worker auto-unregisters after heartbeat timeout (60s)"})]})]})]}),(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-green-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Success!"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Your distributed RMA system is now running. Visit https://rmatool.org.uk and check the System tab to see all your registered workers and their health status."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Key Benefits"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Runs on $0/month infrastructure (Cloudflare free tier)"}),(0,r.jsx)("li",{children:"Scales horizontally with volunteer workers"}),(0,r.jsx)("li",{children:"Works behind NAT/firewalls with Cloudflare Tunnels"}),(0,r.jsx)("li",{children:"Auto-registers and load-balances workers"}),(0,r.jsx)("li",{children:"Provides debt advice, document processing, RAG, NER"}),(0,r.jsx)("li",{children:"Deploys in 5 minutes locally or globally"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Common Issues"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Cloudflare Tunnel Not Connecting"}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-2 rounded font-mono text-xs overflow-x-auto mb-2",children:(0,r.jsx)("div",{children:"docker logs edge-tunnel"})}),(0,r.jsx)("p",{className:"text-sm text-yellow-800",children:"Verify DNS and check if Cloudflare is accessible. If blocked by IT, use local network mode."})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Workers Not Registering"}),(0,r.jsxs)("ol",{className:"text-sm text-yellow-800 list-decimal list-inside space-y-1",children:[(0,r.jsxs)("li",{children:["Check coordinator URL: ",(0,r.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"echo $COORDINATOR_URL"})]}),(0,r.jsxs)("li",{children:["Test connectivity: ",(0,r.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"curl $COORDINATOR_URL/health"})]}),(0,r.jsxs)("li",{children:["Check worker logs: ",(0,r.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"docker logs cpu-worker-1"})]}),(0,r.jsx)("li",{children:"Verify port 8080 is accessible from worker machine"})]})]})]})]})}function J(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"AI Architecture & Privacy"}),(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-green-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"\uD83D\uDD12 Privacy First"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"All AI processing happens locally on your infrastructure. No client data, manual content, or queries are ever sent to external servers or third-party AI services."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Hybrid Coordinator Architecture (Current)"}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-300 rounded-lg p-6 mb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDE80"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-blue-900",children:"Zero KV Usage Architecture"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Hybrid design eliminates Cloudflare KV limits while maintaining edge performance"})]})]})}),(0,r.jsx)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 mb-8",children:(0,r.jsxs)("div",{className:"font-mono text-sm",children:[(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsx)("div",{className:"inline-block bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg shadow-lg",children:(0,r.jsx)("div",{className:"font-bold text-lg",children:"\uD83C\uDF10 Users / Browsers"})})}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"text-gray-400 text-2xl",children:"↓"})}),(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsxs)("div",{className:"inline-block bg-blue-50 border-2 border-blue-300 px-6 py-4 rounded-lg",children:[(0,r.jsx)("div",{className:"font-bold text-blue-900 mb-1",children:"Frontend (Next.js)"}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:"https://rmatool.org.uk"}),(0,r.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Cloudflare Pages (300+ Global Edge Locations)"})]})}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"text-gray-400 text-2xl",children:"↓"})}),(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsxs)("div",{className:"inline-block bg-purple-50 border-2 border-purple-300 px-6 py-4 rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"font-bold text-purple-900 mb-1",children:"\uD83C\uDF0D Edge Proxy"}),(0,r.jsx)("div",{className:"text-sm text-purple-700",children:"https://api.rmatool.org.uk"}),(0,r.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:"Cloudflare Worker (Stateless - NO KV!)"}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 bg-white rounded p-2",children:[(0,r.jsx)("strong",{className:"text-purple-800",children:"Role:"}),(0,r.jsx)("br",{}),"• CORS & Authentication",(0,r.jsx)("br",{}),"• Cache worker list (5-min TTL)",(0,r.jsx)("br",{}),"• Smart routing to workers",(0,r.jsx)("br",{}),"• DDoS protection",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{className:"text-green-700 mt-1 block",children:"✅ Zero KV operations"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6 max-w-3xl mx-auto mb-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-2xl mb-2",children:"↓"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"User requests"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-2xl mb-2",children:"↓"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Worker updates"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6 max-w-3xl mx-auto mb-6",children:[(0,r.jsxs)("div",{className:"bg-indigo-50 border-2 border-indigo-300 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"font-bold text-indigo-900 mb-2 text-center",children:"⚡ Direct Proxy"}),(0,r.jsxs)("div",{className:"text-xs text-indigo-700 bg-white rounded p-2",children:["Edge worker uses cached",(0,r.jsx)("br",{}),"worker list to route directly",(0,r.jsx)("br",{}),"to service endpoints",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{className:"text-green-700 mt-1 block",children:"No coordinator call needed"})]})]}),(0,r.jsxs)("div",{className:"bg-orange-50 border-2 border-orange-300 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"font-bold text-orange-900 mb-2 text-center",children:"\uD83C\uDFE0 Local Coordinator"}),(0,r.jsxs)("div",{className:"text-xs text-orange-700 bg-white rounded p-2",children:["Self-hosted Python service",(0,r.jsx)("br",{}),"In-memory worker registry",(0,r.jsx)("br",{}),"Unlimited heartbeats",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{className:"text-green-700 mt-1 block",children:"$0 cost - No KV limits!"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"text-gray-400 text-2xl",children:"↓"})}),(0,r.jsx)("div",{className:"text-center mb-2 text-gray-600 text-sm font-semibold",children:"Distributed Worker Pool:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-5xl mx-auto mt-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-300 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-green-900 mb-2 flex items-center gap-2",children:["\uD83D\uDCBB ",(0,r.jsx)("span",{children:"CPU Workers"})]}),(0,r.jsxs)("div",{className:"text-xs text-green-700 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Upload Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8103"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Notes Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8100"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"NER Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8108"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 pt-2 border-t",children:[(0,r.jsx)("strong",{children:"Tier 2:"})," CPU-intensive tasks",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Requirements:"})," 4+ cores, 8GB RAM",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Connection:"})," Cloudflare Tunnel"]})]}),(0,r.jsxs)("div",{className:"bg-orange-50 border-2 border-orange-300 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-orange-900 mb-2 flex items-center gap-2",children:["\uD83D\uDE80 ",(0,r.jsx)("span",{children:"GPU Workers"})]}),(0,r.jsxs)("div",{className:"text-xs text-orange-700 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"RAG Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8102"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Vision AI (LLaVA)"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8104"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Text AI (Llama)"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8105"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 pt-2 border-t",children:[(0,r.jsx)("strong",{children:"Tier 1:"})," AI model inference",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Requirements:"})," GPU, 8GB+ VRAM",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Connection:"})," Cloudflare Tunnel"]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-300 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:["\uD83D\uDCBE ",(0,r.jsx)("span",{children:"Storage Workers"})]}),(0,r.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"ChromaDB"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8000"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Redis Cache"}),(0,r.jsx)("span",{className:"text-gray-500",children:":6379"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"MinIO (S3)"}),(0,r.jsx)("span",{className:"text-gray-500",children:":9000"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 pt-2 border-t",children:[(0,r.jsx)("strong",{children:"Tier 3:"})," Data persistence",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Requirements:"})," SSD, network",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Connection:"})," Cloudflare Tunnel"]})]})]}),(0,r.jsx)("div",{className:"mt-6 p-4 bg-gradient-to-r from-gray-50 to-gray-100 border-2 border-gray-300 rounded-lg",children:(0,r.jsxs)("div",{className:"text-sm text-gray-800",children:[(0,r.jsx)("strong",{className:"text-gray-900 text-lg mb-2 block",children:"\uD83D\uDD04 How Hybrid Architecture Works:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[(0,r.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,r.jsx)("p",{className:"font-semibold text-indigo-900 mb-1",children:"Service Requests (Fast Path):"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-xs space-y-1",children:[(0,r.jsx)("li",{children:"Edge worker checks in-memory cache"}),(0,r.jsx)("li",{children:"Selects best worker based on load"}),(0,r.jsx)("li",{children:"Proxies directly to worker service"}),(0,r.jsx)("li",{children:"Returns response to user"})]}),(0,r.jsx)("p",{className:"text-xs text-green-700 mt-2 font-semibold",children:"⚡ No coordinator call needed!"})]}),(0,r.jsxs)("div",{className:"bg-white p-3 rounded border border-gray-200",children:[(0,r.jsx)("p",{className:"font-semibold text-orange-900 mb-1",children:"Worker Updates (Background):"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-xs space-y-1",children:[(0,r.jsx)("li",{children:"Workers send heartbeat to local coordinator"}),(0,r.jsx)("li",{children:"Coordinator updates in-memory registry"}),(0,r.jsx)("li",{children:"Edge refreshes cache every 5 minutes"}),(0,r.jsx)("li",{children:"No KV storage used anywhere"})]}),(0,r.jsx)("p",{className:"text-xs text-green-700 mt-2 font-semibold",children:"✅ Unlimited heartbeats!"})]})]})]})}),(0,r.jsx)("div",{className:"mt-4 p-4 bg-green-50 border-2 border-green-400 rounded-lg",children:(0,r.jsxs)("div",{className:"text-xs text-gray-900",children:[(0,r.jsx)("strong",{className:"text-lg text-green-900 block mb-2",children:"\uD83D\uDCB0 Cost Breakdown:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-green-800",children:"Cloudflare (Edge):"}),(0,r.jsx)("p",{className:"text-green-700",children:"• Frontend: FREE (Pages)"}),(0,r.jsx)("p",{className:"text-green-700",children:"• Edge Proxy: FREE (100k req/day)"}),(0,r.jsx)("p",{className:"text-green-700",children:"• KV Storage: NOT USED ✅"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-green-800",children:"Self-Hosted:"}),(0,r.jsx)("p",{className:"text-green-700",children:"• Coordinator: $0 (reuse server)"}),(0,r.jsx)("p",{className:"text-green-700",children:"• Workers: Your hardware"}),(0,r.jsx)("p",{className:"text-green-700",children:"• Storage: Local disk"})]})]}),(0,r.jsx)("p",{className:"mt-3 text-green-800 font-bold text-center",children:"\uD83C\uDF89 Total Monthly Cost: $0 | Scaling Limit: Unlimited Workers"})]})}),(0,r.jsx)("div",{className:"mt-6 p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-400 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDE80"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-green-900 mb-2",children:"Want to Help? Run a Universal Worker!"}),(0,r.jsx)("p",{className:"text-sm text-green-800 mb-3",children:"Our distributed architecture relies on donated compute resources. You can contribute by running a universal worker container that auto-detects your hardware!"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 mb-2",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"\uD83E\uDD16 Auto-Detection (Recommended):"}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-2 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-worker --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0--gpus all -e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=auto \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-2",children:["✨ Auto-detects GPU → assigns AI workloads (vLLM, vision models)",(0,r.jsx)("br",{}),"✨ No GPU → assigns CPU workloads (RAG, NER, document processing)",(0,r.jsx)("br",{}),"✨ Auto-creates Cloudflare Tunnel for NAT traversal"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"\uD83D\uDCBE Storage Worker (for data services):"}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-2 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-storage --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0-e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=storage \\",(0,r.jsx)("br",{}),"\xa0\xa0-v ./chroma-data:/chroma/chroma \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"\uD83D\uDCA1 Coordinator assigns ChromaDB, Redis, or PostgreSQL based on system needs"})]}),(0,r.jsxs)("p",{className:"text-xs text-green-700 mt-3",children:["✅ DHT-based P2P service discovery - 99.95% reduction in coordinator load",(0,r.jsx)("br",{}),"✅ Automatic Cloudflare Tunnels - works behind firewalls",(0,r.jsx)("br",{}),"✅ Auto-registers with edge router at api.rmatool.org.uk",(0,r.jsx)("br",{}),"✅ Load balanced automatically via DHT ring",(0,r.jsx)("br",{}),"✅ Supports 2000+ heterogeneous workers on donated compute"]})]})]})})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"How Our AI Services Work"}),(0,r.jsx)("p",{className:"text-gray-700 mb-6",children:"RMA Dashboard uses three main AI services to help money advisors work more efficiently while maintaining complete data privacy. All services run locally on your server using open-source models."}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"1. Notes to CoA Service"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"What it does:"}),(0,r.jsx)("p",{className:"text-gray-700 mb-3",children:"Converts your technical advisor notes into clear, client-friendly letters with three structured sections:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 space-y-1 mb-3",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Matters Discussed:"})," Plain English summary of the consultation"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Our Actions:"})," What you (the advisor) will do next"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Your Actions:"})," What the client needs to do"]})]}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"How it works:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-gray-700 space-y-2 text-sm",children:[(0,r.jsx)("li",{children:"You paste your technical case notes into the system"}),(0,r.jsx)("li",{children:"The AI model (Llama 3.2) reads and understands the content"}),(0,r.jsx)("li",{children:"It restructures the information following Money Advice best practices"}),(0,r.jsx)("li",{children:"Generates clear, empathetic language suitable for clients"}),(0,r.jsx)("li",{children:"Returns the formatted letter in ~10-15 seconds"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mt-3",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"\uD83D\uDD12 Privacy:"}),(0,r.jsx)("p",{className:"text-xs text-blue-800",children:"Your notes never leave your server. Processing happens entirely on your local infrastructure."})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2. Document Processing Service"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"What it does:"}),(0,r.jsx)("p",{className:"text-gray-700 mb-3",children:'Converts client-uploaded documents (PDFs, images) into searchable text and analyzes them for risk assessment ("Should I worry about this?" button).'}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"How it works:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-gray-700 space-y-2 text-sm",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Text Extraction:"})," Uses OCR (Tesseract) to read scanned documents"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Vision Analysis:"}),' LLaVA model (13B parameters) "sees" and understands document layouts']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Content Understanding:"})," Identifies debt letters, court notices, payment demands, etc."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Risk Assessment:"})," Evaluates urgency and priority (court dates, eviction notices, etc.)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Markdown Conversion:"})," Saves structured, searchable version of each document"]})]}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"Vision AI Capability:"}),(0,r.jsx)("p",{className:"text-gray-700 text-sm mb-2",children:"The LLaVA model doesn't just read text—it understands visual context:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 text-sm space-y-1",children:[(0,r.jsx)("li",{children:"Recognizes logos of creditors and official bodies"}),(0,r.jsx)("li",{children:"Understands tables, forms, and structured layouts"}),(0,r.jsx)("li",{children:"Identifies highlighted or bolded urgent sections"}),(0,r.jsx)("li",{children:"Interprets signatures, stamps, and official marks"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mt-3",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"\uD83D\uDD12 Privacy:"}),(0,r.jsx)("p",{className:"text-xs text-blue-800",children:"Client documents are processed locally. Images and PDFs stay on your server and are never sent to external OCR or vision AI services."})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:'3. RAG Service - "Ask the Manuals"'}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"What it does:"}),(0,r.jsx)("p",{className:"text-gray-700 mb-3",children:"Lets you query your training manuals, policies, and procedures in natural language. The AI retrieves relevant information and provides answers with source citations."}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"How it works (RAG explained):"}),(0,r.jsxs)("p",{className:"text-gray-700 text-sm mb-3",children:["RAG stands for ",(0,r.jsx)("strong",{children:"Retrieval-Augmented Generation"}),". It's a two-step process:"]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-300 rounded p-3 mb-3",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 text-sm mb-2",children:"Step 1: Document Ingestion (happens at startup)"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-gray-700 text-xs space-y-1",children:[(0,r.jsxs)("li",{children:["All PDF manuals in the ",(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"/manuals"})," directory are automatically processed"]}),(0,r.jsx)("li",{children:"Text is extracted from each PDF (using PyPDF2 or OCR for scanned documents)"}),(0,r.jsx)("li",{children:"Long documents are split into ~1000 character chunks with 200 character overlap"}),(0,r.jsx)("li",{children:'Each chunk is converted into a mathematical "embedding" (a list of numbers representing meaning)'}),(0,r.jsx)("li",{children:"Embeddings are stored in ChromaDB vector database for fast similarity search"})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-300 rounded p-3 mb-3",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 text-sm mb-2",children:"Step 2: Query Processing (when you ask a question)"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-gray-700 text-xs space-y-1",children:[(0,r.jsx)("li",{children:"Your question is converted into an embedding using the same model (nomic-embed-text)"}),(0,r.jsx)("li",{children:"The system searches the vector database for chunks with similar meanings (not just keyword matching)"}),(0,r.jsx)("li",{children:"Top 4 most relevant chunks are retrieved from different manuals"}),(0,r.jsx)("li",{children:'These chunks are provided as "context" to the Llama 3.2 language model'}),(0,r.jsx)("li",{children:"Llama reads the context and generates an answer to your specific question"}),(0,r.jsx)("li",{children:"Response includes source citations showing which manuals were used"})]})]}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2 mt-4",children:"Why this is better than keyword search:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 text-sm space-y-1 mb-3",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Semantic Understanding:"})," Finds information based on meaning, not just matching words"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Context Aware:"})," Understands questions phrased in different ways"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Synthesizes Information:"})," Combines relevant sections from multiple manuals"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"No Hallucination:"})," Only uses information from your actual manuals"]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mt-3",children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-blue-900 mb-1",children:"\uD83D\uDD12 Privacy:"}),(0,r.jsx)("p",{className:"text-xs text-blue-800",children:"Your training manuals are processed and stored locally in ChromaDB. Questions and answers never leave your infrastructure. The embedding model runs on your server."})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"AI Models Used"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Model"}),(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Size"}),(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Used For"}),(0,r.jsx)("th",{className:"text-left py-2",children:"License"})]})}),(0,r.jsxs)("tbody",{className:"text-gray-700",children:[(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 pr-4 font-semibold",children:"Llama 3.2"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:"3.8GB"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:"Text generation (Notes, RAG answers)"}),(0,r.jsx)("td",{className:"py-2",children:"Open (Meta)"})]}),(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 pr-4 font-semibold",children:"LLaVA 13B"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:"7.4GB"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:"Vision + Text (Document understanding)"}),(0,r.jsx)("td",{className:"py-2",children:"Open (UW/MBZUAI)"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 pr-4 font-semibold",children:"nomic-embed-text"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:"274MB"}),(0,r.jsx)("td",{className:"py-2 pr-4",children:"Creating embeddings for RAG search"}),(0,r.jsx)("td",{className:"py-2",children:"Open (Nomic AI)"})]})]})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-3",children:"All models are fully open-source and run via Ollama, a local AI runtime. Total storage required: ~12GB for all models."})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"How to Ask Good Questions"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:'Best Practices for "Ask the Manuals"'}),(0,r.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"✅ DO: Ask Specific, Clear Questions"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-700 font-semibold mb-1",children:'✓ Good: "What are the income requirements for a DRO?"'}),(0,r.jsx)("p",{className:"text-gray-700",children:"Clear, specific, and likely answered in manuals"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-700 font-semibold mb-1",children:'✓ Good: "How do I handle rent arrears for a tenant with Universal Credit?"'}),(0,r.jsx)("p",{className:"text-gray-700",children:"Specific scenario with clear context"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-700 font-semibold mb-1",children:'✓ Good: "What documents do I need to complete a full income and expenditure assessment?"'}),(0,r.jsx)("p",{className:"text-gray-700",children:"Procedural question about your processes"})]})]})]}),(0,r.jsxs)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-red-900 mb-2",children:"❌ DON'T: Ask Vague or Out-of-Scope Questions"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-red-700 font-semibold mb-1",children:'✗ Poor: "Tell me about debt"'}),(0,r.jsx)("p",{className:"text-gray-700",children:"Too vague—will return generic information"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-red-700 font-semibold mb-1",children:'✗ Poor: "What\'s the weather like today?"'}),(0,r.jsx)("p",{className:"text-gray-700",children:"Not related to your manuals—AI will correctly say it doesn't know"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-red-700 font-semibold mb-1",children:'✗ Poor: "Should I recommend bankruptcy for client John?"'}),(0,r.jsx)("p",{className:"text-gray-700",children:"AI can't make client-specific decisions—ask about criteria instead"})]})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"What the AI CAN Answer"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Procedures & Policies:"}),' "What\'s the process for referring to specialist debt advice?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Eligibility Criteria:"}),' "What are the requirements for an IVA?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Definitions:"}),' "What\'s the difference between priority and non-priority debts?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Documentation:"}),' "What evidence do I need for a DRO application?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Time Limits:"}),' "How long do creditors have to pursue a debt?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Calculations:"}),' "How is disposable income calculated for a DMP?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Legal Requirements:"}),' "What are the FCA rules for debt advice?"']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Best Practices:"}),' "How should I handle a vulnerable client with mental health issues?"']})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"What the AI CANNOT Answer"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Real-Time Information:"})," Current interest rates, today's news, or live data"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Client-Specific Advice:"})," Decisions about individual client cases"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Information Not in Manuals:"})," External policies, other organizations' procedures"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Predictions:"}),' "What will happen if..." scenarios not covered in manuals']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Personal Opinions:"})," Subjective judgments or recommendations"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"External Contacts:"})," Phone numbers, websites not documented in manuals"]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Tips for Better Results"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 text-sm",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Include Context:"}),' "For a single parent with two children..." helps narrow results']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Use Specific Terms:"})," Use correct terminology from manuals (DRO, IVA, DMP, etc.)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Ask Follow-Up Questions:"})," If first answer isn't quite right, refine your question"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Check Source Citations:"})," Always verify which manual the answer came from"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Use the Debug Tab:"})," View extracted text to ensure manuals were ingested correctly"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Combine with Manual Reading:"})," Use AI for quick lookups, but read full sections for complex cases"]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Understanding AI Limitations"}),(0,r.jsx)("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-orange-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-orange-800",children:"Important: AI is a Tool, Not a Replacement"}),(0,r.jsx)("p",{className:"text-sm text-orange-700 mb-2",children:"The AI services are designed to assist money advisors, not replace professional judgment."}),(0,r.jsxs)("ul",{className:"text-sm text-orange-700 list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:"Always review AI-generated letters before sending to clients"}),(0,r.jsx)("li",{children:"Verify critical information (dates, amounts, procedures) independently"}),(0,r.jsx)("li",{children:"Use your professional expertise for complex or sensitive cases"}),(0,r.jsx)("li",{children:"Consult supervisors when in doubt—don't rely solely on AI responses"}),(0,r.jsx)("li",{children:"The AI doesn't know your client personally—you do"})]})]})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:'Why "Hallucinations" Are Rare (But Check Anyway)'}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:'Unlike ChatGPT or other AI chatbots, the RAG system is designed to minimize "hallucinations" (making up information):'}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 text-sm mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Grounded in Your Manuals:"})," Only uses actual text from ingested documents"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Source Citations:"})," Every answer shows which manuals were referenced"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Context Awareness:"})," If relevant info isn't found, AI says \"I don't know\""]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"No External Training:"})," Not mixing your procedures with internet knowledge"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Debug Visibility:"})," You can view extracted text to verify accuracy"]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Data Privacy & GDPR Compliance"}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 mb-3",children:"Why Local Hosting Matters"}),(0,r.jsx)("p",{className:"text-green-800 text-sm mb-3",children:"Running AI models locally (instead of using cloud services like OpenAI, Anthropic, or Google) provides critical advantages for money advice:"}),(0,r.jsxs)("ul",{className:"text-green-800 text-sm list-disc list-inside space-y-2",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"GDPR Compliance:"})," Client data stays within your organization's infrastructure—no third-party processing"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"No Data Leakage:"})," Sensitive financial information never sent over the internet to AI providers"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"No Training on Your Data:"})," External AI services learn from queries—yours doesn't"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Complete Control:"})," You control model updates, retention policies, and access logs"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Cost Predictable:"})," No per-API-call charges or surprise bills for high usage"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"No Internet Required:"})," Works even if external services are down or blocked"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"What Stays Local"}),(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("th",{className:"text-left py-2 pr-4",children:"Data Type"}),(0,r.jsx)("th",{className:"text-left py-2",children:"Storage Location"})]})}),(0,r.jsxs)("tbody",{className:"text-gray-700",children:[(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 pr-4",children:"Client notes"}),(0,r.jsx)("td",{className:"py-2",children:"Processed in-memory, not permanently stored"})]}),(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 pr-4",children:"Uploaded documents"}),(0,r.jsxs)("td",{className:"py-2",children:["Your server's ",(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"/data/uploads"})," directory"]})]}),(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 pr-4",children:"Training manuals"}),(0,r.jsx)("td",{className:"py-2",children:"ChromaDB vector database (local volume)"})]}),(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 pr-4",children:"AI models"}),(0,r.jsx)("td",{className:"py-2",children:"Ollama volume (12GB total)"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2 pr-4",children:"Query history"}),(0,r.jsx)("td",{className:"py-2",children:"Not stored (unless you enable logging)"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"\uD83D\uDCA1 Best Practice"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Even though the system is designed for privacy, follow your organization's data protection policies. Don't include unnecessary personal details in notes or queries. Use client IDs instead of names where possible. Regularly backup data and maintain access logs for compliance."})]})]})}function ee(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"System Architecture & Deployment"}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(I.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Distributed Architecture Overview"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"RMA Dashboard uses a hybrid edge + self-hosted architecture that eliminates cloud costs while maintaining global edge performance. Workers can be deployed anywhere with donated compute resources."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Hybrid Coordinator Architecture"}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-6 mb-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDE80"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-green-900",children:"Zero KV Usage, Unlimited Scaling"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Edge proxy + local coordinator eliminates Cloudflare KV limits"})]})]})}),(0,r.jsx)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 mb-8",children:(0,r.jsxs)("div",{className:"font-mono text-sm",children:[(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsx)("div",{className:"inline-block bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg shadow-lg",children:(0,r.jsx)("div",{className:"font-bold text-lg",children:"\uD83C\uDF10 Users / Browsers"})})}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"text-gray-400 text-2xl",children:"↓"})}),(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsxs)("div",{className:"inline-block bg-blue-50 border-2 border-blue-300 px-6 py-4 rounded-lg",children:[(0,r.jsx)("div",{className:"font-bold text-blue-900 mb-1",children:"Frontend (Next.js)"}),(0,r.jsx)("div",{className:"text-sm text-blue-700",children:"https://rmatool.org.uk"}),(0,r.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Cloudflare Pages (300+ Global Edge Locations)"})]})}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"text-gray-400 text-2xl",children:"↓"})}),(0,r.jsx)("div",{className:"text-center mb-6",children:(0,r.jsxs)("div",{className:"inline-block bg-purple-50 border-2 border-purple-300 px-6 py-4 rounded-lg shadow-md",children:[(0,r.jsx)("div",{className:"font-bold text-purple-900 mb-1",children:"\uD83C\uDF0D Edge Proxy"}),(0,r.jsx)("div",{className:"text-sm text-purple-700",children:"https://api.rmatool.org.uk"}),(0,r.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:"Cloudflare Worker (Stateless - NO KV!)"}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 bg-white rounded p-2",children:[(0,r.jsx)("strong",{className:"text-purple-800",children:"Role:"}),(0,r.jsx)("br",{}),"• CORS & Authentication",(0,r.jsx)("br",{}),"• Cache worker list (5-min TTL)",(0,r.jsx)("br",{}),"• Smart routing to workers",(0,r.jsx)("br",{}),"• DDoS protection",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{className:"text-green-700 mt-1 block",children:"✅ Zero KV operations"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6 max-w-3xl mx-auto mb-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-2xl mb-2",children:"↓"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"User requests"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-gray-400 text-2xl mb-2",children:"↓"}),(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Worker updates"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-6 max-w-3xl mx-auto mb-6",children:[(0,r.jsxs)("div",{className:"bg-indigo-50 border-2 border-indigo-300 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"font-bold text-indigo-900 mb-2 text-center",children:"⚡ Direct Proxy"}),(0,r.jsxs)("div",{className:"text-xs text-indigo-700 bg-white rounded p-2",children:["Edge worker uses cached",(0,r.jsx)("br",{}),"worker list to route directly",(0,r.jsx)("br",{}),"to service endpoints",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{className:"text-green-700 mt-1 block",children:"No coordinator call needed"})]})]}),(0,r.jsxs)("div",{className:"bg-orange-50 border-2 border-orange-300 p-4 rounded-lg",children:[(0,r.jsx)("div",{className:"font-bold text-orange-900 mb-2 text-center",children:"\uD83C\uDFE0 Local Coordinator"}),(0,r.jsxs)("div",{className:"text-xs text-orange-700 bg-white rounded p-2",children:["Self-hosted Python service",(0,r.jsx)("br",{}),"In-memory worker registry",(0,r.jsx)("br",{}),"Unlimited heartbeats",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{className:"text-green-700 mt-1 block",children:"$0 cost - No KV limits!"})]})]})]}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:(0,r.jsx)("div",{className:"text-gray-400 text-2xl",children:"↓"})}),(0,r.jsx)("div",{className:"text-center mb-2 text-gray-600 text-sm font-semibold",children:"Distributed Worker Pool:"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-5xl mx-auto mt-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-300 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-green-900 mb-2 flex items-center gap-2",children:["\uD83D\uDCBB ",(0,r.jsx)("span",{children:"CPU Workers"})]}),(0,r.jsxs)("div",{className:"text-xs text-green-700 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Upload Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8103"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Notes Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8100"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"NER Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8108"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 pt-2 border-t",children:[(0,r.jsx)("strong",{children:"Tier 2:"})," CPU-intensive tasks",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Requirements:"})," 4+ cores, 8GB RAM"]})]}),(0,r.jsxs)("div",{className:"bg-orange-50 border-2 border-orange-300 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-orange-900 mb-2 flex items-center gap-2",children:["\uD83D\uDE80 ",(0,r.jsx)("span",{children:"GPU Workers"})]}),(0,r.jsxs)("div",{className:"text-xs text-orange-700 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"RAG Service"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8102"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Vision AI (LLaVA)"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8104"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Text AI (Llama)"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8105"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 pt-2 border-t",children:[(0,r.jsx)("strong",{children:"Tier 1:"})," AI model inference",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Requirements:"})," GPU, 8GB+ VRAM"]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-300 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"font-bold text-blue-900 mb-2 flex items-center gap-2",children:["\uD83D\uDCBE ",(0,r.jsx)("span",{children:"Storage Workers"})]}),(0,r.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"ChromaDB"}),(0,r.jsx)("span",{className:"text-gray-500",children:":8000"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"Redis Cache"}),(0,r.jsx)("span",{className:"text-gray-500",children:":6379"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white p-2 rounded",children:[(0,r.jsx)("span",{children:"MinIO (S3)"}),(0,r.jsx)("span",{className:"text-gray-500",children:":9000"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-2 pt-2 border-t",children:[(0,r.jsx)("strong",{children:"Tier 3:"})," Data persistence",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Requirements:"})," SSD, network"]})]})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Minimum Viable Product (MVP)"}),(0,r.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:"Get Started in ~30 Minutes"}),(0,r.jsx)("p",{className:"text-sm text-blue-800 mb-4",children:"The smallest deployment that provides core functionality. Perfect for testing or personal use."}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Critical Services (Required):"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Local Coordinator"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Worker registry • In-memory storage • 50MB RAM"}),(0,r.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:"docker run -d -p 8080:8080 ghcr.io/st7ma784/cmacatalyst/coordinator"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Frontend"}),(0,r.jsx)("p",{className:"text-gray-700",children:"User interface • Deployed to Cloudflare Pages • Free"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Edge Proxy"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Cloudflare Worker • Routing & caching • Free tier"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"At least 1 Universal Worker"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Auto-detects hardware • Coordinator assigns services"}),(0,r.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:"docker run -d --gpus all -e WORKER_TYPE=auto ghcr.io/st7ma784/cmacatalyst/universal-worker"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Recommended Additions:"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-blue-600 font-bold",children:"+"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Storage Worker (ChromaDB)"}),(0,r.jsx)("p",{className:"text-gray-700",children:'Enables RAG "Ask the Manuals" functionality'})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-blue-600 font-bold",children:"+"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Cloudflare Tunnel"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Exposes workers to the internet securely (no port forwarding)"})]})]})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-green-100 border border-green-300 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-green-900",children:[(0,r.jsx)("strong",{children:"\uD83D\uDCB0 Total MVP Cost:"})," $0/month • ",(0,r.jsx)("strong",{children:"⏱️ Setup Time:"})," ~30 minutes • ",(0,r.jsx)("strong",{children:"\uD83D\uDCCA Resources:"})," 1 server/machine"]})})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Stable Production Deployment"}),(0,r.jsxs)("div",{className:"bg-green-50 border-2 border-green-300 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-green-900 mb-3",children:"High Availability & Redundancy"}),(0,r.jsx)("p",{className:"text-sm text-green-800 mb-4",children:"Recommended setup for production use with multiple advisors, redundancy, and monitoring."}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Core Infrastructure:"}),(0,r.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Local Coordinator with Monitoring"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Health checks • Prometheus metrics • Grafana dashboards"}),(0,r.jsx)("div",{className:"mt-1 text-xs text-gray-600",children:"Deploy with docker-compose for integrated monitoring stack"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"2+ GPU Workers (Specialized)"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Coordinator assigns different services • Load balanced automatically"}),(0,r.jsxs)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:["# Worker 1: Gets llm-inference + vision-ocr",(0,r.jsx)("br",{}),"docker run -d --gpus all -e WORKER_TYPE=gpu universal-worker",(0,r.jsx)("br",{}),"# Worker 2: Gets rag-embeddings (specialized)",(0,r.jsx)("br",{}),"docker run -d --gpus all -e WORKER_TYPE=gpu universal-worker"]})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"1+ CPU Workers (Fallback)"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Handles non-GPU tasks • Provides redundancy if GPUs overloaded"}),(0,r.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:"docker run -d -e WORKER_TYPE=cpu ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Storage Worker with Persistence"}),(0,r.jsx)("p",{className:"text-gray-700",children:"ChromaDB + Redis • Volume-mounted data • Regular backups"}),(0,r.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded block mt-1",children:"docker run -d -v ./chroma:/chroma/chroma -e WORKER_TYPE=storage universal-worker"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Networking & Security:"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Cloudflare Tunnel"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Zero-trust access • Auto TLS • No exposed ports"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-gray-600 font-bold",children:"OR"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Reverse Proxy (nginx/Traefik)"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Self-managed SSL with Let's Encrypt • CORS configuration"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Observability Stack:"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Prometheus"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Scrapes /metrics from coordinator • Stores time-series data"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Grafana"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Visualizes worker status, load, uptime • Pre-built dashboards"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Health Check Monitoring"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Coordinator /health endpoint • Worker heartbeat tracking"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Backup & Recovery:"}),(0,r.jsxs)("ul",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"ChromaDB Volume Backups"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Daily snapshots of vector database • Enables quick recovery"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Configuration as Code"}),(0,r.jsx)("p",{className:"text-gray-700",children:"docker-compose.yml in git • Easy redeployment"})]})]}),(0,r.jsxs)("li",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-blue-600 font-bold",children:"○"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900",children:"Coordinator State (Optional)"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Can add SQLite persistence if needed (current: in-memory only)"})]})]})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-green-100 border border-green-300 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-green-900",children:[(0,r.jsx)("strong",{children:"\uD83D\uDCB0 Total Production Cost:"})," $0/month (self-hosted) • ",(0,r.jsx)("strong",{children:"\uD83D\uDCC8 Scalability:"})," Unlimited workers • ",(0,r.jsx)("strong",{children:"\uD83D\uDD12 Availability:"})," High (redundant workers)"]})})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Worker Deployment Commands"}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-300 rounded-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDE80"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-purple-900 mb-2",children:"Want to Help? Run a Worker!"}),(0,r.jsx)("p",{className:"text-sm text-purple-800 mb-3",children:"Our distributed architecture relies on donated compute resources. You can contribute by running a worker container on your machine - it takes just 2 commands!"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-300 rounded-lg p-4 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83E\uDD16"}),(0,r.jsx)("h4",{className:"text-sm font-semibold text-indigo-900",children:"Auto-Detection (Recommended)"}),(0,r.jsx)("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded",children:"Let the worker decide!"})]}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-3 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-worker --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0--gpus all \\",(0,r.jsx)("br",{}),"\xa0\xa0-e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=auto \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]}),(0,r.jsx)("p",{className:"text-xs text-indigo-900 mt-2",children:"✨ Worker auto-detects: GPU → Edge → Storage → CPU and registers with appropriate tier"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-green-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCBB"}),(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"CPU Worker"}),(0,r.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"4+ cores recommended"})]}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-3 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-cpu-worker --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0-e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=cpu \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-orange-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDE80"}),(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"GPU Worker"}),(0,r.jsx)("span",{className:"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded",children:"NVIDIA GPU, 8GB+ VRAM"})]}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-3 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-gpu-worker --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0--gpus all -e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=gpu \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"\uD83D\uDCA1 Tip: Use WORKER_TYPE=auto to let the worker auto-detect GPU capability"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCBE"}),(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"Storage Worker"}),(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"SSD recommended"})]}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-3 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-storage-worker --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0-e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=storage \\",(0,r.jsx)("br",{}),"\xa0\xa0-v ./chroma-data:/chroma/chroma \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"\uD83D\uDCA1 Coordinator assigns ChromaDB, Redis, or PostgreSQL based on gaps"})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-300 rounded",children:(0,r.jsxs)("p",{className:"text-xs text-green-900 space-y-1",children:[(0,r.jsx)("strong",{className:"block mb-2",children:"✅ Worker Features:"}),"• Workers automatically create secure Cloudflare Tunnels",(0,r.jsx)("br",{}),"• Works behind firewalls - no port forwarding needed",(0,r.jsx)("br",{}),"• Auto-registers with coordinator at api.rmatool.org.uk",(0,r.jsx)("br",{}),"• Load balanced automatically - multiple GPUs = parallel processing",(0,r.jsx)("br",{}),"• Heartbeat every 30s keeps coordinator updated on availability"]})})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Architecture Benefits"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"\uD83D\uDCB0 Cost Efficiency"}),(0,r.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Zero Cloudflare KV usage (no $5/mo charges)"}),(0,r.jsx)("li",{children:"• Free edge proxy (100k requests/day)"}),(0,r.jsx)("li",{children:"• Reuse existing hardware for coordinator"}),(0,r.jsx)("li",{children:"• No per-worker fees or scaling limits"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-300 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"⚡ Performance"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Edge caching (5-min TTL) for fast routing"}),(0,r.jsx)("li",{children:"• In-memory lookups (<3ms coordinator)"}),(0,r.jsx)("li",{children:"• Smart load balancing across workers"}),(0,r.jsx)("li",{children:"• Parallel processing with multiple GPUs"})]})]}),(0,r.jsxs)("div",{className:"bg-purple-50 border border-purple-300 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-purple-900 mb-2",children:"\uD83D\uDD12 Security & Privacy"}),(0,r.jsxs)("ul",{className:"text-sm text-purple-800 space-y-1",children:[(0,r.jsx)("li",{children:"• All data stays on your infrastructure"}),(0,r.jsx)("li",{children:"• Cloudflare Tunnel: Zero-trust networking"}),(0,r.jsx)("li",{children:"• No exposed ports to internet"}),(0,r.jsx)("li",{children:"• GDPR-compliant data processing"})]})]}),(0,r.jsxs)("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:"\uD83D\uDCC8 Scalability"}),(0,r.jsxs)("ul",{className:"text-sm text-orange-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Unlimited workers (no KV limit)"}),(0,r.jsx)("li",{children:"• Horizontal scaling: Add more GPUs"}),(0,r.jsx)("li",{children:"• Worker specialization for efficiency"}),(0,r.jsx)("li",{children:"• Automatic failover and redundancy"})]})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Tier 4: Edge & Coordination Workers"}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-l-4 border-indigo-400 p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(I.Z,{className:"h-5 w-5 text-indigo-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-indigo-800",children:"Contributing Infrastructure Capacity"}),(0,r.jsxs)("p",{className:"text-sm text-indigo-700",children:["Beyond GPU/CPU/Storage, machines with excellent network access (server rooms, data centers) can donate coordination capacity as ",(0,r.jsx)("strong",{children:"Tier 4 workers"}),". This eliminates Cloudflare KV costs entirely by hosting coordinators on contributed infrastructure."]})]})]})}),(0,r.jsxs)("div",{className:"bg-white border-2 border-indigo-300 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-indigo-900 mb-3",children:"\uD83C\uDF0D What are Tier 4 Workers?"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 mb-4",children:["Tier 4 workers are machines with ",(0,r.jsx)("strong",{children:"public IP addresses"})," or ",(0,r.jsx)("strong",{children:"low-latency network access"})," (<50ms) that can host infrastructure services like coordinators, edge proxies, and load balancers. These workers enable:"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-indigo-900 mb-2",children:"\uD83D\uDCB8 Cost Elimination"}),(0,r.jsxs)("div",{className:"text-xs text-gray-700 space-y-1",children:[(0,r.jsxs)("div",{children:["• With 10 workers: ",(0,r.jsx)("span",{className:"line-through text-red-600",children:"$5-10/month"})," → ",(0,r.jsx)("span",{className:"text-green-700 font-bold",children:"$0/month"})]}),(0,r.jsx)("div",{children:"• Each worker = ~576 KV writes/day \xd7 50 workers = 28,800/day"}),(0,r.jsx)("div",{children:"• Cloudflare KV free tier: Only 1,000 writes/day"}),(0,r.jsx)("div",{children:"• Solution: Host coordinators on Tier 4 workers instead!"})]})]}),(0,r.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-semibold text-purple-900 mb-2",children:"\uD83D\uDDFA️ Geographic Distribution"}),(0,r.jsxs)("div",{className:"text-xs text-gray-700 space-y-1",children:[(0,r.jsx)("div",{children:"• Multiple coordinators across US/EU/APAC regions"}),(0,r.jsx)("div",{children:"• Workers connect to nearest coordinator (lowest latency)"}),(0,r.jsx)("div",{children:"• Redundancy: If one coordinator fails, others take over"}),(0,r.jsx)("div",{children:"• Edge proxies provide global entry points"})]})]})]}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3 mt-4",children:"Tier 4 Services:"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83C\uDFAF"}),(0,r.jsx)("strong",{className:"text-gray-900",children:"Coordinator"}),(0,r.jsx)("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded",children:"Port 8080, Priority 1"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-700 ml-7",children:"In-memory worker registry • Service assignment • Health tracking • Gap detection"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"text-lg",children:"\uD83C\uDF10"}),(0,r.jsx)("strong",{className:"text-gray-900",children:"Edge Proxy"}),(0,r.jsx)("span",{className:"text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded",children:"Port 8787, Priority 1"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-700 ml-7",children:"Routes traffic to coordinator • CORS handling • API authentication • Caching"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"text-lg",children:"⚖️"}),(0,r.jsx)("strong",{className:"text-gray-900",children:"Load Balancer"}),(0,r.jsx)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:"Port 8090, Priority 2"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-700 ml-7",children:"Round-robin distribution • Health checks • Failover handling • Traffic shaping"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-cyan-50 to-blue-50 border-2 border-cyan-300 rounded-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83D\uDDA5️"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-cyan-900 mb-2",children:"How to Become a Tier 4 Worker"}),(0,r.jsx)("p",{className:"text-sm text-cyan-800 mb-3",children:"If you have a server in a data center, cloud VPS, or machine with a public IP in a server room, you can contribute coordination capacity!"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Edge Detection Criteria:"}),(0,r.jsxs)("div",{className:"text-sm text-gray-700 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Public IP Address:"})," Not in private ranges (10.x, 192.168.x, 172.16.x)"]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2 text-gray-500",children:(0,r.jsx)("span",{className:"font-bold",children:"OR"})}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Low Latency:"})," <50ms ping time to existing coordinator"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Deployment Command:"}),(0,r.jsxs)("code",{className:"text-xs bg-gray-900 text-green-400 p-3 rounded block overflow-x-auto",children:["docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest",(0,r.jsx)("br",{}),"docker run -d --name rma-edge-worker --restart unless-stopped \\",(0,r.jsx)("br",{}),"\xa0\xa0-e COORDINATOR_URL=https://api.rmatool.org.uk \\",(0,r.jsx)("br",{}),"\xa0\xa0-e WORKER_TYPE=auto \\",(0,r.jsx)("br",{}),"\xa0\xa0-p 8080:8080 -p 8787:8787 -p 8090:8090 \\",(0,r.jsx)("br",{}),"\xa0\xa0ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"\uD83D\uDCA1 Set WORKER_TYPE=auto to let the worker auto-detect if it's edge-capable. It will automatically register as Tier 4 if conditions are met."})]})]}),(0,r.jsxs)("div",{className:"bg-white border-2 border-gray-300 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"Dynamic Service Allocation"}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:(0,r.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,r.jsx)("strong",{children:"\uD83D\uDCA1 Key Principle:"})," Workers are ",(0,r.jsx)("strong",{children:"flexible"})," - they can run ANY service their hardware supports. The coordinator assigns services ",(0,r.jsx)("strong",{children:"strategically"})," based on gaps and efficiency."]})}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 mb-4",children:["Workers don't know which services they'll run until registration. The coordinator uses a",(0,r.jsx)("strong",{children:" gap-filling algorithm"})," to assign 1-3 services based on system needs:"]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Why Specialization Matters (Differently by Tier):"}),(0,r.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-purple-600",children:"Tier 1 (GPU):"}),(0,r.jsxs)("div",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:"Strongly prefer 1 service/worker."})," Model loading is expensive (5-10GB VRAM, 30-60s). A GPU worker CAN switch between LLaVA and Llama, but it's costly. Specialization avoids this."]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-blue-600",children:"Tier 2 (CPU):"}),(0,r.jsxs)("div",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:"Can multi-task 2-3 services easily."})," Switching between NER extraction and document processing is instant (<1s) - just different Python libraries, no heavy models."]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-green-600",children:"Tier 3 (Storage):"}),(0,r.jsxs)("div",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:"Can run multiple databases together."})," ChromaDB + Redis on same machine is fine - no model loading, just memory allocation."]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"font-bold text-indigo-600",children:"Tier 4 (Edge):"}),(0,r.jsxs)("div",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:"Coordinator + proxy run simultaneously."})," Both are stateless routing services - no resource conflicts."]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Algorithm Steps:"}),(0,r.jsxs)("ol",{className:"text-sm text-gray-700 space-y-2 list-decimal list-inside",children:[(0,r.jsx)("li",{children:"Worker registers with capabilities (GPU, CPU, storage, edge)"}),(0,r.jsx)("li",{children:"Coordinator determines worker tier (1=GPU, 2=CPU, 3=Storage, 4=Edge)"}),(0,r.jsx)("li",{children:"Calculate service coverage: How many healthy workers per service?"}),(0,r.jsx)("li",{children:"Sort services by coverage (gaps first) + priority"}),(0,r.jsx)("li",{children:"Assign 1 service if many workers, 2-3 if understaffed"}),(0,r.jsx)("li",{children:"Return assigned services + config to worker"}),(0,r.jsx)("li",{children:"Worker launches assigned services via service_launcher.py"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,r.jsx)("h5",{className:"font-semibold text-blue-900 mb-1 text-sm",children:"Example: First Edge Worker"}),(0,r.jsxs)("div",{className:"text-xs text-gray-700 space-y-1",children:[(0,r.jsx)("div",{children:"• 0 coordinators, 0 edge-proxies, 0 load-balancers"}),(0,r.jsxs)("div",{children:["• All Tier 4 services are ",(0,r.jsx)("span",{className:"text-red-600 font-bold",children:"critical gaps"})]}),(0,r.jsxs)("div",{children:["• Worker gets: ",(0,r.jsx)("strong",{children:"coordinator + edge-proxy"})]}),(0,r.jsx)("div",{children:"• Priority 1 services first (coordinator, proxy)"})]})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,r.jsx)("h5",{className:"font-semibold text-green-900 mb-1 text-sm",children:"Example: 10th Edge Worker"}),(0,r.jsxs)("div",{className:"text-xs text-gray-700 space-y-1",children:[(0,r.jsx)("div",{children:"• 5 coordinators, 3 edge-proxies, 1 load-balancer"}),(0,r.jsxs)("div",{children:["• Load-balancer has ",(0,r.jsx)("span",{className:"text-orange-600 font-bold",children:"lowest coverage"})]}),(0,r.jsxs)("div",{children:["• Worker gets: ",(0,r.jsx)("strong",{children:"load-balancer only"})]}),(0,r.jsx)("div",{children:"• System has enough coordinators/proxies"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,r.jsx)("div",{className:"text-3xl",children:"\uD83C\uDF89"}),(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"text-lg font-bold text-green-900",children:"Benefits of Tier 4 Architecture"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900 text-sm",children:"Zero Infrastructure Costs"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Eliminate Cloudflare KV charges completely"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900 text-sm",children:"Unlimited Scaling"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"No 1,000 writes/day limit - support 1000+ workers"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900 text-sm",children:"Geographic Distribution"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Coordinators in US/EU/APAC for low latency everywhere"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900 text-sm",children:"High Availability"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Multiple coordinators = no single point of failure"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900 text-sm",children:"Truly Distributed"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Community-owned infrastructure, not cloud-dependent"})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"✓"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:"text-gray-900 text-sm",children:"Smart Resource Use"}),(0,r.jsx)("p",{className:"text-xs text-gray-700",children:"Servers donate coordination, GPUs donate compute"})]})]})]})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-white border border-green-300 rounded",children:(0,r.jsxs)("p",{className:"text-xs text-gray-900",children:[(0,r.jsx)("strong",{className:"text-green-800",children:"Cost Impact:"})," With 50 workers, traditional KV approach would cost ~$15-20/month. With Tier 4, ",(0,r.jsx)("span",{className:"text-green-700 font-bold text-lg",children:"$0/month"})," forever. This is the power of distributed, community-driven infrastructure! \uD83D\uDE80"]})})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Deployment Comparison"}),(0,r.jsx)("div",{className:"bg-white border-2 border-gray-300 rounded-lg overflow-hidden mb-6",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Feature"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"MVP"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 font-semibold",children:"Production"})]})}),(0,r.jsxs)("tbody",{className:"text-gray-700",children:[(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Setup Time"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"~30 minutes"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"~2 hours"})]}),(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Cost"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"$0/month"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"$0/month"})]}),(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Workers"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"1 (CPU or GPU)"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"3+ (specialized)"})]}),(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Redundancy"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"None"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Multiple workers"})]}),(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Monitoring"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Basic (logs)"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Prometheus + Grafana"})]}),(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Backups"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Manual"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Automated (volume snapshots)"})]}),(0,r.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,r.jsx)("td",{className:"py-2 px-4",children:"Use Case"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Testing, personal"}),(0,r.jsx)("td",{className:"py-2 px-4",children:"Multi-user, production"})]})]})]})}),(0,r.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"\uD83D\uDCDA Next Steps"}),(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Ready to deploy? Check the ",(0,r.jsx)("strong",{children:"Local Deployment"})," tab for step-by-step instructions, or visit the ",(0,r.jsx)("strong",{children:"AWS Deployment"})," tab for cloud hosting options."]})]})]})}function es(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Local Deployment Guide"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(W.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Deploy RMA Dashboard on your local machine or internal server using Docker. Perfect for testing, development, or small single-centre deployments."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Prerequisites"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"System Requirements"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"RAM:"})," 16GB minimum, 32GB recommended"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Storage:"})," 50GB free space (for models and data)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"CPU:"})," 4 cores minimum, 8+ recommended"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"GPU (Optional):"})," NVIDIA GPU with 8GB+ VRAM for faster inference"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"OS:"})," Linux (Ubuntu 22.04+), macOS, or Windows with WSL2"]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Software Requirements"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,r.jsx)("li",{children:"Docker Engine 24.0+"}),(0,r.jsx)("li",{children:"Docker Compose 2.20+"}),(0,r.jsx)("li",{children:"(Optional) NVIDIA Docker runtime for GPU support"})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Installation Steps"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"1. Install Docker"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Ubuntu/Debian:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"curl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\nsudo usermod -aG docker $USER\n# Log out and back in for group changes"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"macOS:"})}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:["Download and install Docker Desktop from ",(0,r.jsx)("a",{href:"https://docker.com",className:"text-blue-600",children:"docker.com"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Windows:"})}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:["Install WSL2, then Docker Desktop from ",(0,r.jsx)("a",{href:"https://docker.com",className:"text-blue-600",children:"docker.com"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2. (Optional) Install NVIDIA Docker for GPU"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Install NVIDIA drivers first\ndistribution=$(. /etc/os-release;echo $ID$VERSION_ID)\ncurl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -\ncurl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | \\\n  sudo tee /etc/apt/sources.list.d/nvidia-docker.list\n\nsudo apt-get update\nsudo apt-get install -y nvidia-docker2\nsudo systemctl restart docker\n\n# Test GPU access\ndocker run --rm --gpus all nvidia/cuda:12.2.0-base-ubuntu22.04 nvidia-smi"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3. Clone/Extract RMA-Demo"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"cd /path/to/installation\n# If from git:\ngit clone https://your-repo/RMA-Demo.git\ncd RMA-Demo\n\n# Or extract from archive:\ntar -xzf RMA-Demo.tar.gz\ncd RMA-Demo"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"4. Configure Environment"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Copy example environment file\ncp .env.example .env\n\n# Edit configuration\nnano .env  # or use your preferred editor"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Required Settings:"})}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,r.jsx)("pre",{className:"text-sm text-gray-800",children:"# Get API key from https://cloud.llamaindex.ai/\nLLAMA_PARSE_API_KEY=llx-xxxxxxxxxxxxxxxx\n\n# Generate secure secret: openssl rand -hex 32\nJWT_SECRET=your-64-character-hex-string\n\n# Your server's public URL (for QR codes)\nAPP_BASE_URL=http://your-server-ip:3000"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5. Initialize and Start"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# One-command setup\n./init.sh\n\n# This will:\n# - Create configuration files\n# - Start all Docker containers\n# - Pull required AI models (7-8GB download)\n# - Set up vector databases"}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:[(0,r.jsx)("strong",{children:"First-time setup takes 15-30 minutes"})," due to model downloads."]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"6. Verify Installation"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Check all services are running\ndocker-compose ps\n\n# Should show:\n# rma-ollama          running\n# rma-chromadb        running\n# rma-notes-service   running\n# rma-doc-processor   running\n# rma-rag-service     running\n# rma-upload-service  running\n# rma-frontend        running"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"7. Access Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:["Open your browser to: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"http://localhost:3000"})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"font-semibold text-green-900 mb-2",children:"Default Login:"}),(0,r.jsxs)("p",{className:"text-green-800",children:["Username: ",(0,r.jsx)("code",{children:"admin"})]}),(0,r.jsxs)("p",{className:"text-green-800",children:["Password: ",(0,r.jsx)("code",{children:"admin123"})]}),(0,r.jsx)("p",{className:"text-sm text-green-700 mt-2",children:"⚠️ Change these credentials in production!"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Adding Training Manuals"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"1. Add PDF Files"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Copy your training manuals\ncp /path/to/manuals/*.pdf ./manuals/\n\n# Example structure:\n./manuals/\n├── debt-advice-handbook.pdf\n├── benefits-guide.pdf\n├── bankruptcy-procedures.pdf\n└── vulnerability-policy.pdf"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2. Ingest Manuals"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Run ingestion script\n./scripts/ingest-manuals.sh\n\n# This will:\n# - Process each PDF with OCR\n# - Extract text and structure\n# - Create embeddings\n# - Store in vector database\n# Takes 2-5 minutes per manual"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3. Verify Ingestion"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:'# Check RAG service stats\ncurl http://localhost:8102/stats\n\n# Should return:\n{\n  "total_chunks": 1234,\n  "collection_name": "manuals",\n  "status": "ready"\n}'}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Maintenance Commands"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Daily Operations"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-3",children:"# View logs\ndocker-compose logs -f\n\n# View specific service\ndocker-compose logs -f notes-service\n\n# Restart a service\ndocker-compose restart upload-service\n\n# Stop all services\ndocker-compose down\n\n# Start all services\ndocker-compose up -d"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3 mt-4",children:"Updates"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-3",children:"# Pull latest code\ngit pull\n\n# Rebuild containers\ndocker-compose build\n\n# Restart with new images\ndocker-compose up -d"}),(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3 mt-4",children:"Backups"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm",children:"# Backup volumes\ndocker run --rm \\\n  -v rma-demo_ollama_data:/data \\\n  -v $(pwd)/backups:/backup \\\n  alpine tar czf /backup/ollama-$(date +%Y%m%d).tar.gz /data\n\n# Backup uploads\ntar czf backups/uploads-$(date +%Y%m%d).tar.gz data/uploads/"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Network Configuration"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Accessing from Other Computers"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"To allow other staff to access the dashboard:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Configure Firewall:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mt-2",children:"# Ubuntu/Debian\nsudo ufw allow 3000/tcp\n\n# Or allow from specific subnet\nsudo ufw allow from 192.168.1.0/24 to any port 3000"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Find Server IP:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mt-2",children:"# Linux/Mac\nip addr show | grep inet\n\n# Example output:\ninet 192.168.1.100/24"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Access Dashboard:"})," Other computers can now access at"," ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"http://192.168.1.100:3000"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Update QR Codes:"})," Edit ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:".env"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mt-2",children:"APP_BASE_URL=http://192.168.1.100:3000"}),"Then restart: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"docker-compose restart"})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Using a Custom Domain (Local Network)"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"For easier access, set up a local domain:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"On your router, set a static IP for the server"}),(0,r.jsx)("li",{children:"Add DNS entry in router settings (e.g., rma-dashboard.local → 192.168.1.100)"}),(0,r.jsxs)("li",{children:["Staff can access at: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"http://rma-dashboard.local:3000"})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Security Hardening"}),(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-red-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Production Checklist"}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 list-disc list-inside mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"Change default admin password"}),(0,r.jsx)("li",{children:"Set strong JWT_SECRET (64+ characters)"}),(0,r.jsx)("li",{children:"Enable HTTPS (use reverse proxy like nginx)"}),(0,r.jsx)("li",{children:"Regular backups (daily recommended)"}),(0,r.jsx)("li",{children:"Keep Docker and packages updated"}),(0,r.jsx)("li",{children:"Monitor disk space (models are large)"}),(0,r.jsx)("li",{children:"Restrict network access to internal only"})]})]})]})})]})}function et(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"AWS Deployment with GPU Support"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(T.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Deploy RMA Dashboard on AWS EKS (Elastic Kubernetes Service) with GPU acceleration, auto-scaling, high availability, and enterprise-grade reliability."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Prerequisites"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"AWS Account Setup"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Active AWS account with billing enabled"}),(0,r.jsx)("li",{children:"IAM user with administrator access"}),(0,r.jsx)("li",{children:"AWS CLI configured with credentials"}),(0,r.jsx)("li",{children:"Sufficient service limits (EKS, EC2, EBS)"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Local Tools"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 mb-2",children:"Install Required CLI Tools:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm",children:'# AWS CLI\ncurl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"\nunzip awscliv2.zip\nsudo ./aws/install\n\n# eksctl (EKS cluster manager)\ncurl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp\nsudo mv /tmp/eksctl /usr/local/bin\n\n# kubectl (Kubernetes CLI)\ncurl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"\nsudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl'})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Configure AWS CLI"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-6",children:"# Configure credentials\naws configure\n\n# Enter when prompted:\nAWS Access Key ID: AKIAXXXXXXXXXXXXXXXX\nAWS Secret Access Key: xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\nDefault region name: us-east-1\nDefault output format: json\n\n# Verify configuration\naws sts get-caller-identity"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Deployment Process"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Step 1: Prepare Configuration"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:'cd RMA-Demo\n\n# Set environment variables\nexport LLAMA_PARSE_API_KEY="your-api-key"\nexport AWS_REGION="us-east-1"\nexport CLUSTER_NAME="rma-demo-cluster"'}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Step 2: Run Deployment Script"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"cd aws-scripts\n./deploy-eks.sh\n\n# This script will:\n# 1. Create EKS cluster (15-20 minutes)\n# 2. Add GPU node group (5-10 minutes)\n# 3. Install NVIDIA device plugin\n# 4. Create ECR repositories\n# 5. Build and push Docker images (10-15 minutes)\n# 6. Deploy all services to Kubernetes\n# 7. Create Load Balancer\n\n# Total time: 30-45 minutes"}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-yellow-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Cost Warning"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700 mb-2",children:"AWS EKS with GPU nodes is not free. Estimated monthly costs:"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-700 list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:"EKS Cluster: $73/month"}),(0,r.jsx)("li",{children:"CPU Nodes (2x t3.large): ~$120/month"}),(0,r.jsx)("li",{children:"GPU Node (1x g5.xlarge): ~$550/month"}),(0,r.jsx)("li",{children:"Load Balancer: ~$16/month"}),(0,r.jsx)("li",{children:"Storage (EBS): ~$20/month"}),(0,r.jsx)("li",{children:(0,r.jsx)("strong",{children:"Total: ~$780/month"})})]}),(0,r.jsx)("p",{className:"text-sm text-yellow-700 mt-2",children:"\uD83D\uDCA1 Tip: Scale GPU nodes to 0 when not in use to save $550/month"})]})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Step 3: Monitor Deployment"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Watch pods come online\nkubectl get pods -n rma-demo -w\n\n# Check service status\nkubectl get svc -n rma-demo\n\n# View logs\nkubectl logs -f deployment/frontend -n rma-demo"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Step 4: Get Access URL"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Get Load Balancer URL\nkubectl get svc frontend -n rma-demo\n\n# Output:\nNAME       TYPE           EXTERNAL-IP\nfrontend   LoadBalancer   a1b2c3d4.us-east-1.elb.amazonaws.com\n\n# Access dashboard at:\n# http://a1b2c3d4.us-east-1.elb.amazonaws.com"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"GPU Configuration"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"GPU Instance Types"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("th",{className:"text-left py-2",children:"Instance"}),(0,r.jsx)("th",{className:"text-left py-2",children:"GPU"}),(0,r.jsx)("th",{className:"text-left py-2",children:"VRAM"}),(0,r.jsx)("th",{className:"text-left py-2",children:"Cost/hour"}),(0,r.jsx)("th",{className:"text-left py-2",children:"Best For"})]})}),(0,r.jsxs)("tbody",{className:"text-gray-700",children:[(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2",children:"g5.xlarge"}),(0,r.jsx)("td",{children:"NVIDIA A10G"}),(0,r.jsx)("td",{children:"24GB"}),(0,r.jsx)("td",{children:"$1.01"}),(0,r.jsx)("td",{children:"Production (recommended)"})]}),(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2",children:"g5.2xlarge"}),(0,r.jsx)("td",{children:"NVIDIA A10G"}),(0,r.jsx)("td",{children:"24GB"}),(0,r.jsx)("td",{children:"$1.21"}),(0,r.jsx)("td",{children:"Higher CPU needs"})]}),(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2",children:"g4dn.xlarge"}),(0,r.jsx)("td",{children:"NVIDIA T4"}),(0,r.jsx)("td",{children:"16GB"}),(0,r.jsx)("td",{children:"$0.53"}),(0,r.jsx)("td",{children:"Budget option"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2",children:"p3.2xlarge"}),(0,r.jsx)("td",{children:"NVIDIA V100"}),(0,r.jsx)("td",{children:"16GB"}),(0,r.jsx)("td",{children:"$3.06"}),(0,r.jsx)("td",{children:"Heavy workloads"})]})]})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Verify GPU Access"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Check GPU nodes\nkubectl get nodes -l workload=gpu\n\n# Run test pod\nkubectl run gpu-test --rm -it --restart=Never \\\n  --image=nvidia/cuda:12.2.0-base-ubuntu22.04 \\\n  --limits=nvidia.com/gpu=1 \\\n  -- nvidia-smi\n\n# Should show GPU info"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Scale GPU Nodes"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Scale down to save costs (when not in use)\neksctl scale nodegroup --cluster=rma-demo-cluster \\\n  --name=gpu-nodes --nodes=0\n\n# Scale up when needed\neksctl scale nodegroup --cluster=rma-demo-cluster \\\n  --name=gpu-nodes --nodes=1"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"High Availability Setup"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Auto-Scaling Configuration"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"The deployment includes auto-scaling based on CPU/memory usage:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Enable cluster autoscaler\nkubectl apply -f k8s/cluster-autoscaler.yaml\n\n# Configure horizontal pod autoscaling\nkubectl autoscale deployment frontend -n rma-demo \\\n  --min=2 --max=10 --cpu-percent=70\n\nkubectl autoscale deployment notes-service -n rma-demo \\\n  --min=1 --max=5 --cpu-percent=80"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Multi-AZ Deployment"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"For production, deploy across multiple availability zones:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Edit deployment script to use multiple AZs\neksctl create cluster \\\n  --name rma-demo-cluster \\\n  --region us-east-1 \\\n  --zones us-east-1a,us-east-1b,us-east-1c \\\n  --node-type t3.large \\\n  --nodes 3 \\\n  --nodes-min 2 \\\n  --nodes-max 6"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Monitoring & Logging"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"CloudWatch Integration"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Install CloudWatch agent\nkubectl apply -f https://raw.githubusercontent.com/aws-samples/amazon-cloudwatch-container-insights/latest/k8s-deployment-manifest-templates/deployment-mode/daemonset/container-insights-monitoring/quickstart/cwagent-fluentd-quickstart.yaml\n\n# View logs in CloudWatch\naws logs tail /aws/eks/rma-demo-cluster/cluster --follow"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Metrics Dashboard"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Access metrics in AWS Console:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Go to CloudWatch → Dashboards"}),(0,r.jsx)("li",{children:"Create dashboard for RMA-Demo"}),(0,r.jsxs)("li",{children:["Add widgets for:",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2",children:[(0,r.jsx)("li",{children:"Pod CPU/Memory usage"}),(0,r.jsx)("li",{children:"Request rates"}),(0,r.jsx)("li",{children:"Error rates"}),(0,r.jsx)("li",{children:"GPU utilization"})]})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Backup & Disaster Recovery"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"EBS Snapshots"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:'# Enable automated EBS snapshots\naws dlm create-lifecycle-policy \\\n  --description "Daily RMA backup" \\\n  --state ENABLED \\\n  --execution-role-arn arn:aws:iam::ACCOUNT:role/AWSDataLifecycleManager \\\n  --policy-details file://backup-policy.json'}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Velero for K8s Backups"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Install Velero\nvelero install \\\n  --provider aws \\\n  --plugins velero/velero-plugin-for-aws:v1.8.0 \\\n  --bucket rma-demo-backups \\\n  --backup-location-config region=us-east-1\n\n# Create backup\nvelero backup create rma-demo-backup --include-namespaces rma-demo\n\n# Restore from backup\nvelero restore create --from-backup rma-demo-backup"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Security Best Practices"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Network Security"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Use VPC with private subnets for worker nodes"}),(0,r.jsx)("li",{children:"Restrict Load Balancer to specific IP ranges"}),(0,r.jsx)("li",{children:"Enable VPC Flow Logs for audit"}),(0,r.jsx)("li",{children:"Use AWS WAF for application firewall"}),(0,r.jsx)("li",{children:"Enable encryption at rest for EBS volumes"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Secrets Management"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:'# Use AWS Secrets Manager\naws secretsmanager create-secret \\\n  --name rma-demo/jwt-secret \\\n  --secret-string "your-secret-here"\n\n# Install External Secrets Operator\nhelm repo add external-secrets https://charts.external-secrets.io\nhelm install external-secrets external-secrets/external-secrets\n\n# Configure secret sync to K8s'}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Updating the Deployment"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Rolling Updates"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Build new images\ncd RMA-Demo\ndocker build -t ECR_REGISTRY/rma-frontend:v2 ./frontend\ndocker push ECR_REGISTRY/rma-frontend:v2\n\n# Update deployment\nkubectl set image deployment/frontend \\\n  frontend=ECR_REGISTRY/rma-frontend:v2 \\\n  -n rma-demo\n\n# Watch rollout\nkubectl rollout status deployment/frontend -n rma-demo\n\n# Rollback if needed\nkubectl rollout undo deployment/frontend -n rma-demo"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Cost Optimization"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Strategies to Reduce Costs"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Use Spot Instances:"})," Save 70% on non-GPU nodes",(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mt-2",children:"eksctl create nodegroup --spot"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Schedule GPU nodes:"})," Only run during business hours"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Use S3 Intelligent-Tiering:"})," For document storage"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Enable EBS autoscaling:"})," Only pay for used storage"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Use AWS Savings Plans:"})," 1-year commitment saves 20-30%"]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Cleanup"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Delete Cluster"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Delete everything\neksctl delete cluster --name rma-demo-cluster --region us-east-1\n\n# This will remove:\n# - EKS cluster\n# - All node groups\n# - Load Balancers\n# - Associated resources\n\n# Manually delete:\n# - ECR repositories (if no longer needed)\n# - EBS snapshots/backups\n# - CloudWatch logs"}),(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-red-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"⚠️ Important"}),(0,r.jsx)("p",{className:"text-sm text-red-700",children:"Always verify all resources are deleted to avoid unexpected charges. Check:"}),(0,r.jsxs)("ul",{className:"text-sm text-red-700 list-disc list-inside mt-1",children:[(0,r.jsx)("li",{children:"EC2 instances"}),(0,r.jsx)("li",{children:"Load Balancers"}),(0,r.jsx)("li",{children:"EBS volumes"}),(0,r.jsx)("li",{children:"Elastic IPs"})]})]})]})})]})}function er(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Domain Registration & DNS Setup"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(G.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Set up a custom domain name for your RMA Dashboard (e.g., rma.yourorg.org.uk) instead of using AWS Load Balancer URLs or IP addresses."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Option 1: Register New Domain"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Using AWS Route 53"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Log in to AWS Console"}),(0,r.jsx)("p",{className:"ml-6 mt-1",children:"Navigate to Route 53 service"})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Register Domain"}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 space-y-1",children:[(0,r.jsx)("li",{children:'Click "Register Domain"'}),(0,r.jsx)("li",{children:"Search for available domain (e.g., your-org-rma.co.uk)"}),(0,r.jsx)("li",{children:"Select domain and add to cart"}),(0,r.jsx)("li",{children:"Typical costs: \xa310-30/year for .uk domains"})]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Complete Registration"}),(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 space-y-1",children:[(0,r.jsx)("li",{children:"Enter contact information"}),(0,r.jsx)("li",{children:"Enable auto-renewal"}),(0,r.jsx)("li",{children:"Complete payment"}),(0,r.jsx)("li",{children:"Registration takes 10-15 minutes"})]})]})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Using Third-Party Registrar"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Popular UK registrars:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Namecheap:"})," \xa38-15/year, easy management"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"123-reg:"})," \xa35-20/year, UK-based"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"GoDaddy:"})," \xa310-25/year, well-known"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Cloudflare:"})," At-cost pricing, excellent security"]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Option 2: Use Existing Domain"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"If your organization already owns a domain (e.g., yourorg.org.uk), create a subdomain:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"rma.yourorg.org.uk"}),(0,r.jsx)("li",{children:"dashboard.yourorg.org.uk"}),(0,r.jsx)("li",{children:"advice.yourorg.org.uk"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"DNS Configuration"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Method A: AWS Route 53 (Recommended for AWS)"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:(0,r.jsx)("strong",{children:"Step 1: Create Hosted Zone"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Using provided script\ncd RMA-Demo/aws-scripts\n./register-domain.sh your-domain.com\n\n# This automatically:\n# - Creates Route 53 hosted zone\n# - Gets Load Balancer DNS\n# - Creates A record (alias)\n# - Sets up www subdomain"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:(0,r.jsx)("strong",{children:"Step 2: Update Nameservers (if domain registered elsewhere)"})}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 text-sm",children:[(0,r.jsxs)("li",{children:["Get nameservers from Route 53:",(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-2 rounded overflow-x-auto text-xs mt-1",children:"aws route53 get-hosted-zone --id YOUR_ZONE_ID \\\n  --query 'DelegationSet.NameServers'"})]}),(0,r.jsx)("li",{children:"Log in to your domain registrar"}),(0,r.jsx)("li",{children:"Find DNS/Nameserver settings"}),(0,r.jsxs)("li",{children:["Replace nameservers with Route 53 ones:",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1",children:[(0,r.jsx)("li",{children:"ns-1234.awsdns-12.org"}),(0,r.jsx)("li",{children:"ns-5678.awsdns-34.co.uk"}),(0,r.jsx)("li",{children:"ns-9012.awsdns-56.com"}),(0,r.jsx)("li",{children:"ns-3456.awsdns-78.net"})]})]}),(0,r.jsx)("li",{children:"Save changes (propagation takes 24-48 hours, usually faster)"})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Method B: External DNS Provider"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"If using Cloudflare, Namecheap, etc.:"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Step 1: Get Load Balancer DNS"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"kubectl get svc frontend -n rma-demo\n\n# Copy the EXTERNAL-IP:\n# a1b2c3d4e5f6g7h8.us-east-1.elb.amazonaws.com"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Step 2: Add DNS Records"})}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 mb-2",children:"In your DNS provider dashboard:"}),(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-300",children:[(0,r.jsx)("th",{className:"text-left py-2",children:"Type"}),(0,r.jsx)("th",{className:"text-left py-2",children:"Name"}),(0,r.jsx)("th",{className:"text-left py-2",children:"Value"}),(0,r.jsx)("th",{className:"text-left py-2",children:"TTL"})]})}),(0,r.jsxs)("tbody",{className:"text-gray-700",children:[(0,r.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,r.jsx)("td",{className:"py-2",children:"CNAME"}),(0,r.jsx)("td",{children:"rma"}),(0,r.jsx)("td",{children:"a1b2c3d4.us-east-1.elb.amazonaws.com"}),(0,r.jsx)("td",{children:"300"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"py-2",children:"CNAME"}),(0,r.jsx)("td",{children:"www"}),(0,r.jsx)("td",{children:"rma.yourdomain.com"}),(0,r.jsx)("td",{children:"300"})]})]})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"SSL/TLS Certificate Setup"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Using AWS Certificate Manager (Free)"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:(0,r.jsx)("strong",{children:"Step 1: Request Certificate"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Request certificate\naws acm request-certificate \\\n  --domain-name rma.yourdomain.com \\\n  --subject-alternative-names www.rma.yourdomain.com \\\n  --validation-method DNS \\\n  --region us-east-1\n\n# Note the CertificateArn from output"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:(0,r.jsx)("strong",{children:"Step 2: Validate Domain Ownership"})}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-4",children:[(0,r.jsx)("li",{children:"AWS Certificate Manager will provide DNS records"}),(0,r.jsx)("li",{children:"Add these CNAME records to your DNS"}),(0,r.jsx)("li",{children:"Wait for validation (5-30 minutes)"}),(0,r.jsx)("li",{children:'Certificate status changes to "Issued"'})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:(0,r.jsx)("strong",{children:"Step 3: Configure Load Balancer"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Get Load Balancer ARN\nLB_ARN=$(aws elbv2 describe-load-balancers \\\n  --query 'LoadBalancers[?contains(LoadBalancerName, `rma`)].LoadBalancerArn' \\\n  --output text)\n\n# Add HTTPS listener\naws elbv2 create-listener \\\n  --load-balancer-arn $LB_ARN \\\n  --protocol HTTPS \\\n  --port 443 \\\n  --certificates CertificateArn=YOUR_CERT_ARN \\\n  --default-actions Type=forward,TargetGroupArn=YOUR_TARGET_GROUP_ARN\n\n# Redirect HTTP to HTTPS\naws elbv2 modify-listener \\\n  --listener-arn YOUR_HTTP_LISTENER_ARN \\\n  --default-actions Type=redirect,RedirectConfig=\"{Protocol=HTTPS,Port=443,StatusCode=HTTP_301}\""}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Using Let's Encrypt (Alternative)"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"For non-AWS deployments or preference for Let's Encrypt:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Install cert-manager\nkubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.13.0/cert-manager.yaml\n\n# Create issuer\nkubectl apply -f - <<EOF\napiVersion: cert-manager.io/v1\nkind: ClusterIssuer\nmetadata:\n  name: letsencrypt-prod\nspec:\n  acme:\n    server: https://acme-v02.api.letsencrypt.org/directory\n    email: admin@yourdomain.com\n    privateKeySecretRef:\n      name: letsencrypt-prod\n    solvers:\n    - http01:\n        ingress:\n          class: nginx\nEOF\n\n# Certificate will auto-renew every 90 days"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Verification"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Check DNS Propagation"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Check DNS resolution\ndig rma.yourdomain.com\n\n# Or use online tools:\n# - https://dnschecker.org\n# - https://www.whatsmydns.net"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Test SSL Certificate"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Check certificate\ncurl -vI https://rma.yourdomain.com\n\n# Or use online tools:\n# - https://www.ssllabs.com/ssltest/\n# Should show A+ rating"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Access Dashboard"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Once DNS propagates and SSL is configured:"}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("p",{className:"font-semibold text-green-900 mb-2",children:"Your dashboard is now accessible at:"}),(0,r.jsx)("p",{className:"text-green-800 text-lg",children:"\uD83D\uDD12 https://rma.yourdomain.com"}),(0,r.jsxs)("p",{className:"text-sm text-green-700 mt-2",children:["✅ Secure connection",(0,r.jsx)("br",{}),"✅ Professional URL",(0,r.jsx)("br",{}),"✅ Ready for production"]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Update Application Configuration"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Update Environment Variables"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto mb-4",children:"# Update .env file\nAPP_BASE_URL=https://rma.yourdomain.com\n\n# Or for Kubernetes:\nkubectl set env deployment/upload-service \\\n  APP_BASE_URL=https://rma.yourdomain.com \\\n  -n rma-demo\n\n# Restart services to apply\nkubectl rollout restart deployment/upload-service -n rma-demo"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Regenerate QR Codes"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"After updating the domain, regenerate any client QR codes so they point to the new URL."}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Subdomain Strategy"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Recommended Structure"}),(0,r.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 text-sm",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"rma.yourorg.org.uk"})," - Main dashboard (production)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"rma-staging.yourorg.org.uk"})," - Testing environment"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"rma-api.yourorg.org.uk"})," - API endpoints (if exposing publicly)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"docs.yourorg.org.uk"})," - Documentation portal"]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Troubleshooting"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"DNS Not Resolving"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Wait up to 48 hours for propagation"}),(0,r.jsx)("li",{children:"Check nameservers are correct"}),(0,r.jsxs)("li",{children:["Clear local DNS cache: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"sudo systemd-resolve --flush-caches"})]}),(0,r.jsx)("li",{children:"Try different DNS server (8.8.8.8, 1.1.1.1)"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"SSL Certificate Issues"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Verify DNS is resolving before requesting certificate"}),(0,r.jsx)("li",{children:"Check validation records are added correctly"}),(0,r.jsx)("li",{children:"Ensure Load Balancer has certificate attached"}),(0,r.jsx)("li",{children:"Check security group allows HTTPS (port 443)"})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Mixed Content Warnings"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"If you see security warnings after enabling HTTPS:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsx)("li",{children:"Update all service URLs in frontend to use https://"}),(0,r.jsxs)("li",{children:["Or use relative URLs: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"/api/endpoint"})]}),(0,r.jsx)("li",{children:"Ensure API calls don't mix HTTP and HTTPS"})]}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\uD83D\uDCA1 Pro Tip"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Use Cloudflare (free tier) as DNS provider for additional benefits:"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-700 list-disc list-inside mt-1",children:[(0,r.jsx)("li",{children:"Free SSL/TLS"}),(0,r.jsx)("li",{children:"DDoS protection"}),(0,r.jsx)("li",{children:"Caching/CDN"}),(0,r.jsx)("li",{children:"Analytics"}),(0,r.jsx)("li",{children:"Faster DNS propagation"})]})]})]})})]})}function el(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"API Reference"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(M.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Complete API Documentation"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Reference for all backend service endpoints and their usage."})]})]})}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Notes Service (Port 8100)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Converts advisor notes to client-friendly charts of accounts."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Service info and welcome message"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /health"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Health check endpoint"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /convert"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Convert advisor notes to CoA format"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "notes": "Client has \xa3500 overdraft, \xa32000 credit card debt..."\n}'})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Document Processor Service (Port 8101)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Processes PDF documents with local or cloud parsing."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Service information"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /health"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Health check endpoint"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /capabilities"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Returns parsing capabilities (local-only)"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /process"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Process a PDF document"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "file_path": "/path/to/document.pdf",\n  "use_local": true\n}'})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"RAG Service (Port 8102)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Agentic RAG service for querying training manuals with LangGraph."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Service information"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /health"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Health check endpoint"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /stats"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Vector store statistics"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /query"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Query the manuals (basic RAG)"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "query": "What is the process for bankruptcy?",\n  "top_k": 5\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /agentic-query"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Agentic query with reasoning and tool use (LangGraph)"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "query": "Compare DRO vs bankruptcy eligibility",\n  "include_reasoning": true\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /eligibility-check"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Check debt solution eligibility"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "debt_amount": 15000,\n  "monthly_income": 1200,\n  "assets": 5000,\n  "circumstances": "unemployed"\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /symbolic-query"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Symbolic reasoning query"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /ingest"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Ingest text content into vector store"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /ingest-pdf"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Ingest PDF into vector store"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /ingest-all-manuals"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Ingest all manuals from /manuals directory"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /decision-tree/check"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Decision tree eligibility check"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /decision-tree/visualize"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Visualize decision tree"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /decision-tree/rules"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Get decision tree rules"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /diagrams/mermaid/:topic"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate Mermaid diagram for topic"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /diagrams/graphviz/:topic"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate Graphviz diagram for topic"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /diagrams/client-path"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate client journey diagram"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /diagrams/advisor-package"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate advisor package diagram"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /diagrams/comparison"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Compare debt solutions diagram"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /debug/documents"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List all documents in vector store"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /debug/sources"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List unique document sources"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /thresholds"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Get eligibility thresholds"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /debug/thresholds"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Debug threshold information"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Upload Service (Port 8103)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Handles client document uploads, authentication, and QR code generation."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Service information"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /health"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Health check endpoint"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /login"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Advisor authentication"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "username": "advisor1",\n  "password": "password123"\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /generate-qr"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Generate QR code for client uploads"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "client_id": "john-smith",\n  "client_name": "John Smith"\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /uploads/:client_id"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Upload document for client"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Multipart form data with file field"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /uploads/:client_id"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List all uploads for a client"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /uploads/:client_id/:filename"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Download specific file"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-red-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"DELETE /uploads/:client_id/:filename"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Delete a client document"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /query-client-documents"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Query client-specific documents"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "client_id": "john-smith",\n  "query": "What is their monthly income?"\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /clients"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List all clients with uploads"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /client-stats/:client_id"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Get statistics for client documents"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /triage-document"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"AI triage of uploaded document"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Client RAG Service (Port 8104)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Client-specific document RAG with LangGraph agentic capabilities."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Service information"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /health"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Health check endpoint"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /clients"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List all clients in vector store"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /stats/:client_id"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Get client document statistics"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-red-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"DELETE /delete/:client_id/:filename"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Delete client document from vector store"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /query"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Query client documents (basic RAG)"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "client_id": "john-smith",\n  "query": "What is the client\'s income?",\n  "top_k": 5\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /agentic-query"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Agentic query with reasoning (LangGraph)"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "client_id": "john-smith",\n  "query": "Calculate debt-to-income ratio",\n  "include_reasoning": true\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /should-i-worry"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Analyze document for concerns"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "client_id": "john-smith",\n  "filename": "payslip.pdf"\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /ingest"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Ingest client document into vector store"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "client_id": "john-smith",\n  "filename": "statement.pdf",\n  "content": "extracted text..."\n}'})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"MCP Server (Port 8105)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Model Context Protocol server for external integrations and n8n workflows."}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Service information"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /health"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Health check endpoint"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /mcp/tools"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List available MCP tools"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"POST /mcp/tools/execute"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Execute an MCP tool"}),(0,r.jsx)("pre",{className:"bg-gray-50 p-3 rounded mt-2 text-xs overflow-x-auto",children:'{\n  "tool_name": "query_manuals",\n  "arguments": {\n    "query": "DRO eligibility"\n  }\n}'})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /mcp/resources"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List available MCP resources"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /mcp/resources/:resource_uri"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Get specific MCP resource"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:"GET /mcp/prompts"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"List available MCP prompts"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"N8N Workflow Platform (Port 5678)"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Low-code workflow automation for centre managers."}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:(0,r.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,r.jsx)("strong",{children:"Access:"})," http://localhost:5678",(0,r.jsx)("br",{}),(0,r.jsx)("strong",{children:"Default credentials:"})," admin / changeme123 (change in production!)"]})}),(0,r.jsx)("p",{className:"text-gray-700",children:"N8N provides a visual workflow editor where centre managers can:"}),(0,r.jsxs)("ul",{className:"list-disc pl-6 mt-2 space-y-1 text-gray-700",children:[(0,r.jsx)("li",{children:"Create automated client communication workflows"}),(0,r.jsx)("li",{children:"Schedule regular reports and statistics"}),(0,r.jsx)("li",{children:"Integrate with external services (email, SMS, etc.)"}),(0,r.jsx)("li",{children:"Access RMA data via MCP server integration"}),(0,r.jsx)("li",{children:"Build custom triggers and actions without coding"})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Environment Variables"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Required configuration for services."}),(0,r.jsx)("pre",{className:"bg-gray-50 p-4 rounded text-xs overflow-x-auto",children:"# Authentication\nJWT_SECRET=your-secret-key-change-in-production\n\n# N8N Configuration\nN8N_USER=admin\nN8N_PASSWORD=changeme123\n\n# MCP Server\nMCP_API_KEY=dev-key-change-in-production\n\n# Upload Service\nAPP_BASE_URL=http://localhost:3000\n\n# Document Processing (optional for cloud parsing)\nLLAMA_PARSE_API_KEY=your-llamaparse-key\n\n# Local Parsing (set to true for privacy mode)\nUSE_LOCAL_PARSING=true"})]})]})]})}function ea(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"N8N Workflows & Automation"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(Z.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Automated Document Processing"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Create powerful workflows to automate client document validation, compliance checks, and reporting using N8N."})]})]})}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"What is N8N?"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"N8N is a powerful workflow automation tool that allows you to create complex automations without coding. Think of it as connecting different apps and services together with visual workflows."}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"What You Can Do"}),(0,r.jsxs)("ul",{className:"text-sm text-green-800 space-y-1",children:[(0,r.jsx)("li",{children:"• Automate document audits"}),(0,r.jsx)("li",{children:"• Send email notifications"}),(0,r.jsx)("li",{children:"• Schedule regular checks"}),(0,r.jsx)("li",{children:"• Integrate with external systems"}),(0,r.jsx)("li",{children:"• Generate compliance reports"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Access N8N"}),(0,r.jsxs)("p",{className:"text-sm text-blue-800 mb-2",children:[(0,r.jsx)("strong",{children:"URL:"})," ",(0,r.jsx)("code",{className:"bg-white px-2 py-1 rounded",children:"http://localhost:5678"})]}),(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Default Login:"}),(0,r.jsx)("br",{}),"Username: ",(0,r.jsx)("code",{className:"bg-white px-2 py-1 rounded",children:"admin"}),(0,r.jsx)("br",{}),"Password: ",(0,r.jsx)("code",{className:"bg-white px-2 py-1 rounded",children:"changeme123"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"⭐ Client Document Audit Agent"}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:["The ",(0,r.jsx)("strong",{children:"Audit Agent"})," automatically validates client documents against a compliance checklist using AI. This is perfect for ensuring all required documents are submitted before processing applications."]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"How It Works"}),(0,r.jsxs)("ol",{className:"list-decimal pl-6 space-y-2 text-gray-700 mb-4",children:[(0,r.jsx)("li",{children:'You provide a checklist of required documents (e.g., "Proof of Income", "Bank Statements")'}),(0,r.jsx)("li",{children:"The AI agent searches through all client documents"}),(0,r.jsx)("li",{children:"For each item, it determines: PASS ✅, FAIL ❌, or WARNING ⚠️"}),(0,r.jsx)("li",{children:"It generates a detailed report with recommendations"}),(0,r.jsx)("li",{children:"Results can trigger emails, Slack messages, or other actions"})]}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quick Start"}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Step 1: Import the Workflow"}),(0,r.jsxs)("ol",{className:"text-sm text-gray-700 space-y-1 pl-4",children:[(0,r.jsxs)("li",{children:["1. Open N8N at ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"http://localhost:5678"})]}),(0,r.jsxs)("li",{children:["2. Click ",(0,r.jsx)("strong",{children:"Workflows"})," → ",(0,r.jsx)("strong",{children:"Add Workflow"})]}),(0,r.jsxs)("li",{children:["3. Click the ",(0,r.jsx)("strong",{children:"..."})," menu → ",(0,r.jsx)("strong",{children:"Import from File"})]}),(0,r.jsxs)("li",{children:["4. Navigate to ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"/services/n8n/workflows/client-audit-agent.json"})]}),(0,r.jsxs)("li",{children:["5. Click ",(0,r.jsx)("strong",{children:"Activate"})," to enable the workflow"]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Step 2: Configure Client ID"}),(0,r.jsxs)("ol",{className:"text-sm text-gray-700 space-y-1 pl-4",children:[(0,r.jsxs)("li",{children:["1. Open the ",(0,r.jsx)("strong",{children:"Set Client ID"})," node"]}),(0,r.jsxs)("li",{children:["2. Change ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"client_id"}),' to your client (e.g., "jane-doe")']}),(0,r.jsx)("li",{children:"3. Save the workflow"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Step 3: Run the Audit"}),(0,r.jsxs)("ol",{className:"text-sm text-gray-700 space-y-1 pl-4",children:[(0,r.jsxs)("li",{children:["1. Click ",(0,r.jsx)("strong",{children:"Execute Workflow"})]}),(0,r.jsx)("li",{children:"2. View results in the workflow output"}),(0,r.jsx)("li",{children:"3. Check the generated report files"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Default Audit Checklist"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"The pre-built workflow includes 10 common document checks:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"✅ Required Documents (Must Have)"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,r.jsx)("li",{children:"1. Proof of Income"}),(0,r.jsx)("li",{children:"2. Bank Statements (Last 3 Months)"}),(0,r.jsx)("li",{children:"3. Proof of Address"}),(0,r.jsx)("li",{children:"4. Photo ID"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-yellow-900 mb-2",children:"⚠️ Optional Documents (Nice to Have)"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,r.jsx)("li",{children:"5. Credit Card Statements"}),(0,r.jsx)("li",{children:"6. Loan Agreements"}),(0,r.jsx)("li",{children:"7. Mortgage Statement"}),(0,r.jsx)("li",{children:"8. Employment Contract"}),(0,r.jsx)("li",{children:"9. Budget Planner"}),(0,r.jsx)("li",{children:"10. Creditor Letters"})]})]})]}),(0,r.jsx)("div",{className:"mt-4 bg-yellow-50 p-3 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-yellow-800",children:["\uD83D\uDCA1 ",(0,r.jsx)("strong",{children:"Tip:"})," You can customize this checklist in the ",(0,r.jsx)("strong",{children:"Build Audit Checklist"})," node"]})})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Customizing the Checklist"}),(0,r.jsxs)("p",{className:"text-gray-700 mb-4",children:["Edit the ",(0,r.jsx)("strong",{children:"Build Audit Checklist"})," node to add your own checks:"]}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded text-xs overflow-x-auto mb-4",children:'{\n  "item": "DRO Debt Limit Check",\n  "required": true,\n  "query": "Based on client documents, is total debt under \xa330,000?",\n  "category": "eligibility"\n},\n{\n  "item": "Proof of Residency (2 years)",\n  "required": true,\n  "query": "Has the client lived in England/Wales for 2+ years?",\n  "category": "eligibility"\n}'}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Checklist Item Properties"}),(0,r.jsxs)("ul",{className:"list-disc pl-6 space-y-2 text-gray-700",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"item:"})," Name of the requirement (shown in reports)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"required:"})," ",(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"true"})," = must have (FAIL if missing), ",(0,r.jsx)("code",{className:"bg-gray-100 px-1 rounded",children:"false"})," = optional (WARNING if missing)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"query:"})," AI query to check for this item (be specific!)"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"category:"})," Grouping for organization (financial, identity, debt, eligibility, etc.)"]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Automation Ideas"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDCC5 Schedule Daily Audits"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Replace ",(0,r.jsx)("strong",{children:"Manual Trigger"})," with ",(0,r.jsx)("strong",{children:"Schedule Trigger"})," to run audits every morning at 9 AM. Add a loop to check all active clients."]})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDCE7 Email Notifications"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Add ",(0,r.jsx)("strong",{children:"Send Email"})," node after ",(0,r.jsx)("strong",{children:"Format Failure"})," to automatically email advisors about missing documents with a list of required items."]})]}),(0,r.jsxs)("div",{className:"border-l-4 border-purple-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDCAC Slack Alerts"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Add ",(0,r.jsx)("strong",{children:"Slack"})," node to send messages to #compliance channel when clients are missing required documents."]})]}),(0,r.jsxs)("div",{className:"border-l-4 border-orange-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDD14 Webhook Triggers"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["Replace ",(0,r.jsx)("strong",{children:"Manual Trigger"})," with ",(0,r.jsx)("strong",{children:"Webhook"})," to automatically run audits when clients upload new documents."]})]}),(0,r.jsxs)("div",{className:"border-l-4 border-red-400 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDCCA CRM Integration"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:"Connect to your CRM to automatically create tasks when documents are missing or update client records with audit results."})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"N8N-Compatible Endpoints"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"The Client RAG Service provides special endpoints designed for N8N workflows:"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"POST /n8n/audit-checklist"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"Run a complete audit with structured output"}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,r.jsx)("strong",{children:"Endpoint:"})," ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"http://client-rag-service:8104/n8n/audit-checklist"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"POST /n8n/query"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"Simple document query with clean JSON response"}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,r.jsx)("strong",{children:"Endpoint:"})," ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"http://client-rag-service:8104/n8n/query"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"GET /n8n/workflows"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"List all available workflow templates"}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,r.jsx)("strong",{children:"Endpoint:"})," ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"http://client-rag-service:8104/n8n/workflows"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Testing the API"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Test the endpoints directly before building workflows:"}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded text-xs overflow-x-auto mb-4",children:'# List available workflows\ncurl http://localhost:8104/n8n/workflows\n\n# Run a simple query\ncurl -X POST http://localhost:8104/n8n/query \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "client_id": "john-smith",\n    "query": "Does the client have proof of income?",\n    "return_sources": true\n  }\'\n\n# Run a full audit\ncurl -X POST http://localhost:8104/n8n/audit-checklist \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "client_id": "john-smith",\n    "strict_mode": false,\n    "checklist": [\n      {\n        "item": "Proof of Income",\n        "required": true,\n        "query": "Does the client have proof of income?",\n        "category": "financial"\n      }\n    ]\n  }\''})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Troubleshooting"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-red-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:'Problem: All checks fail with "not found"'}),(0,r.jsxs)("p",{className:"text-sm text-red-800",children:[(0,r.jsx)("strong",{children:"Solution:"})," Verify client_id matches uploaded documents. Check available clients at",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"GET /clients"})]})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Problem: Low confidence scores"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,r.jsx)("strong",{children:"Solution:"}),' Make queries more specific (e.g., "Does the client have payslips from the last 3 months?" instead of "Income proof?")']})]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Problem: Workflow takes too long"}),(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Solution:"})," Reduce checklist size, set ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"return_sources: false"}),", or enable ",(0,r.jsx)("code",{className:"bg-white px-1 rounded",children:"strict_mode: true"})," to fail fast"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Best Practices"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"✅ Do This"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,r.jsx)("li",{children:"• Use clear, specific queries"}),(0,r.jsx)("li",{children:"• Start with small checklists (2-3 items) for testing"}),(0,r.jsx)("li",{children:"• Mark only truly mandatory items as required"}),(0,r.jsx)("li",{children:"• Use meaningful categories"}),(0,r.jsx)("li",{children:"• Test endpoints before building workflows"}),(0,r.jsx)("li",{children:"• Check logs when troubleshooting"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-red-900 mb-2",children:"❌ Don't Do This"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,r.jsx)("li",{children:'• Vague queries like "Documents?"'}),(0,r.jsx)("li",{children:"• Mark everything as required"}),(0,r.jsx)("li",{children:"• Ignore confidence scores"}),(0,r.jsx)("li",{children:"• Skip testing individual endpoints"}),(0,r.jsx)("li",{children:"• Use production data while testing"}),(0,r.jsx)("li",{children:"• Forget to activate workflows"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Additional Resources"}),(0,r.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)(E.Z,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Full Guide:"})," ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:"/services/n8n/workflows/AUDIT_AGENT_GUIDE.md"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Comprehensive 300+ line documentation with examples"})]})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)(E.Z,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Quick Reference:"})," ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:"/N8N_INTEGRATION_SUMMARY.md"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Quick setup and API testing examples"})]})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)(E.Z,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Workflow File:"})," ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:"/services/n8n/workflows/client-audit-agent.json"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Ready-to-import N8N workflow"})]})]}),(0,r.jsxs)("li",{className:"flex items-start",children:[(0,r.jsx)(M.Z,{className:"h-5 w-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"API Docs:"})," ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:"http://localhost:8104/docs"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Interactive API documentation"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"N8N workflows transform manual document checking into automated, consistent, AI-powered audits. The pre-built Audit Agent workflow is ready to use immediately and can be customized for your specific needs."}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900 mb-2",children:"Quick Stats:"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,r.jsxs)("li",{children:["⏱️ ",(0,r.jsx)("strong",{children:"10-minute manual check → 30-second automated audit"})]}),(0,r.jsxs)("li",{children:["\uD83C\uDFAF ",(0,r.jsx)("strong",{children:"100% consistent"})," - Same criteria for all clients"]}),(0,r.jsxs)("li",{children:["\uD83E\uDD16 ",(0,r.jsx)("strong",{children:"AI-powered"})," - Understands document content, not just filenames"]}),(0,r.jsxs)("li",{children:["\uD83D\uDD12 ",(0,r.jsx)("strong",{children:"Privacy-first"})," - All processing happens locally"]}),(0,r.jsxs)("li",{children:["\uD83D\uDCCA ",(0,r.jsx)("strong",{children:"Audit trail"})," - Complete records for compliance"]})]})]})]})]})]})}function en(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Troubleshooting Guide"}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(F.Z,{className:"h-5 w-5 text-yellow-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Quick Diagnostics"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"Most issues can be resolved by checking logs and service status. Start here before diving into specific problems."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Common Issues"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"\uD83D\uDD34 Services Won't Start"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Symptoms:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 mb-3",children:[(0,r.jsx)("li",{children:"Dashboard not accessible"}),(0,r.jsx)("li",{children:"Connection refused errors"}),(0,r.jsx)("li",{children:"Docker containers exiting"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Solutions:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check Docker is running\ndocker ps\n\n# Check service status\ndocker-compose ps\n\n# View logs\ndocker-compose logs --tail=50\n\n# Restart everything\ndocker-compose down\ndocker-compose up -d\n\n# Check system resources\ndocker stats"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Common Causes:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 text-sm",children:[(0,r.jsx)("li",{children:"Insufficient memory (need 16GB+)"}),(0,r.jsx)("li",{children:"Port conflicts (3000, 8100-8103, 11434 already in use)"}),(0,r.jsx)("li",{children:"Docker daemon not running"}),(0,r.jsx)("li",{children:"Corrupted volumes"})]})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"\uD83D\uDD34 Ollama Not Responding"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Symptoms:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 mb-3",children:[(0,r.jsx)("li",{children:'"Ollama service not available"'}),(0,r.jsx)("li",{children:"Notes conversion times out"}),(0,r.jsx)("li",{children:"RAG queries fail"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Solutions:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check Ollama logs\ndocker logs rma-ollama --tail=100\n\n# Check if models are loaded\ndocker exec rma-ollama ollama list\n\n# Pull models if missing\ndocker exec rma-ollama ollama pull llama3.2\ndocker exec rma-ollama ollama pull nomic-embed-text\n\n# Restart Ollama\ndocker restart rma-ollama\n\n# Test Ollama\ncurl http://localhost:11434/api/tags"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"GPU Issues:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm",children:"# Check GPU is accessible\ndocker run --rm --gpus all nvidia/cuda:12.2.0-base-ubuntu22.04 nvidia-smi\n\n# If GPU not found, check NVIDIA Docker runtime\nsudo systemctl restart docker\n\n# Or disable GPU and use CPU only\n# Edit docker-compose.yml, remove 'runtime: nvidia'"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"\uD83D\uDD34 Document Processing Fails"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Symptoms:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 mb-3",children:[(0,r.jsx)("li",{children:"Uploads succeed but no markdown generated"}),(0,r.jsx)("li",{children:'"Processing error" messages'}),(0,r.jsx)("li",{children:"PDFs not converting"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Solutions:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:'# Check doc-processor logs\ndocker logs rma-doc-processor --tail=100\n\n# Verify LLamaParse API key\ndocker exec rma-doc-processor printenv | grep LLAMA_PARSE\n\n# Test Tesseract fallback\ndocker exec rma-doc-processor tesseract --version\n\n# Restart processor\ndocker restart rma-doc-processor\n\n# Test processing\ncurl -X POST http://localhost:8101/process \\\n  -F "file=@test.pdf"'}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Common Causes:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 text-sm",children:[(0,r.jsx)("li",{children:"Invalid LLamaParse API key"}),(0,r.jsx)("li",{children:"File too large (limit: 50MB)"}),(0,r.jsx)("li",{children:"Unsupported file format"}),(0,r.jsx)("li",{children:"Insufficient memory"})]})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"\uD83D\uDD34 RAG/Manuals Not Working"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Symptoms:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 mb-3",children:[(0,r.jsx)("li",{children:'"Vector store not initialized"'}),(0,r.jsx)("li",{children:"Questions return no results"}),(0,r.jsx)("li",{children:"ChromaDB connection errors"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Solutions:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:'# Check ChromaDB\ndocker logs rma-chromadb --tail=50\ncurl http://localhost:8005/api/v1/heartbeat\n\n# Check RAG service\ndocker logs rma-rag-service --tail=50\ncurl http://localhost:8102/stats\n\n# Ingest manuals\n./scripts/ingest-manuals.sh\n\n# Or manually\ncurl -X POST http://localhost:8102/ingest \\\n  -H "Content-Type: application/json" \\\n  -d \'{"documents": ["text"], "filenames": ["test.pdf"]}\'\n\n# Restart services\ndocker restart rma-chromadb rma-rag-service'})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"\uD83D\uDD34 Authentication Issues"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Symptoms:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 mb-3",children:[(0,r.jsx)("li",{children:"Cannot log in"}),(0,r.jsx)("li",{children:'"Invalid token" errors'}),(0,r.jsx)("li",{children:"Session expires immediately"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Solutions:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check JWT_SECRET is set\ncat .env | grep JWT_SECRET\n\n# Default credentials\n# Username: admin\n# Password: admin123\n\n# Reset password (edit upload-service)\ndocker exec -it rma-upload-service /bin/sh\n# Edit app.py USERS dictionary\n\n# Check upload service logs\ndocker logs rma-upload-service --tail=50"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"\uD83D\uDD34 Frontend Can't Connect to Services"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Symptoms:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside text-gray-700 mb-3",children:[(0,r.jsx)("li",{children:"Dashboard loads but features don't work"}),(0,r.jsx)("li",{children:"Network errors in browser console"}),(0,r.jsx)("li",{children:"CORS errors"})]}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Solutions:"})}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check service URLs\ncat .env | grep NEXT_PUBLIC\n\n# For local deployment, should be:\n# NEXT_PUBLIC_NOTES_SERVICE_URL=http://localhost:8100\n# etc.\n\n# Check all services are running\ndocker-compose ps\n\n# Check browser console (F12)\n# Look for failed network requests\n\n# Verify ports are accessible\ncurl http://localhost:8100/health\ncurl http://localhost:8101/health\ncurl http://localhost:8102/health\ncurl http://localhost:8103/health"})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Performance Issues"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"⚠️ Slow Response Times"}),(0,r.jsx)("p",{className:"text-gray-700 mb-2",children:(0,r.jsx)("strong",{children:"Causes & Solutions:"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 text-sm",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"No GPU:"})," LLM inference is slow on CPU",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-1",children:[(0,r.jsx)("li",{children:"Install NVIDIA Docker runtime"}),(0,r.jsx)("li",{children:"Or use smaller model: llama3.2:1b instead of llama3.2"}),(0,r.jsx)("li",{children:"Or increase CPU resources"})]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Insufficient RAM:"})," System swapping to disk",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-1",children:[(0,r.jsx)("li",{children:"Increase Docker memory limit"}),(0,r.jsx)("li",{children:"Close other applications"}),(0,r.jsx)("li",{children:"Use smaller batch sizes"})]})]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Large Documents:"})," OCR takes time",(0,r.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-1",children:[(0,r.jsx)("li",{children:"Expected: 30-60s for 10-page PDF"}),(0,r.jsx)("li",{children:"Reduce image quality in PDFs"}),(0,r.jsx)("li",{children:"Process in batches"})]})]})]}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mt-3",children:"# Monitor resource usage\ndocker stats\n\n# Check swap usage\nfree -h\n\n# If swapping, increase memory:\n# Edit docker-compose.yml\nservices:\n  ollama:\n    mem_limit: 8g\n    memswap_limit: 8g"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"⚠️ Disk Space Issues"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check disk usage\ndf -h\ndocker system df\n\n# Clean up Docker\ndocker system prune -a --volumes\n\n# Backup and clean old uploads\ntar czf backup.tar.gz data/uploads\nrm -rf data/uploads/old_client_folders\n\n# Remove unused models\ndocker exec rma-ollama ollama rm old-model"})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"AWS/Kubernetes Issues"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"☁️ Pods Not Starting"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check pod status\nkubectl get pods -n rma-demo\n\n# Describe problematic pod\nkubectl describe pod POD_NAME -n rma-demo\n\n# Check logs\nkubectl logs POD_NAME -n rma-demo\n\n# Common issues:\n# - ImagePullBackOff: Check ECR permissions\n# - CrashLoopBackOff: Check logs for errors\n# - Pending: Insufficient resources or GPU nodes not ready"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"☁️ GPU Node Issues"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:"# Check GPU nodes\nkubectl get nodes -l workload=gpu\n\n# Check NVIDIA plugin\nkubectl get pods -n kube-system | grep nvidia\n\n# If not found, reinstall\nkubectl apply -f https://raw.githubusercontent.com/NVIDIA/k8s-device-plugin/v0.14.0/nvidia-device-plugin.yml\n\n# Test GPU\nkubectl run gpu-test --rm -it --restart=Never \\\n  --image=nvidia/cuda:12.2.0-base-ubuntu22.04 \\\n  --limits=nvidia.com/gpu=1 \\\n  -- nvidia-smi"})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"☁️ Load Balancer Not Accessible"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm mb-2",children:'# Check service\nkubectl get svc frontend -n rma-demo\n\n# Check security groups\naws ec2 describe-security-groups \\\n  --filters "Name=tag:kubernetes.io/cluster/rma-demo-cluster,Values=owned"\n\n# Should allow:\n# - Port 80 (HTTP)\n# - Port 443 (HTTPS)\n# - Your IP for management\n\n# Check Load Balancer health\naws elbv2 describe-target-health \\\n  --target-group-arn YOUR_TARGET_GROUP_ARN'})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Getting Help"}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Before Asking for Help"}),(0,r.jsx)("p",{className:"text-blue-800 text-sm mb-2",children:"Gather this information:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-blue-800 text-sm space-y-1",children:[(0,r.jsx)("li",{children:"Deployment type (local Docker, AWS EKS, etc.)"}),(0,r.jsx)("li",{children:"Error messages (full text)"}),(0,r.jsx)("li",{children:"Recent logs from affected services"}),(0,r.jsx)("li",{children:"Steps to reproduce the issue"}),(0,r.jsx)("li",{children:"System specifications (RAM, CPU, GPU)"}),(0,r.jsx)("li",{children:"Recent changes made before issue appeared"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Useful Diagnostic Commands"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded overflow-x-auto text-sm",children:"# Full system status\ndocker-compose ps\ndocker stats --no-stream\ndf -h\nfree -h\n\n# All service logs\ndocker-compose logs --tail=100 > all-logs.txt\n\n# Service health checks\ncurl http://localhost:8100/health\ncurl http://localhost:8101/health\ncurl http://localhost:8102/health\ncurl http://localhost:8103/health\n\n# Network connectivity\ndocker network inspect rma-network\n\n# For AWS/K8s\nkubectl get all -n rma-demo\nkubectl top nodes\nkubectl top pods -n rma-demo"})]})]})}function ei(){return(0,r.jsxs)("div",{className:"prose max-w-none",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Distributed Worker Deployment"}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"What are Distributed Workers?"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Workers are compute nodes that can be deployed anywhere - different cities, behind firewalls, or VPNs - and automatically register with the central system using Cloudflare Tunnels."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Quick Start"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Option 1: Public Network (Simplest)"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"If your worker has a public IP or is on the same network as the coordinator:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-x-auto text-sm mb-6",children:"docker run -d \\\n  --name rma-worker \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e USE_TUNNEL=false \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Option 2: Behind Firewall (Recommended)"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"For workers behind firewalls, VPNs, or NAT - uses managed Cloudflare Tunnels:"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-x-auto text-sm mb-6",children:'docker run -d \\\n  --name rma-worker \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e CLOUDFLARE_API_TOKEN="your_token_here" \\\n  -e CLOUDFLARE_ACCOUNT_ID="your_account_id" \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest'}),(0,r.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-yellow-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Need Cloudflare Credentials?"}),(0,r.jsx)("p",{className:"text-sm text-yellow-700",children:"See the section below for step-by-step instructions on getting your API token and account ID."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Getting Cloudflare Credentials"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Step 1: Get API Token"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-4",children:[(0,r.jsxs)("li",{children:["Go to ",(0,r.jsx)("a",{href:"https://dash.cloudflare.com/profile/api-tokens",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Cloudflare API Tokens"})]}),(0,r.jsxs)("li",{children:["Click ",(0,r.jsx)("strong",{children:'"Create Token"'})]}),(0,r.jsxs)("li",{children:["Select ",(0,r.jsx)("strong",{children:'"Create Additional Tunnels"'})," template"]}),(0,r.jsxs)("li",{children:["Click ",(0,r.jsx)("strong",{children:'"Use template"'})]}),(0,r.jsx)("li",{children:"Review permissions (should include Cloudflare Tunnel:Edit)"}),(0,r.jsxs)("li",{children:["Click ",(0,r.jsx)("strong",{children:'"Continue to summary"'})]}),(0,r.jsxs)("li",{children:["Click ",(0,r.jsx)("strong",{children:'"Create Token"'})]}),(0,r.jsx)("li",{children:'Copy the token (starts with "ey...")'})]}),(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-red-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Security Warning"}),(0,r.jsx)("p",{className:"text-sm text-red-700",children:"Never commit API tokens to Git or bake them into container images. Always pass them as environment variables at runtime."})]})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Step 2: Get Account ID"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-3 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:["Go to ",(0,r.jsx)("a",{href:"https://dash.cloudflare.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 underline",children:"Cloudflare Dashboard"})]}),(0,r.jsx)("li",{children:"Select any domain (or Workers & Pages)"}),(0,r.jsxs)("li",{children:["Look in the right sidebar for ",(0,r.jsx)("strong",{children:'"Account ID"'})]}),(0,r.jsx)("li",{children:"Click the copy icon to copy the ID"})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Deployment Options"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Docker Deployment"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-x-auto text-sm mb-6",children:'# Basic deployment\ndocker run -d \\\n  --name rma-worker \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e CLOUDFLARE_API_TOKEN="${CF_TOKEN}" \\\n  -e CLOUDFLARE_ACCOUNT_ID="${CF_ACCOUNT_ID}" \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest\n\n# GPU worker (for AI services)\ndocker run -d \\\n  --name rma-gpu-worker \\\n  --runtime nvidia \\\n  --gpus all \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e CLOUDFLARE_API_TOKEN="${CF_TOKEN}" \\\n  -e CLOUDFLARE_ACCOUNT_ID="${CF_ACCOUNT_ID}" \\\n  -e WORKER_TYPE=gpu \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest'}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Docker Compose Deployment"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-x-auto text-sm mb-6",children:"version: '3.8'\nservices:\n  worker:\n    image: ghcr.io/st7ma784/cmacatalyst/universal-worker:latest\n    environment:\n      COORDINATOR_URL: https://api.rmatool.org.uk\n      CLOUDFLARE_API_TOKEN: ${CLOUDFLARE_API_TOKEN}\n      CLOUDFLARE_ACCOUNT_ID: ${CLOUDFLARE_ACCOUNT_ID}\n      WORKER_TYPE: cpu\n    restart: unless-stopped\n\n# Then run with:\n# CF_TOKEN=xxx CF_ACCOUNT_ID=yyy docker-compose up -d"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"Kubernetes Deployment"}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-x-auto text-sm mb-6",children:'apiVersion: v1\nkind: Secret\nmetadata:\n  name: cloudflare-credentials\ntype: Opaque\nstringData:\n  api-token: "your-api-token"\n  account-id: "your-account-id"\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: rma-worker\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: rma-worker\n  template:\n    metadata:\n      labels:\n        app: rma-worker\n    spec:\n      containers:\n      - name: worker\n        image: ghcr.io/st7ma784/cmacatalyst/universal-worker:latest\n        env:\n        - name: COORDINATOR_URL\n          value: "https://api.rmatool.org.uk"\n        - name: CLOUDFLARE_API_TOKEN\n          valueFrom:\n            secretKeyRef:\n              name: cloudflare-credentials\n              key: api-token\n        - name: CLOUDFLARE_ACCOUNT_ID\n          valueFrom:\n            secretKeyRef:\n              name: cloudflare-credentials\n              key: account-id'}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Environment Variables Reference"}),(0,r.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,r.jsxs)("table",{className:"min-w-full bg-white border border-gray-300",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left text-sm font-semibold text-gray-700",children:"Variable"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left text-sm font-semibold text-gray-700",children:"Required"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left text-sm font-semibold text-gray-700",children:"Description"}),(0,r.jsx)("th",{className:"px-4 py-2 border-b text-left text-sm font-semibold text-gray-700",children:"Example"})]})}),(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-900",children:"COORDINATOR_URL"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Yes"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Central API endpoint"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-600",children:"https://api.rmatool.org.uk"})]}),(0,r.jsxs)("tr",{className:"bg-gray-50",children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-900",children:"CLOUDFLARE_API_TOKEN"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Optional*"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"API token for managed tunnels"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-600",children:"eyJh...xyz"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-900",children:"CLOUDFLARE_ACCOUNT_ID"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Optional*"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Cloudflare account ID"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-600",children:"abc123..."})]}),(0,r.jsxs)("tr",{className:"bg-gray-50",children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-900",children:"USE_TUNNEL"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"No"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Enable/disable tunnels"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-600",children:"true (default)"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-900",children:"TUNNEL_URL"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"No"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Pre-configured tunnel URL"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-600",children:"https://worker.example.com"})]}),(0,r.jsxs)("tr",{className:"bg-gray-50",children:[(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-900",children:"WORKER_TYPE"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"No"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm text-gray-700",children:"Worker capabilities"}),(0,r.jsx)("td",{className:"px-4 py-2 border-b text-sm font-mono text-gray-600",children:"cpu, gpu, edge"})]})]})]})}),(0,r.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-blue-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"* Required if worker is behind a firewall, VPN, or NAT. If both API token and account ID are provided, a managed tunnel will be created. Otherwise, a quick tunnel will be attempted (rate-limited)."})})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"How It Works"}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{className:"border-l-4 border-blue-500 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"1. Worker Startup"}),(0,r.jsx)("p",{className:"text-gray-700",children:"When a worker starts, it checks environment variables to determine tunnel strategy."})]}),(0,r.jsxs)("div",{className:"border-l-4 border-green-500 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"2. Tunnel Creation"}),(0,r.jsx)("p",{className:"text-gray-700",children:"If credentials are provided, creates a managed tunnel (worker-hostname). Otherwise, falls back to quick tunnel."})]}),(0,r.jsxs)("div",{className:"border-l-4 border-purple-500 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"3. Registration"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Worker registers with coordinator using tunnel URL: https://tunnel-id.cfargotunnel.com"})]}),(0,r.jsxs)("div",{className:"border-l-4 border-orange-500 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"4. Service Assignment"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Coordinator assigns services based on worker capabilities (GPU workers get AI services)."})]}),(0,r.jsxs)("div",{className:"border-l-4 border-red-500 pl-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"5. Heartbeat"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Worker sends heartbeat every 60 seconds to keep registration alive."})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Troubleshooting"}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Worker Not Registering"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,r.jsxs)("li",{children:["Check worker logs: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"docker logs rma-worker"})]}),(0,r.jsx)("li",{children:"Verify COORDINATOR_URL is correct (should be https://api.rmatool.org.uk)"}),(0,r.jsxs)("li",{children:["Check network connectivity: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"curl https://api.rmatool.org.uk/api/edge/health"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Tunnel Creation Failed - EOF Error"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,r.jsx)("li",{children:"This means quick tunnels are blocked by your network/firewall"}),(0,r.jsx)("li",{children:"Solution: Use managed tunnels with API token and account ID"}),(0,r.jsx)("li",{children:"Managed tunnels authenticate and work through most firewalls"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Invalid API Token"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,r.jsx)("li",{children:'Verify token is correct (should start with "ey")'}),(0,r.jsx)("li",{children:'Check token permissions include "Cloudflare Tunnel: Edit"'}),(0,r.jsx)("li",{children:"Token might be expired - create a new one"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Worker Disappears After 5 Minutes"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,r.jsx)("li",{children:"This is fixed in the latest image - update to latest:"}),(0,r.jsx)("li",{children:(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"})}),(0,r.jsx)("li",{children:"Worker now sends heartbeats automatically to stay registered"})]})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Multiple Workers"}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"You can deploy multiple workers with the same API token. Each worker will create its own unique tunnel."}),(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-4 rounded overflow-x-auto text-sm mb-6",children:'# Deploy worker 1 in London\ndocker run -d --name worker-london \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e CLOUDFLARE_API_TOKEN="${CF_TOKEN}" \\\n  -e CLOUDFLARE_ACCOUNT_ID="${CF_ACCOUNT_ID}" \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest\n\n# Deploy worker 2 in Manchester\ndocker run -d --name worker-manchester \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e CLOUDFLARE_API_TOKEN="${CF_TOKEN}" \\\n  -e CLOUDFLARE_ACCOUNT_ID="${CF_ACCOUNT_ID}" \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest\n\n# Deploy GPU worker in Birmingham\ndocker run -d --name worker-birmingham-gpu \\\n  --runtime nvidia --gpus all \\\n  -e COORDINATOR_URL=https://api.rmatool.org.uk \\\n  -e CLOUDFLARE_API_TOKEN="${CF_TOKEN}" \\\n  -e CLOUDFLARE_ACCOUNT_ID="${CF_ACCOUNT_ID}" \\\n  -e WORKER_TYPE=gpu \\\n  ghcr.io/st7ma784/cmacatalyst/universal-worker:latest'}),(0,r.jsx)("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(L.Z,{className:"h-5 w-5 text-green-400 mr-3 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Automatic Load Balancing"}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"The system automatically distributes work across all registered workers. GPU workers are prioritized for AI/ML tasks, CPU workers handle general processing."})]})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Security Best Practices"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mb-6",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Never"})," commit API tokens to Git repositories"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Never"})," bake credentials into container images"]}),(0,r.jsx)("li",{children:"Use environment variables or secrets management (Kubernetes secrets, AWS Secrets Manager, etc.)"}),(0,r.jsx)("li",{children:"Rotate API tokens periodically (every 90 days recommended)"}),(0,r.jsx)("li",{children:"Use dedicated service accounts for production deployments"}),(0,r.jsx)("li",{children:"Monitor worker logs for suspicious activity"}),(0,r.jsxs)("li",{children:["Keep worker images up to date: ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"docker pull ghcr.io/st7ma784/cmacatalyst/universal-worker:latest"})]})]}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mt-8 mb-4",children:"Need Help?"}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-gray-700 mb-3",children:"If you're having issues deploying distributed workers:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[(0,r.jsxs)("li",{children:["Check the ",(0,r.jsx)("strong",{children:"Troubleshooting"})," section in this documentation"]}),(0,r.jsx)("li",{children:"Review worker logs for error messages"}),(0,r.jsx)("li",{children:"Verify your Cloudflare credentials are correct"}),(0,r.jsx)("li",{children:"Ensure your firewall allows outbound HTTPS connections"}),(0,r.jsx)("li",{children:"Contact support with worker logs and deployment details"})]})]})]})}var ec=t(7211),ed=t(5159),eo=t(3441);let ex="https://api.rmatool.org.uk/service/rag",em=()=>{try{let e=new URL(ex);if("localhost"===e.hostname||"127.0.0.1"===e.hostname){let s=window.location.hostname;if(s&&"localhost"!==s&&"127.0.0.1"!==s)return"".concat(window.location.protocol,"//").concat(s,":").concat(e.port)}return ex}catch(e){return ex}};function eh(){let[e,s]=(0,l.useState)(null),[t,a]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),[o,x]=(0,l.useState)(""),[m,h]=(0,l.useState)(new Set),[u,b]=(0,l.useState)(50),[p,j]=(0,l.useState)(0),[y,N]=(0,l.useState)("");(0,l.useEffect)(()=>{f(),v()},[]);let f=async()=>{try{let e=await fetch("".concat(em(),"/debug/sources"));if(!e.ok)throw Error("Failed to load sources");let s=await e.json();a(s)}catch(e){console.error("Error loading sources:",e)}},v=async(e,t)=>{i(!0),d("");try{let r=new URLSearchParams({limit:u.toString(),offset:(null!=t?t:p).toString()});e&&r.append("source",e);let l=await fetch("".concat(em(),"/debug/documents?").concat(r));if(!l.ok)throw Error("Failed to load documents");let a=await l.json();s(a)}catch(e){d(e instanceof Error?e.message:"Failed to load debug data")}finally{i(!1)}},w=e=>{x(e),j(0),v(e,0)},S=e=>{let s=new Set(m);s.has(e)?s.delete(e):s.add(e),h(s)},_=(null==e?void 0:e.documents.filter(e=>""===y||e.text.toLowerCase().includes(y.toLowerCase())||e.source.toLowerCase().includes(y.toLowerCase())))||[];return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)(k.Zb,{children:[(0,r.jsxs)(k.Ol,{children:[(0,r.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"h-5 w-5"}),"Vector Store Debug Viewer"]}),(0,r.jsx)(k.SZ,{children:"View raw chunks stored in the vector database to verify manual content"})]}),(0,r.jsxs)(k.aY,{className:"space-y-4",children:[c&&(0,r.jsxs)(A.bZ,{variant:"destructive",children:[(0,r.jsx)(V.Z,{className:"h-4 w-4"}),(0,r.jsx)(A.X,{children:c})]}),(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(D._,{htmlFor:"search",children:"Search in chunks"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(R.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,r.jsx)(C.I,{id:"search",type:"text",value:y,onChange:e=>N(e.target.value),placeholder:"Search text in chunks...",className:"pl-10"})]})]}),(0,r.jsxs)(g.z,{onClick:()=>{f(),v(o||void 0)},variant:"outline",className:"flex items-center gap-2",children:[(0,r.jsx)(B.Z,{className:"h-4 w-4 ".concat(n?"animate-spin":"")}),"Refresh"]})]}),t&&t.sources.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(D._,{className:"flex items-center gap-2",children:[(0,r.jsx)(ec.Z,{className:"h-4 w-4"}),"Filter by Source Manual"]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsxs)(g.z,{size:"sm",variant:""===o?"default":"outline",onClick:()=>w(""),children:["All Sources (",t.total_sources,")"]}),t.sources.map(e=>(0,r.jsx)(g.z,{size:"sm",variant:o===e?"default":"outline",onClick:()=>w(e),children:e},e))]})]}),e&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-semibold text-blue-900",children:["Total Chunks: ",e.total]}),(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Showing ",p+1," - ",Math.min(p+u,e.total)," of ",e.total,o&&" (filtered by: ".concat(o,")")]}),y&&(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:["Found ",_.length," matching chunks"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(g.z,{size:"sm",variant:"outline",onClick:()=>{let e=Math.max(0,p-u);j(e),v(o||void 0,e)},disabled:0===p||n,children:"Previous"}),(0,r.jsx)(g.z,{size:"sm",variant:"outline",onClick:()=>{let e=p+u;j(e),v(o||void 0,e)},disabled:p+u>=e.total||n,children:"Next"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:_.map(e=>{let s=m.has(e.id);return(0,r.jsxs)(k.Zb,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>S(e.id),children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,r.jsx)(E.Z,{className:"h-5 w-5 text-blue-600 mt-1 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:e.source}),(0,r.jsxs)("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:["Chunk ",e.chunk]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2",children:e.preview}),!s&&e.text.length>200&&(0,r.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Click to view full text (",e.text.length," characters)"]})]})]}),s?(0,r.jsx)(ed.Z,{className:"h-5 w-5 text-gray-400 flex-shrink-0"}):(0,r.jsx)(eo.Z,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]})}),s&&(0,r.jsxs)("div",{className:"border-t bg-gray-50 p-4",children:[(0,r.jsx)(D._,{className:"text-xs text-gray-600 mb-2 block",children:"Full Chunk Text:"}),(0,r.jsx)("pre",{className:"text-sm whitespace-pre-wrap bg-white p-4 rounded border overflow-auto max-h-96",children:e.text}),(0,r.jsxs)("div",{className:"mt-3 flex gap-4 text-xs text-gray-600",children:[(0,r.jsxs)("span",{children:["ID: ",e.id]}),(0,r.jsxs)("span",{children:["Length: ",e.text.length," chars"]})]})]})]},e.id)})}),0===_.length&&(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(O.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsxs)("p",{children:["No chunks found",y&&" matching your search"]})]})]}),!e&&!n&&(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(V.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{children:"No vector store data available"}),(0,r.jsx)("p",{className:"text-sm",children:"Ingest some manuals first"})]})]})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)(k.ll,{children:"How to Use This Debug View"})}),(0,r.jsxs)(k.aY,{className:"space-y-3 text-sm text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Purpose:"})," This view shows the actual text chunks stored in the vector database that are used to answer questions."]}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,r.jsx)("li",{children:"Each chunk is a piece of text from your training manuals"}),(0,r.jsx)("li",{children:"When you ask a question, the system searches these chunks for relevant information"}),(0,r.jsx)("li",{children:"If answers are wrong, check if the chunks contain the correct information"}),(0,r.jsx)("li",{children:"Use filters to narrow down to specific manuals"}),(0,r.jsx)("li",{children:"Search to find specific text or figures"})]}),(0,r.jsxs)(A.bZ,{className:"bg-yellow-50 border-yellow-200",children:[(0,r.jsx)(V.Z,{className:"h-4 w-4 text-yellow-600"}),(0,r.jsxs)(A.X,{className:"text-yellow-800",children:[(0,r.jsx)("strong",{children:"Debugging Tips:"})," If you get wrong answers, search for the specific figures or facts mentioned. If they're not in any chunk, the manuals may be incomplete. If they ARE in chunks but still wrong, the AI might be hallucinating or misinterpreting."]})]})]})]})]})}var eu=t(4375);let eg=(0,t(9769).j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eb(e){var{className:s,variant:t}=e,l=(0,c._)(e,["className","variant"]);return(0,r.jsx)("div",(0,i._)({className:(0,o.cn)(eg({variant:t}),s)},l))}var ep=t(5999);let ej={coordinator:"#3B82F6",gpu_worker:"#10B981",service_worker:"#F59E0B",data_worker:"#8B5CF6",edge_worker:"#EC4899",offline:"#6B7280"},ey={healthy:"#10B981",degraded:"#F59E0B",offline:"#EF4444"};var eN=e=>{var s,t,a;let{topologyData:n,onNodeClick:c}=e,d=(0,l.useRef)(null),[o,x]=(0,l.useState)(null),m=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!d.current||!n.nodes.length)return;let e=ep.Ys(d.current);e.selectAll("*").remove();let s=d.current.clientWidth,t=d.current.clientHeight,r=n.nodes.map(e=>(0,eu._)((0,i._)({},e),{id:e.node_id})),l=n.connections.map(e=>({source:e.source_id,target:e.target_id,type:e.type})),a=ep.A4v(r).force("link",ep.Fsl(l).id(e=>e.id).distance(150)).force("charge",ep.q5i().strength(-600)).force("center",ep.wqt(s/2,t/2)).force("collision",ep.Hh().radius(50));m.current=a;let o=e.append("g");e.append("defs").selectAll("marker").data(["dht_connection","service_route"]).enter().append("marker").attr("id",e=>"arrow-".concat(e)).attr("markerWidth",10).attr("markerHeight",10).attr("refX",40).attr("refY",3).attr("orient","auto").append("polygon").attr("points","0 0, 10 3, 0 6").attr("fill",e=>"dht_connection"===e?"#666":"#3B82F6");let h=o.selectAll(".link").data(l).enter().append("line").attr("class","link").attr("stroke",e=>"dht_connection"===e.type?"#999":"#3B82F6").attr("stroke-opacity",.6).attr("stroke-width",e=>"dht_connection"===e.type?2:3).attr("stroke-dasharray",e=>"service_route"===e.type?"5,5":"0").attr("marker-end",e=>"url(#arrow-".concat(e.type,")")),u=o.selectAll(".node-group").data(r).enter().append("g").attr("class","node-group").style("cursor","pointer").on("click",(e,s)=>{x(s),null==c||c(s)});u.append("circle").attr("class","status-ring").attr("r",35).attr("fill","none").attr("stroke",e=>ey[e.status||"healthy"]).attr("stroke-width",3).attr("opacity",.8),u.append("circle").attr("class","node").attr("r",30).attr("fill",e=>{var s,t,r,l;return"offline"===e.status?ej.offline:"coordinator"===e.node_type?ej.coordinator:(null===(s=e.services)||void 0===s?void 0:s.includes("vllm"))||(null===(t=e.capabilities)||void 0===t?void 0:t.gpu_type)?ej.gpu_worker:(null===(r=e.services)||void 0===r?void 0:r.some(e=>["rag","ner","notes"].includes(e)))?ej.service_worker:(null===(l=e.services)||void 0===l?void 0:l.some(e=>["postgres","neo4j","redis"].includes(e)))?ej.data_worker:ej.edge_worker}).attr("stroke","#fff").attr("stroke-width",2),u.append("text").attr("class","node-icon").attr("text-anchor","middle").attr("dy","0.35em").attr("font-size","20px").attr("fill","#fff").attr("font-weight","bold").attr("pointer-events","none").text(e=>"coordinator"===e.node_type?"C":"W"),u.append("text").attr("class","node-label").attr("text-anchor","middle").attr("dy",45).attr("font-size","11px").attr("fill","#374151").attr("font-weight","600").attr("pointer-events","none").text(e=>e.node_id.substring(0,12)),u.filter(e=>void 0!==e.load).append("rect").attr("x",-20).attr("y",50).attr("width",40).attr("height",4).attr("fill","#E5E7EB").attr("rx",2),u.filter(e=>void 0!==e.load).append("rect").attr("x",-20).attr("y",50).attr("width",e=>40*(e.load||0)).attr("height",4).attr("fill",e=>{let s=e.load||0;return s>.8?"#EF4444":s>.5?"#F59E0B":"#10B981"}).attr("rx",2),u.append("title").text(e=>{var s;let t="".concat(e.node_id,"\nType: ").concat(e.node_type,"\nStatus: ").concat(e.status||"unknown");return e.location&&(t+="\nLocation: ".concat(e.location)),e.services&&(t+="\nServices: ".concat(e.services.join(", "))),void 0!==e.load&&(t+="\nLoad: ".concat((100*e.load).toFixed(0),"%")),(null===(s=e.capabilities)||void 0===s?void 0:s.gpu_type)&&(t+="\nGPU: ".concat(e.capabilities.gpu_type)),t});let g=ep.sPX().scaleExtent([.5,3]).on("zoom",e=>{o.attr("transform",e.transform)});return e.call(g),a.on("tick",()=>{h.attr("x1",e=>e.source.x||0).attr("y1",e=>e.source.y||0).attr("x2",e=>e.target.x||0).attr("y2",e=>e.target.y||0),u.attr("transform",e=>"translate(".concat(e.x||0,",").concat(e.y||0,")"))}),()=>{a.stop()}},[n,c]),(0,r.jsxs)("div",{className:"space-y-4",children:[n.stats&&(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.stats.total_nodes}),(0,r.jsx)("div",{className:"text-xs text-blue-700",children:"Total Nodes"})]}),(0,r.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:n.stats.coordinator_count}),(0,r.jsx)("div",{className:"text-xs text-indigo-700",children:"Coordinators"})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n.stats.worker_count}),(0,r.jsx)("div",{className:"text-xs text-green-700",children:"Workers"})]}),(0,r.jsxs)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:n.stats.healthy_count}),(0,r.jsx)("div",{className:"text-xs text-emerald-700",children:"Healthy Nodes"})]})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsxs)(k.Ol,{children:[(0,r.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),"DHT Network Topology"]}),(0,r.jsx)(k.SZ,{children:"Real-time visualization of distributed hash table peer connections"})]}),(0,r.jsxs)(k.aY,{children:[(0,r.jsx)("svg",{ref:d,style:{width:"100%",height:"600px",border:"1px solid #E5E7EB",borderRadius:"8px",backgroundColor:"#FAFAFA"}}),(0,r.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ej.coordinator}}),(0,r.jsx)("span",{children:"Coordinator"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ej.gpu_worker}}),(0,r.jsx)("span",{children:"GPU Worker"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ej.service_worker}}),(0,r.jsx)("span",{children:"Service Worker"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ej.data_worker}}),(0,r.jsx)("span",{children:"Data Worker"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:ej.edge_worker}}),(0,r.jsx)("span",{children:"Edge Worker"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 border-2 rounded-full",style:{borderColor:ey.healthy}}),(0,r.jsx)("span",{children:"Healthy"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 border-2 rounded-full",style:{borderColor:ey.degraded}}),(0,r.jsx)("span",{children:"Degraded"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 border-2 rounded-full",style:{borderColor:ey.offline}}),(0,r.jsx)("span",{children:"Offline"})]})]})]})]}),o&&(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{children:(0,r.jsxs)(k.ll,{className:"text-lg",children:["Node Details: ",o.node_id]})}),(0,r.jsx)(k.aY,{children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Type:"}),(0,r.jsx)(eb,{className:"ml-2",variant:"outline",children:o.node_type})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Status:"}),(0,r.jsx)(eb,{className:"ml-2",style:{backgroundColor:ey[o.status||"healthy"],color:"white"},children:o.status||"unknown"})]}),o.location&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Location:"}),(0,r.jsx)("span",{className:"ml-2",children:o.location})]}),o.tunnel_url&&(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Tunnel URL:"}),(0,r.jsx)("code",{className:"ml-2 text-xs bg-gray-100 px-2 py-1 rounded",children:o.tunnel_url})]}),o.services&&o.services.length>0&&(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Services:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:o.services.map((e,s)=>(0,r.jsx)(eb,{variant:"secondary",children:e},s))})]}),void 0!==o.load&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"Load:"}),(0,r.jsxs)("span",{className:"ml-2",children:[(100*o.load).toFixed(0),"%"]})]}),(null===(s=o.capabilities)||void 0===s?void 0:s.gpu_type)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"GPU:"}),(0,r.jsx)("span",{className:"ml-2",children:o.capabilities.gpu_type})]}),(null===(t=o.capabilities)||void 0===t?void 0:t.cpu_cores)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"CPU Cores:"}),(0,r.jsx)("span",{className:"ml-2",children:o.capabilities.cpu_cores})]}),(null===(a=o.capabilities)||void 0===a?void 0:a.ram)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"RAM:"}),(0,r.jsx)("span",{className:"ml-2",children:o.capabilities.ram})]})]})})]})]})},ef=t(7976),ev=t(1524),ew=t(1483),ek=t(3329),eC=t(4059),eD=t(9733),eA=t(6260),eS=t(5032),e_=t(9496);let eR="https://edge-1.rmatool.org.uk";function eE(){let[e,s]=(0,l.useState)([]),[t,a]=(0,l.useState)(null),[n,c]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[b,p]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!0),[N,f]=(0,l.useState)(null),[v,w]=(0,l.useState)(new Date),[C,D]=(0,l.useState)("workers"),A=e=>t?t.by_tier?t.by_tier[e.toString()]||0:t.workers_by_tier&&t.workers_by_tier[1===e?"gpu_workers":2===e?"service_workers":3===e?"data_workers":"edge_workers"]||0:0,S=e=>(null==t?void 0:t.average_load_by_tier)&&t.average_load_by_tier[1===e?"gpu_workers":2===e?"service_workers":3===e?"data_workers":"edge_workers"]||0,_=async()=>{try{var e,t;let[r,l,n]=await Promise.all([fetch("".concat(eR,"/api/admin/workers")),fetch("".concat(eR,"/api/admin/stats")),fetch("".concat(eR,"/api/dht/stats")).catch(()=>null)]);if(!r.ok||!l.ok)throw Error("Failed to fetch system data");let i=await r.json(),d=await l.json();if(n&&n.ok){let e=await n.json();p(e.dht_enabled||!1)}let o=Array.isArray(i)?i:[];s(o),a(d);let x=o.filter(e=>"healthy"===e.status).length,m=o.filter(e=>"degraded"===e.status).length,h=o.filter(e=>"offline"===e.status).length;c({overall_status:0===o.length?"error":x===o.length?"healthy":"degraded",workers_by_status:{healthy:x,degraded:m,offline:h},has_minimum_workers:{gpu_workers:((null==d?void 0:null===(e=d.by_tier)||void 0===e?void 0:e["1"])||0)>0,service_workers:((null==d?void 0:null===(t=d.by_tier)||void 0===t?void 0:t["2"])||0)>0}}),f(null),w(new Date)}catch(e){f(e instanceof Error?e.message:"Unknown error")}finally{y(!1)}},R=async()=>{try{let e=await fetch("".concat(eR,"/api/dht/topology"));if(e.ok){let s=await e.json();o(s)}}catch(e){console.error("Failed to fetch DHT topology:",e)}};(0,l.useEffect)(()=>{_();let e=setInterval(_,1e4);return()=>clearInterval(e)},[]),(0,l.useEffect)(()=>{if(b&&"topology"===C){R();let e=setInterval(R,5e3);return()=>clearInterval(e)}},[b,C]);let E=e=>{switch(e){case"healthy":return(0,r.jsx)(ef.Z,{className:"h-4 w-4 text-green-600"});case"degraded":return(0,r.jsx)(ev.Z,{className:"h-4 w-4 text-yellow-600"});case"offline":return(0,r.jsx)(ew.Z,{className:"h-4 w-4 text-red-600"});default:return null}},P=e=>{switch(e){case"healthy":return"bg-green-100 text-green-800";case"degraded":return"bg-yellow-100 text-yellow-800";case"offline":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=e=>{switch(e){case 1:return(0,r.jsx)(ek.Z,{className:"h-4 w-4"});case 2:return(0,r.jsx)(W.Z,{className:"h-4 w-4"});case 3:return(0,r.jsx)(O.Z,{className:"h-4 w-4"});case 4:return(0,r.jsx)(I.Z,{className:"h-4 w-4"});default:return null}},U=e=>{switch(e){case 1:return"GPU Worker";case 2:return"Service Worker";case 3:return"Data Worker";case 4:return"Edge Worker";default:return"Unknown"}},L=e=>e>.8?"bg-red-500":e>.5?"bg-yellow-500":"bg-green-500";return j?(0,r.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,r.jsx)(B.Z,{className:"h-8 w-8 animate-spin text-blue-600"}),(0,r.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading system status..."})]}):N?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)(ew.Z,{className:"h-5 w-5 text-red-600"}),(0,r.jsx)("h3",{className:"font-semibold text-red-900",children:"Connection Error"})]}),(0,r.jsx)("p",{className:"text-red-700 mb-4",children:N}),(0,r.jsxs)("p",{className:"text-sm text-red-600 mb-4",children:["Make sure the coordinator service is running at: ",(0,r.jsx)("code",{className:"bg-red-100 px-2 py-1 rounded",children:eR})]}),(0,r.jsxs)(g.z,{onClick:_,variant:"outline",size:"sm",children:[(0,r.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"System Orchestrator"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Distributed worker pool monitoring and management"}),b&&(0,r.jsxs)(eb,{className:"mt-2 bg-blue-500 text-white",children:[(0,r.jsx)(G.Z,{className:"h-3 w-3 mr-1"}),"DHT Enabled"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Last updated: ",v.toLocaleTimeString()]}),(0,r.jsxs)(g.z,{onClick:_,variant:"outline",size:"sm",children:[(0,r.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),(0,r.jsxs)(x,{value:C,onValueChange:D,className:"w-full",children:[(0,r.jsxs)(m,{className:"grid w-full grid-cols-2",children:[(0,r.jsxs)(h,{value:"workers",className:"flex items-center gap-2",children:[(0,r.jsx)(eC.Z,{className:"h-4 w-4"}),"Worker Pool"]}),(0,r.jsxs)(h,{value:"topology",className:"flex items-center gap-2",disabled:!b,children:[(0,r.jsx)(G.Z,{className:"h-4 w-4"}),"DHT Topology ",!b&&"(Disabled)"]})]}),(0,r.jsxs)(u,{value:"workers",className:"space-y-6 mt-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsx)(k.ll,{className:"text-sm font-medium text-gray-600",children:"System Health"})}),(0,r.jsx)(k.aY,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(null==n?void 0:n.overall_status)==="healthy"?(0,r.jsx)(ef.Z,{className:"h-8 w-8 text-green-600"}):(null==n?void 0:n.overall_status)==="degraded"?(0,r.jsx)(ev.Z,{className:"h-8 w-8 text-yellow-600"}):(0,r.jsx)(ew.Z,{className:"h-8 w-8 text-red-600"}),(0,r.jsx)("span",{className:"text-2xl font-bold capitalize",children:(null==n?void 0:n.overall_status)||"Unknown"})]})})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsx)(k.ll,{className:"text-sm font-medium text-gray-600",children:"Active Workers"})}),(0,r.jsx)(k.aY,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(eC.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.total_workers)||0}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(null==t?void 0:t.healthy_workers)||0," healthy"]})]})]})})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsx)(k.ll,{className:"text-sm font-medium text-gray-600",children:"GPU Workers"})}),(0,r.jsx)(k.aY,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ek.Z,{className:"h-8 w-8 text-purple-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:A(1)}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[(100*S(1)).toFixed(0),"% avg load"]})]})]})})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsx)(k.ll,{className:"text-sm font-medium text-gray-600",children:"Tasks Completed"})}),(0,r.jsx)(k.aY,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(eD.Z,{className:"h-8 w-8 text-green-600"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==t?void 0:t.total_tasks_completed)||0})]})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ek.Z,{className:"h-5 w-5 text-purple-600"}),(0,r.jsx)(k.ll,{className:"text-sm font-medium",children:"Tier 1: GPU Workers"})]})}),(0,r.jsxs)(k.aY,{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:A(1)}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"vLLM, Vision Models"}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Average Load"}),(0,r.jsxs)("span",{className:"font-semibold",children:[(100*S(1)).toFixed(0),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(L(S(1))),style:{width:"".concat(100*S(1),"%")}})})]})]})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(W.Z,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)(k.ll,{className:"text-sm font-medium",children:"Tier 2: Service Workers"})]})}),(0,r.jsxs)(k.aY,{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:A(2)}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"RAG, Notes, NER"}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Average Load"}),(0,r.jsxs)("span",{className:"font-semibold",children:[(100*S(2)).toFixed(0),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(L(S(2))),style:{width:"".concat(100*S(2),"%")}})})]})]})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(O.Z,{className:"h-5 w-5 text-green-600"}),(0,r.jsx)(k.ll,{className:"text-sm font-medium",children:"Tier 3: Data Workers"})]})}),(0,r.jsxs)(k.aY,{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-600",children:A(3)}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"PostgreSQL, Neo4j, Redis"}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Average Load"}),(0,r.jsxs)("span",{className:"font-semibold",children:[(100*S(3)).toFixed(0),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(L(S(3))),style:{width:"".concat(100*S(3),"%")}})})]})]})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{className:"pb-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(I.Z,{className:"h-5 w-5 text-indigo-600"}),(0,r.jsx)(k.ll,{className:"text-sm font-medium",children:"Tier 4: Edge Workers"})]})}),(0,r.jsxs)(k.aY,{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-indigo-600",children:A(4)}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Coordinator, Proxy, LB"}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Average Load"}),(0,r.jsxs)("span",{className:"font-semibold",children:[(100*S(4)).toFixed(0),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(L(S(4))),style:{width:"".concat(100*S(4),"%")}})})]})]})]})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsxs)(k.Ol,{children:[(0,r.jsxs)(k.ll,{children:["Active Workers (",e.length,")"]}),(0,r.jsx)(k.SZ,{children:"Real-time status of all registered worker nodes"})]}),(0,r.jsx)(k.aY,{children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(W.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"No workers registered yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Start a worker using the worker agent to see it appear here"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Worker ID"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Tier"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Status"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Load"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Containers"}),(0,r.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Hardware"}),(0,r.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Tasks"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>{var s,t,l;return(0,r.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:e.worker_id})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[T(e.tier),(0,r.jsx)("span",{className:"text-sm",children:U(e.tier)})]})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)(eb,{className:P(e.status),children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[E(e.status),e.status]})})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2 mb-1",children:(0,r.jsx)("div",{className:"h-2 rounded-full ".concat(L(e.current_load||0)),style:{width:"".concat(100*(e.current_load||0),"%")}})}),(0,r.jsxs)("span",{className:"text-xs text-gray-600",children:[(100*(e.current_load||0)).toFixed(0),"%"]})]})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)("div",{className:"space-y-1",children:e.assigned_containers&&e.assigned_containers.length>0?e.assigned_containers.map((e,s)=>(0,r.jsx)("div",{className:"text-xs text-gray-600",children:e.replace("rma-","").replace("-worker","")},s)):(0,r.jsx)("span",{className:"text-xs text-gray-400",children:"None"})})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(null===(s=e.capabilities)||void 0===s?void 0:s.gpu_type)&&(0,r.jsx)("div",{children:e.capabilities.gpu_type}),(0,r.jsxs)("div",{children:[(null===(t=e.capabilities)||void 0===t?void 0:t.cpu_cores)||0," cores"]}),(0,r.jsx)("div",{children:(null===(l=e.capabilities)||void 0===l?void 0:l.ram)||"N/A"})]})}),(0,r.jsx)("td",{className:"py-3 px-4 text-right",children:(0,r.jsx)("span",{className:"text-sm font-semibold",children:e.tasks_completed||0})})]},e.worker_id)})})]})})})]}),(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)(k.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(eA.Z,{className:"h-5 w-5 text-yellow-500"}),"Worker Leaderboard"]}),(0,r.jsx)(k.SZ,{children:"Top contributors by donated compute resources"})]})})}),(0,r.jsx)(k.aY,{children:j?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(B.Z,{className:"h-6 w-6 animate-spin text-gray-400"})}):0===e.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,r.jsx)(eC.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,r.jsx)("p",{children:"No workers available"}),(0,r.jsx)("p",{className:"text-sm mt-2",children:"Deploy a worker to contribute compute resources!"})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[e.map(e=>{let s=new Date(e.registered_at).getTime(),t=(Date.now()-s)/36e5,r=1===e.tier?3:4===e.tier?2.5:2===e.tier?2:1,l=(e.tasks_completed||0)*r+t;return(0,eu._)((0,i._)({},e),{uptimeHours:t,contributionScore:l})}).sort((e,s)=>s.contributionScore-e.contributionScore).slice(0,10).map((e,s)=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border-2 transition-all ".concat(s<3?"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-300 shadow-sm":"bg-gray-50 border-gray-200"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,r.jsx)("div",{className:"text-2xl font-bold min-w-[3rem] text-center",children:0===s?"\uD83E\uDD47":1===s?"\uD83E\uDD48":2===s?"\uD83E\uDD49":"#".concat(s+1)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("code",{className:"text-sm font-semibold bg-white px-2 py-1 rounded border",children:e.worker_id}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[T(e.tier),(0,r.jsx)("span",{className:"text-xs text-gray-600",children:U(e.tier)})]}),(0,r.jsx)(eb,{className:P(e.status),children:e.status})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(eS.Z,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:[e.tasks_completed||0," tasks"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(eD.Z,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:[e.uptimeHours.toFixed(1),"h uptime"]})]}),(null===(t=e.capabilities)||void 0===t?void 0:t.gpu_type)&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(ek.Z,{className:"h-3 w-3"}),(0,r.jsx)("span",{children:e.capabilities.gpu_type})]})]})]})]}),(0,r.jsxs)("div",{className:"text-right ml-4",children:[(0,r.jsx)("div",{className:"text-lg font-bold text-gray-900",children:e.contributionScore.toFixed(0)}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"contribution pts"})]})]},e.worker_id)}),e.length>10&&(0,r.jsx)("div",{className:"text-center pt-2",children:(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Showing top 10 of ",e.length," workers"]})}),(0,r.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)(e_.Z,{className:"h-4 w-4 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{className:"text-xs text-blue-800",children:[(0,r.jsx)("strong",{children:"Contribution Score Formula:"})," (Tasks \xd7 Tier Weight) + Uptime Hours",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-blue-600",children:"Tier Weights: GPU (3x) • CPU (2x) • Storage (1x)"})]})]})})]})})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(eS.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-900 mb-1",children:"Distributed System Active"}),(0,r.jsx)("p",{className:"text-sm text-blue-700",children:"Workers are automatically load-balanced across requests. Add more workers anytime to scale capacity."}),(0,r.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Coordinator: ",(0,r.jsx)("code",{className:"bg-blue-100 px-2 py-0.5 rounded",children:eR})]})]})]})})]}),(0,r.jsxs)(u,{value:"topology",className:"space-y-6 mt-6",children:[d&&d.nodes.length>0?(0,r.jsx)(eN,{topologyData:d}):(0,r.jsx)(k.Zb,{children:(0,r.jsx)(k.aY,{className:"py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(G.Z,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"DHT Topology Not Available"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:b?"Waiting for DHT nodes to connect...":"DHT is not enabled on this coordinator"}),b&&(0,r.jsxs)(g.z,{onClick:R,variant:"outline",size:"sm",children:[(0,r.jsx)(B.Z,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})}),(0,r.jsx)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(G.Z,{className:"h-5 w-5 text-indigo-600 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-indigo-900 mb-1",children:"Distributed Hash Table (DHT)"}),(0,r.jsx)("p",{className:"text-sm text-indigo-700",children:"Workers use DHT for peer-to-peer service discovery, reducing coordinator load by 99.95%. Each node can discover and communicate directly with other nodes without central routing."}),(0,r.jsxs)("p",{className:"text-xs text-indigo-600 mt-2",children:["Protocol: Kademlia • Port: 8468/UDP • Bootstrap: ",eR,"/api/dht/bootstrap"]})]})]})})]})]})]})}var eP=()=>{var e,s,t;let[a,n]=(0,l.useState)({question:"",debt:void 0,income:void 0,assets:void 0,topic:"dro_eligibility",include_diagram:!1,client_id:void 0}),[c,d]=(0,l.useState)("manual"),[o,x]=(0,l.useState)([]),[m,h]=(0,l.useState)(!1),[u,g]=(0,l.useState)(null),[b,p]=(0,l.useState)(!1),[j,y]=(0,l.useState)(null);(0,l.useEffect)(()=>{N()},[]);let N=async()=>{h(!0);try{let e=localStorage.getItem("advisor_token");if(!e)return;let s=await fetch("".concat("https://api.rmatool.org.uk/service/upload","/clients"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){let e=await s.json();x(e.clients||[])}}catch(e){console.error("Error loading clients:",e)}finally{h(!1)}},f=e=>{let{name:s,value:t,type:r}=e.target;if("checkbox"===r){let t=e.target.checked;n(e=>(0,eu._)((0,i._)({},e),{[s]:t}))}else"debt"===s||"income"===s||"assets"===s?n(e=>(0,eu._)((0,i._)({},e),{[s]:""===t?void 0:parseFloat(t)})):n(e=>(0,eu._)((0,i._)({},e),{[s]:t}))},v=async e=>{e.preventDefault(),p(!0),y(null),g(null);try{let e={question:a.question,topic:a.topic,include_diagram:a.include_diagram};"manual"===c?(void 0!==a.debt&&(e.debt=a.debt),void 0!==a.income&&(e.income=a.income),void 0!==a.assets&&(e.assets=a.assets)):a.client_id&&(e.client_id=a.client_id);let s=await fetch("".concat("https://api.rmatool.org.uk/service/rag","/eligibility-check"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let t=await s.json();g(t)}catch(e){y(e instanceof Error?e.message:"An error occurred")}finally{p(!1)}},w=e=>{switch(e){case"eligible":return"✅";case"not_eligible":return"❌";case"near_miss":return"⚠️";case"unknown":return"❓";default:return"◯"}},C=e=>{switch(e){case"eligible":return"bg-green-50 border-green-500 text-green-900";case"not_eligible":return"bg-red-50 border-red-500 text-red-900";case"near_miss":return"bg-yellow-50 border-yellow-500 text-yellow-900";case"unknown":return"bg-gray-50 border-gray-500 text-gray-900";default:return"bg-white border-gray-300"}},S=e=>{switch(e){case"high":return"bg-red-500 text-white";case"medium":return"bg-yellow-500 text-black";case"low":return"bg-green-500 text-white";default:return"bg-gray-500 text-white"}};return(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Debt Solution Eligibility Checker"}),(0,r.jsxs)(k.Zb,{className:"p-4 mb-6 bg-blue-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(D._,{className:"font-semibold text-gray-700",children:"Mode:"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>d("manual"),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat("manual"===c?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"\uD83D\uDCDD Manual Input (Hypothetical)"}),(0,r.jsx)("button",{type:"button",onClick:()=>d("client"),className:"px-4 py-2 rounded-md font-medium transition-colors ".concat("client"===c?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"),children:"\uD83D\uDC64 Client Documents (RAG)"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"manual"===c?'\uD83D\uDD39 Ask hypothetical questions with manual values (e.g., "What if someone has \xa351k debt?")':"\uD83D\uDD39 Query specific client documents - values will be extracted automatically"})]}),(0,r.jsx)(k.Zb,{className:"p-6 mb-8 bg-gray-50",children:(0,r.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"question",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Question:"}),(0,r.jsx)("input",{type:"text",id:"question",name:"question",value:a.question,onChange:f,placeholder:"manual"===c?"e.g., Can someone with \xa351k debt get a DRO?":"e.g., Is this client eligible for a DRO?",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),"client"===c&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"client_id",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Select Client:"}),(0,r.jsxs)("select",{id:"client_id",name:"client_id",value:a.client_id||"",onChange:f,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"-- Select a client --"}),o.map(e=>(0,r.jsx)("option",{value:e.client_id,children:e.client_name||e.client_id},e.client_id))]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Values will be extracted from client documents automatically"})]}),"manual"===c&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"debt",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Total Debt (\xa3):"}),(0,r.jsx)("input",{type:"number",id:"debt",name:"debt",value:null!==(e=a.debt)&&void 0!==e?e:"",onChange:f,placeholder:"e.g., 45000",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"income",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Monthly Income (\xa3):"}),(0,r.jsx)("input",{type:"number",id:"income",name:"income",value:null!==(s=a.income)&&void 0!==s?s:"",onChange:f,placeholder:"e.g., 70",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"assets",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Total Assets (\xa3):"}),(0,r.jsx)("input",{type:"number",id:"assets",name:"assets",value:null!==(t=a.assets)&&void 0!==t?t:"",onChange:f,placeholder:"e.g., 1500",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"topic",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Debt Solution:"}),(0,r.jsxs)("select",{id:"topic",name:"topic",value:a.topic,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"dro_eligibility",children:"DRO (Debt Relief Order)"}),(0,r.jsx)("option",{value:"bankruptcy_eligibility",children:"Bankruptcy"}),(0,r.jsx)("option",{value:"iva_eligibility",children:"IVA (Individual Voluntary Arrangement)"})]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"include_diagram",name:"include_diagram",checked:a.include_diagram,onChange:f,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"include_diagram",className:"ml-2 block text-sm text-gray-700",children:"Include decision tree diagram"})]}),(0,r.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-semibold py-3 px-6 rounded-md transition-colors duration-200",children:b?"Checking Eligibility...":"Check Eligibility"})]})}),j&&(0,r.jsxs)(A.bZ,{className:"mb-6 bg-red-50 border-red-500 text-red-900",children:[(0,r.jsx)("strong",{children:"Error:"})," ",j]}),u&&(0,r.jsxs)("div",{className:"space-y-6 animate-fadeIn",children:[(0,r.jsxs)(k.Zb,{className:"p-6 border-2 ".concat((e=>{switch(e){case"eligible":return"bg-green-100 border-green-500 text-green-900";case"not_eligible":return"bg-red-100 border-red-500 text-red-900";case"requires_review":return"bg-yellow-100 border-yellow-500 text-yellow-900";case"incomplete_information":return"bg-gray-100 border-gray-500 text-gray-900";default:return"bg-white border-gray-300"}})(u.overall_result)),children:[(0,r.jsxs)("h3",{className:"text-2xl font-bold mb-2",children:["Overall Result: ",u.overall_result.replace(/_/g," ").toUpperCase()]}),(0,r.jsxs)("div",{className:"text-lg",children:["Confidence: ",(100*u.confidence).toFixed(0),"%"]})]}),(0,r.jsxs)(k.Zb,{className:"p-6",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Answer from Manuals:"}),(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed",children:u.answer})]}),u.criteria&&u.criteria.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Eligibility Criteria Breakdown:"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.criteria.map((e,s)=>{var t,l,a;return(0,r.jsxs)(k.Zb,{className:"p-4 border-l-4 hover:shadow-lg transition-shadow ".concat(C(e.status)),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:w(e.status)}),(0,r.jsx)("span",{className:"text-lg font-bold uppercase",children:e.criterion})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:"Threshold:"}),(0,r.jsxs)("span",{className:"font-semibold",children:["\xa3",null===(t=e.threshold_value)||void 0===t?void 0:t.toLocaleString()]})]}),null!==e.client_value&&void 0!==e.client_value&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:"Your Value:"}),(0,r.jsxs)("span",{className:"font-semibold",children:["\xa3",null===(l=e.client_value)||void 0===l?void 0:l.toLocaleString()]})]}),null!==e.gap&&void 0!==e.gap&&e.gap>0&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-600",children:"Gap:"}),(0,r.jsxs)("span",{className:"font-bold text-red-700",children:["\xa3",null===(a=e.gap)||void 0===a?void 0:a.toLocaleString()]})]}),(0,r.jsx)("div",{className:"pt-2 mt-2 border-t border-gray-200 text-gray-700 italic",children:e.explanation})]})]},s)})})]}),u.near_misses&&u.near_misses.length>0&&(0,r.jsxs)(k.Zb,{className:"p-6 bg-yellow-50 border-2 border-yellow-500",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-yellow-900 mb-2",children:"⚠️ Near-Miss Opportunities:"}),(0,r.jsx)("p",{className:"text-yellow-900 mb-4 font-medium",children:"You're close! Here are opportunities to qualify:"}),(0,r.jsx)("div",{className:"space-y-4",children:u.near_misses.map((e,s)=>{var t;return(0,r.jsxs)(k.Zb,{className:"p-4 bg-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("strong",{className:"text-gray-900",children:e.threshold_name}),(0,r.jsxs)("span",{className:"px-3 py-1 bg-yellow-500 text-black text-xs font-semibold rounded-full",children:["Within \xa3",null===(t=e.tolerance)||void 0===t?void 0:t.toLocaleString()," tolerance"]})]}),e.strategies&&e.strategies.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-700 mb-2",children:"Possible strategies:"}),(0,r.jsx)("ul",{className:"space-y-2",children:e.strategies.map((e,s)=>(0,r.jsxs)("li",{className:"text-gray-700",children:[(0,r.jsx)("strong",{children:e.description}),e.actions&&e.actions.length>0&&(0,r.jsx)("ul",{className:"ml-4 mt-1 space-y-1 text-sm text-gray-600",children:e.actions.map((e,s)=>(0,r.jsxs)("li",{children:["• ",e]},s))})]},s))})]})]},s)})})]}),u.recommendations&&u.recommendations.length>0&&(0,r.jsxs)(k.Zb,{className:"p-6 bg-blue-50 border-2 border-blue-500",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-blue-900 mb-4",children:"\uD83D\uDCA1 Recommendations:"}),(0,r.jsx)("div",{className:"space-y-3",children:u.recommendations.map((e,s)=>(0,r.jsxs)(k.Zb,{className:"p-4 bg-white border-l-4",style:{borderLeftColor:"high"===e.priority?"#dc2626":"medium"===e.priority?"#fbbf24":"#16a34a"},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("span",{className:"px-3 py-1 text-xs font-semibold rounded-full uppercase ".concat(S(e.priority)),children:[e.priority," priority"]}),(0,r.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),(0,r.jsx)("p",{className:"font-semibold text-gray-900 mb-2",children:e.action}),e.steps&&e.steps.length>0&&(0,r.jsx)("ul",{className:"space-y-1 text-sm text-gray-700",children:e.steps.map((e,s)=>(0,r.jsxs)("li",{children:["• ",e]},s))})]},s))})]}),u.sources&&u.sources.length>0&&(0,r.jsxs)(k.Zb,{className:"p-6",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"\uD83D\uDCDA Sources:"}),(0,r.jsx)("ul",{className:"space-y-2 text-sm text-gray-700",children:u.sources.map((e,s)=>(0,r.jsx)("li",{className:"pl-4 border-l-2 border-gray-300",children:e},s))})]}),u.diagram&&(0,r.jsxs)(k.Zb,{className:"p-6",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-3",children:"\uD83C\uDF33 Decision Tree:"}),(0,r.jsx)("div",{className:"bg-white p-4 rounded border border-gray-200 overflow-x-auto",children:(0,r.jsx)("pre",{className:"text-sm",children:u.diagram})})]})]})]})},eT=t(4182),eI=t(3758),eO=t(5083),eU=t(2986),eL=t(8814),eW=t(8025),eG=t(4715);let eM={condition:"#3b82f6",rule:"#8b5cf6",outcome:"#10b981",threshold:"#f59e0b",process:"#6366f1",criteria:"#ec4899",exception:"#ef4444",action:"#14b8a6",journey:"#06b6d4"},eZ={implies:"#3b82f6",leads_to:"#8b5cf6",requires:"#f59e0b",prevents:"#ef4444",contradicts:"#dc2626",equivalent:"#10b981",part_of:"#6366f1",alternative_to:"#ec4899",refines:"#14b8a6",triggers:"#06b6d4"};function eF(){let[e,s]=(0,l.useState)(null),[t,a]=(0,l.useState)(!1),[n,i]=(0,l.useState)(null),[c,d]=(0,l.useState)(!1),[o,b]=(0,l.useState)(null),[p,j]=(0,l.useState)(null),[y,N]=(0,l.useState)(""),[f,v]=(0,l.useState)(""),w=(0,l.useRef)(null),C=(0,l.useRef)(null),A=async e=>{a(!0),i(null);try{let t=await fetch("".concat("https://api.rmatool.org.uk/service/rag","/api/graph/").concat(e||"sample_dro_manual"));if(!t.ok)throw Error("Failed to fetch graph: ".concat(t.statusText));let r=await t.json();s(r)}catch(e){i(e instanceof Error?e.message:"Unknown error"),console.error("Graph fetch error:",e)}finally{a(!1)}},S=()=>{if(!e||!C.current)return;let s=Object.values(e.entities).filter(e=>!y||e.type===y),t=Object.values(e.relations).filter(e=>!f||e.type===f);C.current&&(C.current.innerHTML="");let r=C.current,l=document.createElementNS("http://www.w3.org/2000/svg","g");for(let r of t){let t=e.entities[r.source_entity_id],a=e.entities[r.target_entity_id];if(!t||!a)continue;let n=s.indexOf(t),i=s.indexOf(a);if(-1===n||-1===i)continue;let c=40+n%3*250+125,d=40+120*Math.floor(n/3)+60,o=40+i%3*250+125,x=40+120*Math.floor(i/3)+60,m=document.createElementNS("http://www.w3.org/2000/svg","line");m.setAttribute("x1",c.toString()),m.setAttribute("y1",d.toString()),m.setAttribute("x2",o.toString()),m.setAttribute("y2",x.toString()),m.setAttribute("stroke",eZ[r.type]||"#999"),m.setAttribute("stroke-width","2"),m.setAttribute("marker-end","url(#arrowhead-".concat(r.type,")")),m.style.opacity=r.confidence.toString(),l.appendChild(m);let h=(c+o)/2,u=(d+x)/2,g=document.createElementNS("http://www.w3.org/2000/svg","text");g.setAttribute("x",h.toString()),g.setAttribute("y",u.toString()),g.setAttribute("text-anchor","middle"),g.setAttribute("font-size","10"),g.setAttribute("fill","#666"),g.textContent=r.type,l.appendChild(g)}null==r||r.appendChild(l);for(let e=0;e<s.length;e++){let t=s[e],l=40+e%3*250,a=40+120*Math.floor(e/3),n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("x",l.toString()),n.setAttribute("y",a.toString()),n.setAttribute("width","250"),n.setAttribute("height","120"),n.setAttribute("fill",eM[t.type]||"#e5e7eb"),n.setAttribute("stroke","#333"),n.setAttribute("stroke-width","2"),n.setAttribute("rx","4"),n.style.opacity=t.confidence.toString(),n.style.cursor="pointer",n.onclick=()=>b(t),null==r||r.appendChild(n);let i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("x",(l+8).toString()),i.setAttribute("y",(a+20).toString()),i.setAttribute("font-size","10"),i.setAttribute("font-weight","bold"),i.setAttribute("fill","white"),i.textContent=t.type.toUpperCase(),null==r||r.appendChild(i);let c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",(l+125).toString()),c.setAttribute("y",(a+60).toString()),c.setAttribute("text-anchor","middle"),c.setAttribute("font-size","12"),c.setAttribute("font-weight","bold"),c.setAttribute("fill","white");let d=t.label.split(" "),o="";for(let e=0;e<d.length;e++){let s=o+(o?" ":"")+d[e];if(s.length>20){if(o){let e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("x",(l+125).toString()),e.setAttribute("dy","1.2em"),e.textContent=o,c.appendChild(e)}o=d[e]}else o=s}if(o){let e=document.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("x",(l+125).toString()),e.setAttribute("dy","1.2em"),e.textContent=o,c.appendChild(e)}null==r||r.appendChild(c);let x=document.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("x",l.toString()),x.setAttribute("y",(a+120-8).toString()),x.setAttribute("width",(250*t.confidence).toString()),x.setAttribute("height","4"),x.setAttribute("fill","#4b5563"),null==r||r.appendChild(x)}};(0,l.useEffect)(()=>{A()},[]),(0,l.useEffect)(()=>{S()},[e,y,f]);let _=(()=>{if(!e)return{total_entities:0,total_relations:0,entity_types:{},relation_types:{}};let s=Object.keys(e.entities).length,t=Object.keys(e.relations).length;return y&&(s=Object.values(e.entities).filter(e=>e.type===y).length),f&&(t=Object.values(e.relations).filter(e=>e.type===f).length),{total_entities:s,total_relations:t,entity_types:e.stats.entity_types,relation_types:e.stats.relation_types}})();return(0,r.jsx)("div",{className:"".concat(c?"fixed inset-0 z-50 bg-white":""),children:(0,r.jsxs)(k.Zb,{className:c?"h-full rounded-none border-none":"",children:[(0,r.jsxs)(k.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k.ll,{children:"Debt Advice Graph View"}),(0,r.jsx)(k.SZ,{children:"Entity-relation graph showing debt solution rules and relationships"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>d(!c),children:c?(0,r.jsx)(eT.Z,{className:"h-4 w-4"}):(0,r.jsx)(eI.Z,{className:"h-4 w-4"})}),(0,r.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>A(),disabled:t,children:t?(0,r.jsx)(eO.Z,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(B.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)(k.aY,{className:"space-y-6",children:[n&&(0,r.jsxs)("div",{className:"flex gap-3 bg-red-50 border border-red-200 rounded-lg p-4 text-red-800",children:[(0,r.jsx)(V.Z,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,r.jsx)("div",{className:"text-sm",children:n})]}),t?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)(eO.Z,{className:"h-8 w-8 animate-spin text-blue-600"})}):e?(0,r.jsxs)(x,{defaultValue:"graph",className:"w-full",children:[(0,r.jsxs)(m,{className:"grid w-full grid-cols-4",children:[(0,r.jsxs)(h,{value:"graph",className:"flex items-center gap-2",children:[(0,r.jsx)(eU.Z,{className:"h-4 w-4"}),"Graph View"]}),(0,r.jsxs)(h,{value:"entities",className:"flex items-center gap-2",children:[(0,r.jsx)(eL.Z,{className:"h-4 w-4"}),"Entities (",_.total_entities,")"]}),(0,r.jsxs)(h,{value:"relations",className:"flex items-center gap-2",children:[(0,r.jsx)(eW.Z,{className:"h-4 w-4"}),"Relations (",_.total_relations,")"]}),(0,r.jsx)(h,{value:"details",children:"Details"})]}),(0,r.jsxs)(u,{value:"graph",className:"space-y-4",children:[(0,r.jsx)("div",{className:"space-y-3",children:(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(D._,{htmlFor:"filter-entity",className:"text-xs",children:"Entity Type"}),(0,r.jsxs)("select",{id:"filter-entity",value:y,onChange:e=>N(e.target.value),className:"w-full mt-1 px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,r.jsx)("option",{value:"",children:"All entities"}),Object.entries(_.entity_types).map(e=>{let[s,t]=e;return(0,r.jsxs)("option",{value:s,children:[s," (",t,")"]},s)})]})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(D._,{htmlFor:"filter-relation",className:"text-xs",children:"Relation Type"}),(0,r.jsxs)("select",{id:"filter-relation",value:f,onChange:e=>v(e.target.value),className:"w-full mt-1 px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,r.jsx)("option",{value:"",children:"All relations"}),Object.entries(_.relation_types).map(e=>{let[s,t]=e;return(0,r.jsxs)("option",{value:s,children:[s," (",t,")"]},s)})]})]}),(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>{if(!e)return;let s=JSON.stringify(e,null,2),t=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download="graph_".concat(e.id,"_").concat(new Date().toISOString().split("T")[0],".json"),l.click(),URL.revokeObjectURL(r)},children:[(0,r.jsx)(eG.Z,{className:"h-4 w-4 mr-1"}),"JSON"]}),(0,r.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>{if(!e)return;let s="Entity ID,Entity Type,Label,Confidence,Source,Description\n";for(let t of Object.values(e.entities))s+='"'.concat(t.id,'","').concat(t.type,'","').concat(t.label,'",').concat(t.confidence,',"').concat(t.source,'","').concat(t.description||"",'"\n');for(let l of(s+="\n\nRelation ID,Type,Source Entity,Target Entity,Confidence,Reasoning\n",Object.values(e.relations))){var t,r;let a=(null===(t=e.entities[l.source_entity_id])||void 0===t?void 0:t.label)||l.source_entity_id,n=(null===(r=e.entities[l.target_entity_id])||void 0===r?void 0:r.label)||l.target_entity_id;s+='"'.concat(l.id,'","').concat(l.type,'","').concat(a,'","').concat(n,'",').concat(l.confidence,',"').concat(l.reasoning||"",'"\n')}let l=new Blob([s],{type:"text/csv"}),a=URL.createObjectURL(l),n=document.createElement("a");n.href=a,n.download="graph_".concat(e.id,"_").concat(new Date().toISOString().split("T")[0],".csv"),n.click(),URL.revokeObjectURL(a)},children:[(0,r.jsx)(eG.Z,{className:"h-4 w-4 mr-1"}),"CSV"]})]})]})}),(0,r.jsx)("div",{ref:w,className:"border border-gray-300 rounded-lg bg-gray-50 overflow-auto",style:{height:c?"calc(100vh - 300px)":"500px"},children:(0,r.jsx)("svg",{ref:C,width:"100%",height:"100%",viewBox:"0 0 1200 800",preserveAspectRatio:"xMinYMin meet",children:(0,r.jsx)("defs",{children:Object.entries(eZ).map(e=>{let[s,t]=e;return(0,r.jsx)("marker",{id:"arrowhead-".concat(s),markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",children:(0,r.jsx)("polygon",{points:"0 0, 10 3, 0 6",fill:t})},"arrow-".concat(s))})})})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 p-3 bg-gray-50 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold mb-2",children:"Entity Types"}),(0,r.jsx)("div",{className:"space-y-1 text-xs",children:Object.entries(eM).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:t}}),(0,r.jsx)("span",{className:"capitalize",children:s})]},s)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xs font-semibold mb-2",children:"Relation Types"}),(0,r.jsx)("div",{className:"space-y-1 text-xs",children:Object.entries(eZ).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-1 h-3",style:{backgroundColor:t}}),(0,r.jsx)("span",{className:"capitalize",children:s.replace("_"," ")})]},s)})})]})]})]}),(0,r.jsx)(u,{value:"entities",className:"space-y-3",children:(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Object.values(e.entities).filter(e=>!y||e.type===y).map(e=>(0,r.jsx)("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-blue-50",onClick:()=>b(e),style:{borderLeftColor:eM[e.type]||"#999",borderLeftWidth:"4px"},children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-semibold text-sm",children:e.label}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:[(0,r.jsx)(eb,{variant:"outline",className:"text-xs mr-1",children:e.type}),(0,r.jsxs)("span",{className:"text-gray-500",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]}),e.description&&(0,r.jsx)("div",{className:"text-xs text-gray-700 mt-2",children:e.description})]})})},e.id))})}),(0,r.jsx)(u,{value:"relations",className:"space-y-3",children:(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto space-y-2",children:Object.values(e.relations).filter(e=>!f||e.type===f).map(s=>{let t=e.entities[s.source_entity_id],l=e.entities[s.target_entity_id];return(0,r.jsx)("div",{className:"p-3 border rounded-lg",style:{borderLeftColor:eZ[s.type]||"#999",borderLeftWidth:"4px"},children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:(null==t?void 0:t.label)||s.source_entity_id}),(0,r.jsxs)("div",{className:"text-gray-600 text-xs my-1",children:[(0,r.jsx)(eW.Z,{className:"inline h-3 w-3 mx-1"}),(0,r.jsx)(eb,{variant:"outline",className:"text-xs",children:s.type})]}),(0,r.jsx)("div",{className:"font-medium",children:(null==l?void 0:l.label)||s.target_entity_id}),s.reasoning&&(0,r.jsxs)("div",{className:"text-xs text-gray-700 mt-2 italic",children:['"',s.reasoning,'"']})]}),(0,r.jsxs)("div",{className:"text-right text-xs text-gray-500",children:[(100*s.confidence).toFixed(0),"%"]})]})},s.id)})})}),(0,r.jsxs)(u,{value:"details",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)(k.Zb,{className:"bg-blue-50",children:[(0,r.jsx)(k.Ol,{className:"pb-3",children:(0,r.jsx)(k.ll,{className:"text-sm",children:"Total Entities"})}),(0,r.jsx)(k.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:_.total_entities})})]}),(0,r.jsxs)(k.Zb,{className:"bg-purple-50",children:[(0,r.jsx)(k.Ol,{className:"pb-3",children:(0,r.jsx)(k.ll,{className:"text-sm",children:"Total Relations"})}),(0,r.jsx)(k.aY,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:_.total_relations})})]})]}),o&&(0,r.jsxs)(k.Zb,{className:"border-blue-200",children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)(k.ll,{className:"text-sm",children:"Selected Entity Details"})}),(0,r.jsxs)(k.aY,{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Label:"})," ",o.label]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Type:"})," ",o.type]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"ID:"})," ",(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:o.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Confidence:"})," ",(100*o.confidence).toFixed(0),"%"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Source:"})," ",o.source]}),Object.keys(o.properties).length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-semibold",children:"Properties:"}),(0,r.jsx)("pre",{className:"bg-gray-100 p-2 rounded text-xs mt-1 overflow-auto",children:JSON.stringify(o.properties,null,2)})]})]})]})]})]}):(0,r.jsx)("div",{className:"text-center py-12 text-gray-500",children:'No graph loaded. Click "Refresh" or upload documents to build a graph.'})]})]})})}var eB=t(7841),eV=t(3832),eq=t(5751),ez=t(6396),eY=t(4395),eH=t(3348);let eK={condition:"#3b82f6",rule:"#8b5cf6",outcome:"#10b981",threshold:"#f59e0b",process:"#6366f1",criteria:"#ec4899",exception:"#ef4444",action:"#14b8a6",journey:"#06b6d4"},e$={implies:"#3b82f6",leads_to:"#8b5cf6",requires:"#f59e0b",prevents:"#ef4444",contradicts:"#dc2626",equivalent:"#10b981",part_of:"#6366f1",alternative_to:"#ec4899",refines:"#14b8a6",triggers:"#06b6d4"};function eQ(e){let{clientData:s}=e,[t,a]=(0,l.useState)(null),[n,c]=(0,l.useState)(!1),[d,o]=(0,l.useState)(""),[b,p]=(0,l.useState)(!1),[j,y]=(0,l.useState)(1),[N,f]=(0,l.useState)({x:0,y:0}),[v,w]=(0,l.useState)(null),[C,D]=(0,l.useState)({x:0,y:0}),[A,S]=(0,l.useState)({}),[_,R]=(0,l.useState)(null),[E,P]=(0,l.useState)("all"),[T,I]=(0,l.useState)(!!s),[O,U]=(0,l.useState)(new Map),[L,W]=(0,l.useState)(!0),[G,M]=(0,l.useState)([]),Z=(0,l.useRef)(null),F=(0,l.useRef)(null),V=(0,l.useCallback)(()=>{if(!t)return;let e=Object.values(t.entities),s={},r=2*Math.PI/e.length;e.forEach((e,t)=>{let l=r*t;s[e.id]={x:600+250*Math.cos(l),y:400+250*Math.sin(l)}}),S(s)},[t]),q=(0,l.useCallback)(()=>{if(!L||!t)return;let e=(0,i._)({},A),s=Object.values(t.entities),r=Object.values(t.relations);if(!s.every(s=>e[s.id])){console.warn("Not all entities have positions, skipping force layout");return}for(let t=0;t<10;t++)s.forEach(t=>{if(!e[t.id])return;let l=0,a=0;s.forEach(s=>{if(t.id===s.id||!e[s.id])return;let r=e[s.id].x-e[t.id].x,n=e[s.id].y-e[t.id].y,i=Math.sqrt(r*r+n*n)||1,c=100/(i*i);l-=r/i*c,a-=n/i*c}),r.forEach(s=>{if(s.source_entity_id===t.id){let r=e[s.target_entity_id];if(r&&e[t.id]){let s=r.x-e[t.id].x,n=r.y-e[t.id].y,i=Math.sqrt(s*s+n*n)||1,c=(i-200)*.01;l+=s/i*c,a+=n/i*c}}if(s.target_entity_id===t.id){let r=e[s.source_entity_id];if(r&&e[t.id]){let s=r.x-e[t.id].x,n=r.y-e[t.id].y,i=Math.sqrt(s*s+n*n)||1,c=(i-200)*.01;l+=s/i*c,a+=n/i*c}}}),e[t.id]&&(e[t.id].x+=.5*l,e[t.id].y+=.5*a,e[t.id].x=Math.max(50,Math.min(1150,e[t.id].x)),e[t.id].y=Math.max(50,Math.min(750,e[t.id].y)))});S(e)},[t,L,A]),z=async()=>{try{c(!0),o("");let e={id:"graph-001",entities:{ent_debt:{id:"ent_debt",type:"condition",label:"Debt Level",properties:{min:0,max:5e4},source:"DRO_Manual.pdf",confidence:.95},ent_income:{id:"ent_income",type:"condition",label:"Monthly Income",properties:{min:0,max:75},source:"DRO_Manual.pdf",confidence:.92},ent_dro:{id:"ent_dro",type:"rule",label:"DRO Eligibility",properties:{type:"AND"},source:"DRO_Manual.pdf",confidence:.98},ent_outcome_dro:{id:"ent_outcome_dro",type:"outcome",label:"Eligible for DRO",properties:{},source:"DRO_Manual.pdf",confidence:.95},ent_iva:{id:"ent_iva",type:"rule",label:"IVA Eligibility",properties:{type:"alternative"},source:"IVA_Manual.pdf",confidence:.94},ent_outcome_iva:{id:"ent_outcome_iva",type:"outcome",label:"Eligible for IVA",properties:{},source:"IVA_Manual.pdf",confidence:.91}},relations:{rel_1:{id:"rel_1",type:"part_of",source_entity_id:"ent_debt",target_entity_id:"ent_dro",confidence:.98},rel_2:{id:"rel_2",type:"part_of",source_entity_id:"ent_income",target_entity_id:"ent_dro",confidence:.97},rel_3:{id:"rel_3",type:"implies",source_entity_id:"ent_dro",target_entity_id:"ent_outcome_dro",confidence:.95}},stats:{total_entities:6,total_relations:3,entity_types:{condition:2,rule:2,outcome:2},relation_types:{part_of:2,implies:1},source_documents:["DRO_Manual.pdf","IVA_Manual.pdf"]},created_at:new Date().toISOString(),updated_at:new Date().toISOString()};a(e),V(),s&&Y(e)}catch(e){o(e instanceof Error?e.message:"Failed to load graph")}finally{c(!1)}},Y=e=>{if(!s)return;let t=new Map,r=[];s.debt>5e4&&r.push("Debt over limit by \xa3".concat(s.debt-5e4)),s.income>75&&r.push("Income over limit by \xa3".concat(s.income-75)),t.set("dro",{routeName:"DRO",eligible:0===r.length,gaps:r,path:["Debt Level","Monthly Income","DRO Eligibility","Eligible for DRO"],confidence:.95,position:0===r.length?"fit":1===r.length?"near-miss":"no-fit"});let l=[];s.debt<15e3&&l.push("Debt below IVA minimum"),t.set("iva",{routeName:"IVA",eligible:0===l.length,gaps:l,path:["Debt Level","Income Assessment","IVA Eligibility","Eligible for IVA"],confidence:.92,position:0===l.length?"fit":"near-miss"});let a=[];s.debt<1e3&&a.push("Debt below bankruptcy threshold"),t.set("bankruptcy",{routeName:"Bankruptcy",eligible:0===a.length,gaps:a,path:["Debt Level","Asset Assessment","Bankruptcy Review","Eligible for Bankruptcy"],confidence:.88,position:0===a.length?"fit":1===a.length?"near-miss":"needs-review"}),U(t)},H=(e,s)=>{var t;if(0!==e.button)return;w(s),R(s);let r=null===(t=F.current)||void 0===t?void 0:t.getBoundingClientRect();r&&D({x:(e.clientX-r.left)/j-N.x,y:(e.clientY-r.top)/j-N.y})},K=()=>{w(null)},$=()=>{if(!t||!F.current)return;let e=F.current;e.innerHTML="";let s=Object.values(t.entities);Object.values(t.relations).forEach(s=>{let t=A[s.source_entity_id],r=A[s.target_entity_id];if(!t||!r)return;let l=G.includes(s.source_entity_id)&&G.includes(s.target_entity_id),a=document.createElementNS("http://www.w3.org/2000/svg","line");a.setAttribute("x1",t.x.toString()),a.setAttribute("y1",t.y.toString()),a.setAttribute("x2",r.x.toString()),a.setAttribute("y2",r.y.toString()),a.setAttribute("stroke",l?"#ff0000":e$[s.type]||"#ccc"),a.setAttribute("stroke-width",l?"3":"2"),a.setAttribute("opacity",l?"1":"0.6"),a.setAttribute("stroke-dasharray",l?"5,5":"0"),e.appendChild(a);let n=(t.x+r.x)/2,i=(t.y+r.y)/2,c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",n.toString()),c.setAttribute("y",i.toString()),c.setAttribute("font-size","11"),c.setAttribute("fill","#666"),c.setAttribute("text-anchor","middle"),c.setAttribute("class","pointer-events-none"),c.textContent=s.type,e.appendChild(c)}),s.forEach(s=>{let t=A[s.id];if(!t)return;let r=_===s.id,l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("cx",t.x.toString()),l.setAttribute("cy",t.y.toString()),l.setAttribute("r","40"),l.setAttribute("fill",eK[s.type]||"#ccc"),l.setAttribute("stroke",r?"#000":"#333"),l.setAttribute("stroke-width",r?"3":"1"),l.setAttribute("opacity","0.8"),l.setAttribute("class","cursor-move"),l.setAttribute("style","cursor: ".concat(v===s.id?"grabbing":"grab")),l.entityId=s.id,l.onmousedown=e=>{H(e,s.id)},e.appendChild(l);let a=40*s.confidence,n=document.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttribute("cx",t.x.toString()),n.setAttribute("cy",t.y.toString()),n.setAttribute("r",a.toString()),n.setAttribute("fill","none"),n.setAttribute("stroke","#fff"),n.setAttribute("stroke-width","2"),n.setAttribute("opacity","0.5"),e.appendChild(n);let i=document.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("x",t.x.toString()),i.setAttribute("y",(t.y-5).toString()),i.setAttribute("text-anchor","middle"),i.setAttribute("font-size","12"),i.setAttribute("font-weight","bold"),i.setAttribute("fill","#fff"),i.setAttribute("class","pointer-events-none");let c=s.label.split(" "),d=[],o="";c.forEach(e=>{(o+e).length>18?(o&&d.push(o),o=e):o+=(o?" ":"")+e}),o&&d.push(o),d.forEach((e,s)=>{let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttribute("x",t.x.toString()),r.setAttribute("dy",0===s?"0":"1.2em"),r.textContent=e,i.appendChild(r)}),e.appendChild(i);let x=document.createElementNS("http://www.w3.org/2000/svg","rect");x.setAttribute("x",(t.x-40-5).toString()),x.setAttribute("y",(t.y+40).toString()),x.setAttribute("width","60"),x.setAttribute("height","16"),x.setAttribute("fill","#333"),x.setAttribute("rx","3"),e.appendChild(x);let m=document.createElementNS("http://www.w3.org/2000/svg","text");m.setAttribute("x",t.x.toString()),m.setAttribute("y",(t.y+40+11).toString()),m.setAttribute("font-size","10"),m.setAttribute("fill","#fff"),m.setAttribute("text-anchor","middle"),m.setAttribute("class","pointer-events-none"),m.textContent=s.type,e.appendChild(m)})};return(0,l.useEffect)(()=>{z()},[]),(0,l.useEffect)(()=>{t&&0===Object.keys(A).length&&V()},[t,A,V]),(0,l.useEffect)(()=>{Object.keys(A).length>0&&$()},[t,A,_,G]),(0,l.useEffect)(()=>{if(!L||0===Object.keys(A).length)return;let e=setInterval(q,100);return()=>clearInterval(e)},[L,q,A]),(0,r.jsx)("div",{className:"".concat(b?"fixed inset-0 z-50 bg-white":""),children:(0,r.jsxs)(k.Zb,{className:b?"h-full rounded-none border-none flex flex-col":"",children:[(0,r.jsxs)(k.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(k.ll,{children:"Interactive Debt Routes Graph"}),(0,r.jsx)(k.SZ,{children:"Draggable visualization showing client position across debt routes"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(g.z,{variant:"outline",size:"sm",onClick:()=>p(!b),children:b?(0,r.jsx)(eT.Z,{className:"h-4 w-4"}):(0,r.jsx)(eI.Z,{className:"h-4 w-4"})}),(0,r.jsx)(g.z,{variant:"outline",size:"sm",onClick:z,disabled:n,children:n?(0,r.jsx)(eO.Z,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(B.Z,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(k.aY,{className:"space-y-6 ".concat(b?"flex-1 overflow-hidden":""),children:!n&&t&&(0,r.jsxs)(x,{defaultValue:"graph",className:"w-full h-full flex flex-col",children:[(0,r.jsxs)(m,{className:"grid w-full grid-cols-4",children:[(0,r.jsxs)(h,{value:"graph",children:[(0,r.jsx)(eU.Z,{className:"h-4 w-4 mr-2"}),"Interactive Graph"]}),(0,r.jsxs)(h,{value:"routes",children:[(0,r.jsx)(eB.Z,{className:"h-4 w-4 mr-2"}),"Route Analysis"]}),(0,r.jsxs)(h,{value:"details",children:[(0,r.jsx)(eV.Z,{className:"h-4 w-4 mr-2"}),"Node Details"]}),(0,r.jsxs)(h,{value:"settings",children:[(0,r.jsx)(eq.Z,{className:"h-4 w-4 mr-2"}),"Layout"]})]}),(0,r.jsxs)(u,{value:"graph",className:"space-y-4 flex-1",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(g.z,{size:"sm",variant:"outline",onClick:()=>y(Math.min(j+.2,3)),children:(0,r.jsx)(ez.Z,{className:"h-4 w-4"})}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[(100*j).toFixed(0),"%"]}),(0,r.jsx)(g.z,{size:"sm",variant:"outline",onClick:()=>y(Math.max(j-.2,.5)),children:(0,r.jsx)(eY.Z,{className:"h-4 w-4"})}),(0,r.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>{y(1),f({x:0,y:0})},children:[(0,r.jsx)(eH.Z,{className:"h-4 w-4 mr-1"}),"Reset"]}),(0,r.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>W(!L),className:L?"bg-blue-100":"",children:["Auto Layout: ",L?"On":"Off"]}),(0,r.jsx)("div",{className:"ml-auto",children:(0,r.jsxs)(g.z,{size:"sm",variant:"outline",onClick:()=>{if(!t)return;let e=JSON.stringify((0,eu._)((0,i._)({},t),{nodePositions:A}),null,2),s=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download="debt-graph-".concat(Date.now(),".json"),l.click()},children:[(0,r.jsx)(eG.Z,{className:"h-4 w-4 mr-1"}),"Export"]})})]}),(0,r.jsx)("div",{ref:Z,className:"border border-gray-300 rounded-lg bg-gray-50 flex-1 overflow-auto relative",style:{height:b?"calc(100vh - 300px)":"600px"},onMouseMove:e=>{if(!v||!F.current)return;let s=F.current.getBoundingClientRect(),t=(e.clientX-s.left)/j-N.x,r=(e.clientY-s.top)/j-N.y;S(e=>(0,eu._)((0,i._)({},e),{[v]:{x:t,y:r}}))},onMouseUp:K,onMouseLeave:K,children:(0,r.jsx)("svg",{ref:F,width:"1200",height:"800",style:{transform:"scale(".concat(j,") translate(").concat(N.x,"px, ").concat(N.y,"px)"),transformOrigin:"0 0",cursor:v?"grabbing":"grab"}})}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"\uD83D\uDCA1 Drag nodes to rearrange. Node size = type importance. Inner circle = confidence level."})]}),(0,r.jsx)(u,{value:"routes",className:"space-y-4",children:s&&(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:Array.from(O.values()).map((e,s)=>{let t={fit:(0,r.jsx)(eb,{className:"bg-green-600",children:"Perfect Fit"}),"near-miss":(0,r.jsx)(eb,{className:"bg-amber-600",children:"Near Miss"}),"no-fit":(0,r.jsx)(eb,{className:"bg-red-600",children:"Not Suitable"}),"needs-review":(0,r.jsx)(eb,{className:"bg-blue-600",children:"Review Needed"})};return(0,r.jsxs)(k.Zb,{className:"border-2 cursor-pointer transition-all ".concat({fit:"bg-green-50 border-green-300","near-miss":"bg-amber-50 border-amber-300","no-fit":"bg-red-50 border-red-300","needs-review":"bg-blue-50 border-blue-300"}[e.position]," ").concat(E===e.routeName?"ring-2 ring-blue-500":""),onClick:()=>{P(e.routeName),M(e.path)},children:[(0,r.jsxs)(k.Ol,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(k.ll,{className:"text-lg",children:e.routeName}),t[e.position]]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]}),(0,r.jsxs)(k.aY,{className:"space-y-2",children:[0===e.gaps.length?(0,r.jsx)("div",{className:"text-sm text-green-700 font-semibold",children:"✓ All criteria met"}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-semibold mb-1",children:"Gaps:"}),e.gaps.map((e,s)=>(0,r.jsxs)("div",{className:"text-sm text-gray-700 pl-3",children:["• ",e]},s))]}),(0,r.jsxs)("div",{className:"pt-2 border-t mt-2",children:[(0,r.jsx)("div",{className:"text-xs text-gray-600",children:"Path:"}),(0,r.jsxs)("div",{className:"text-xs mt-1",children:[e.path.slice(0,3).join(" → "),"..."]})]})]})]},e.routeName)})})}),(0,r.jsx)(u,{value:"details",className:"space-y-4",children:_&&t.entities[_]?(0,r.jsxs)(k.Zb,{children:[(0,r.jsxs)(k.Ol,{children:[(0,r.jsx)(k.ll,{children:t.entities[_].label}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)(eb,{children:t.entities[_].type}),(0,r.jsxs)(eb,{variant:"outline",children:["Confidence: ",(100*t.entities[_].confidence).toFixed(0),"%"]})]})]}),(0,r.jsxs)(k.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Description"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:t.entities[_].description||"N/A"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Properties"}),(0,r.jsx)("div",{className:"bg-gray-50 p-3 rounded text-sm font-mono text-gray-700",children:JSON.stringify(t.entities[_].properties,null,2)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Source"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:t.entities[_].source})]})]})]}):(0,r.jsx)("div",{className:"text-gray-500 text-center py-8",children:"Click on a node in the graph to see details"})}),(0,r.jsx)(u,{value:"settings",className:"space-y-4",children:(0,r.jsxs)(k.Zb,{children:[(0,r.jsx)(k.Ol,{children:(0,r.jsx)(k.ll,{className:"text-base",children:"Layout Settings"})}),(0,r.jsxs)(k.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:L,onChange:e=>W(e.target.checked),className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm",children:"Enable automatic force-directed layout"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 ml-6",children:"Automatically adjusts node positions to minimize overlaps and optimize visibility."})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(g.z,{variant:"outline",className:"w-full",onClick:()=>{V(),W(!0)},children:"Reset to Default Layout"})}),(0,r.jsxs)("div",{className:"pt-4 border-t",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm mb-2",children:"Legend"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:eK.condition}}),(0,r.jsx)("span",{children:"Condition"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:eK.rule}}),(0,r.jsx)("span",{children:"Rule"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:eK.outcome}}),(0,r.jsx)("span",{children:"Outcome"})]})]})]})]})]})})]})})]})})}var eX=t(1049),eJ=t(4704),e0=t(8008);function e4(){let[e,s]=(0,l.useState)("notes"),{isAuthenticated:t,username:i,logout:c,loading:d}=(0,b.useAuth)(),o=(0,a.useRouter)();return((0,l.useEffect)(()=>{d||t||o.push("/advisor-login")},[d,t,o]),d)?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(B.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):t?(0,r.jsx)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("header",{className:"mb-8 flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"RMA Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Risk Management Advice - Advisor Portal"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Logged in as: ",(0,r.jsx)("span",{className:"font-semibold",children:i})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(n.default,{href:"/advisor-dashboard",children:(0,r.jsx)(g.z,{variant:"outline",children:"View Client Uploads"})}),(0,r.jsxs)(g.z,{onClick:c,variant:"destructive",className:"flex items-center gap-2",children:[(0,r.jsx)(eX.Z,{className:"h-4 w-4"}),"Logout"]})]})]}),(0,r.jsxs)(x,{value:e,onValueChange:s,className:"w-full",children:[(0,r.jsxs)(m,{className:"grid w-full grid-cols-10 mb-8",children:[(0,r.jsxs)(h,{value:"notes",className:"flex items-center gap-2",children:[(0,r.jsx)(E.Z,{className:"h-4 w-4"}),"Notes to CoA"]}),(0,r.jsxs)(h,{value:"qr",className:"flex items-center gap-2",children:[(0,r.jsx)(eJ.Z,{className:"h-4 w-4"}),"Client QR Codes"]}),(0,r.jsxs)(h,{value:"eligibility",className:"flex items-center gap-2",children:[(0,r.jsx)(S.Z,{className:"h-4 w-4"}),"Eligibility"]}),(0,r.jsxs)(h,{value:"client-search",className:"flex items-center gap-2",children:[(0,r.jsx)(R.Z,{className:"h-4 w-4"}),"Search Client Docs"]}),(0,r.jsxs)(h,{value:"manuals",className:"flex items-center gap-2",children:[(0,r.jsx)(U.Z,{className:"h-4 w-4"}),"Ask the Manuals"]}),(0,r.jsxs)(h,{value:"graph",className:"flex items-center gap-2",children:[(0,r.jsx)(eU.Z,{className:"h-4 w-4"}),"Graph View"]}),(0,r.jsxs)(h,{value:"interactive",className:"flex items-center gap-2",children:[(0,r.jsx)(T.Z,{className:"h-4 w-4"}),"Interactive Routes"]}),(0,r.jsxs)(h,{value:"system",className:"flex items-center gap-2",children:[(0,r.jsx)(eS.Z,{className:"h-4 w-4"}),"System"]}),(0,r.jsxs)(h,{value:"debug",className:"flex items-center gap-2",children:[(0,r.jsx)(e0.Z,{className:"h-4 w-4"}),"Debug"]}),(0,r.jsxs)(h,{value:"docs",className:"flex items-center gap-2",children:[(0,r.jsx)(L.Z,{className:"h-4 w-4"}),"Documentation"]})]}),(0,r.jsx)(u,{value:"notes",children:(0,r.jsx)(j,{})}),(0,r.jsx)(u,{value:"qr",children:(0,r.jsx)(N,{})}),(0,r.jsx)(u,{value:"eligibility",children:(0,r.jsx)(eP,{})}),(0,r.jsx)(u,{value:"client-search",children:(0,r.jsx)(P,{})}),(0,r.jsx)(u,{value:"manuals",children:(0,r.jsx)(w,{})}),(0,r.jsx)(u,{value:"graph",children:(0,r.jsx)(eF,{})}),(0,r.jsx)(u,{value:"interactive",children:(0,r.jsx)(eQ,{})}),(0,r.jsx)(u,{value:"system",children:(0,r.jsx)(eE,{})}),(0,r.jsx)(u,{value:"debug",children:(0,r.jsx)(eh,{})}),(0,r.jsx)(u,{value:"docs",children:(0,r.jsx)(K,{})})]})]})}):null}},9069:function(e,s,t){"use strict";t.d(s,{X:function(){return x},bZ:function(){return o}});var r=t(6846),l=t(5562),a=t(3827),n=t(4090),i=t(9769),c=t(2169);let d=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=n.forwardRef((e,s)=>{var{className:t,variant:n}=e,i=(0,l._)(e,["className","variant"]);return(0,a.jsx)("div",(0,r._)({ref:s,role:"alert",className:(0,c.cn)(d({variant:n}),t)},i))});o.displayName="Alert",n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("h5",(0,r._)({ref:s,className:(0,c.cn)("mb-1 font-medium leading-none tracking-tight",t)},n))}).displayName="AlertTitle";let x=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:s,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",t)},n))});x.displayName="AlertDescription"},575:function(e,s,t){"use strict";t.d(s,{z:function(){return x}});var r=t(6846),l=t(5562),a=t(3827),n=t(4090),i=t(9143),c=t(9769),d=t(2169);let o=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=n.forwardRef((e,s)=>{var{className:t,variant:n,size:c,asChild:x=!1}=e,m=(0,l._)(e,["className","variant","size","asChild"]);let h=x?i.g7:"button";return(0,a.jsx)(h,(0,r._)({className:(0,d.cn)(o({variant:n,size:c,className:t})),ref:s},m))});x.displayName="Button"},5671:function(e,s,t){"use strict";t.d(s,{Ol:function(){return d},SZ:function(){return x},Zb:function(){return c},aY:function(){return m},ll:function(){return o}});var r=t(6846),l=t(5562),a=t(3827),n=t(4090),i=t(2169);let c=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t)},n))});c.displayName="Card";let d=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t)},n))});d.displayName="CardHeader";let o=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("h3",(0,r._)({ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t)},n))});o.displayName="CardTitle";let x=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("p",(0,r._)({ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t)},n))});x.displayName="CardDescription";let m=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("p-6 pt-0",t)},n))});m.displayName="CardContent",n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)("div",(0,r._)({ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t)},n))}).displayName="CardFooter"},2782:function(e,s,t){"use strict";t.d(s,{I:function(){return c}});var r=t(6846),l=t(5562),a=t(3827),n=t(4090),i=t(2169);let c=n.forwardRef((e,s)=>{var{className:t,type:n}=e,c=(0,l._)(e,["className","type"]);return(0,a.jsx)("input",(0,r._)({type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s},c))});c.displayName="Input"},2647:function(e,s,t){"use strict";t.d(s,{_:function(){return x}});var r=t(6846),l=t(5562),a=t(3827),n=t(4090),i=t(4602),c=t(9769),d=t(2169);let o=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),x=n.forwardRef((e,s)=>{var{className:t}=e,n=(0,l._)(e,["className"]);return(0,a.jsx)(i.f,(0,r._)({ref:s,className:(0,d.cn)(o(),t)},n))});x.displayName=i.f.displayName},3779:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthProvider:function(){return i},useAuth:function(){return c}});var r=t(3827),l=t(4090),a=t(7907);let n=(0,l.createContext)(void 0);function i(e){let{children:s}=e,[t,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[o,x]=(0,l.useState)(null),[m,h]=(0,l.useState)(!0),u=(0,a.useRouter)(),g=(0,a.usePathname)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("advisor_token"),s=localStorage.getItem("advisor_username");e&&s&&(i(!0),d(s),x(e)),h(!1)},[]),(0,l.useEffect)(()=>{if(!m&&!t){let e=["/advisor-login","/client-upload"].some(e=>null==g?void 0:g.startsWith(e));g&&!e&&"/advisor-login"!==g&&u.push("/advisor-login")}},[t,m,g,u]),(0,r.jsx)(n.Provider,{value:{isAuthenticated:t,username:c,token:o,login:(e,s)=>{localStorage.setItem("advisor_token",s),localStorage.setItem("advisor_username",e),i(!0),d(e),x(s)},logout:()=>{localStorage.removeItem("advisor_token"),localStorage.removeItem("advisor_username"),i(!1),d(null),x(null),u.push("/advisor-login")},loading:m},children:s})}function c(){let e=(0,l.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3482:function(e,s,t){"use strict";t.d(s,{Y:function(){return l}});let r=e=>"".concat("https://edge-1.rmatool.org.uk").concat({rag:"/api/rag/query",upload:"/api/upload","client-rag":"/api/client-rag/query","doc-processor":"/api/doc-processor",notes:"/api/notes"}[e]||"/api/".concat(e)),l={rag:()=>r("rag"),upload:()=>r("upload"),clientRag:()=>r("client-rag"),docProcessor:()=>r("doc-processor"),notes:()=>r("notes")}},2169:function(e,s,t){"use strict";t.d(s,{cn:function(){return a}});var r=t(3167),l=t(1367);function a(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,l.m6)((0,r.W)(s))}}},function(e){e.O(0,[908,999,715,792,319,971,69,744],function(){return e(e.s=3230)}),_N_E=e.O()}]);